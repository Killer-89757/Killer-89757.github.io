<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>《带壳的牡蛎是大人的心脏》</title>
      <link href="/2024/09/15/%E3%80%8A%E5%B8%A6%E5%A3%B3%E7%9A%84%E7%89%A1%E8%9B%8E%E6%98%AF%E5%A4%A7%E4%BA%BA%E7%9A%84%E5%BF%83%E8%84%8F%E3%80%8B/"/>
      <url>/2024/09/15/%E3%80%8A%E5%B8%A6%E5%A3%B3%E7%9A%84%E7%89%A1%E8%9B%8E%E6%98%AF%E5%A4%A7%E4%BA%BA%E7%9A%84%E5%BF%83%E8%84%8F%E3%80%8B/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="《带壳的牡蛎是大人的心脏》"><a href="#《带壳的牡蛎是大人的心脏》" class="headerlink" title="《带壳的牡蛎是大人的心脏》"></a>《带壳的牡蛎是大人的心脏》</h1><blockquote><p>时间：2024.08.01</p></blockquote><h2 id="经典语录"><a href="#经典语录" class="headerlink" title="经典语录"></a>经典语录</h2><ul><li><p>复盘生活是需要勇气的</p></li><li><p>对爱和梦的零散记录，一些破碎后的自愈，一些对命运和希望的思考</p></li><li><p>带壳的牡蛎是大人的心脏</p><ul><li>小孩是从什么时候变成大人的呢？有时候，上一秒还是小孩，下一秒就已经是大人了，小孩好像有很多选择，选择成为想要成为的人；大人没有选择，只能成为大人 </li><li>小孩可以在公园里哭 可以在电梯里哭 可以在商场、饭店、街头 世界上任何一个地方哭。大人呢？ 大人不可以哭 因为世界没有留给大人 可以哭泣的地方</li><li>长大以后， 我真的考上名牌大学 我才明白 考上名牌大学，并不一定能买得起大别墅 考上名牌大学，还可能会交不起房租</li><li><strong>厚厚的时间的灰尘和储存太久的眼泪是大人的味道</strong></li><li>原来牡蛎用坚硬的石头、棍棒，怎么砸都砸不碎的 用一把小刀就可以轻松地打开</li><li>带壳的牡蛎是大人的心脏</li></ul></li><li><p>向日葵花园</p><ul><li>不管呢用的是好蛋、坏蛋、发霉的蛋、发臭的蛋 只要样子好看就能拿冠军。</li><li>说起来煎蛋大赛和向日葵小路就像下暴雨的那几天我躺在床上做的两个梦。有些事，我以前想不明白 为什么，最好吃的煎蛋，却拿不到冠军？ 为什么，开得好好的向日葵，会被暴雨冲走？ 而我现在好像明白了 <strong>原来我做煎蛋，未必是要拿冠军 而是我真的喜欢煎蛋</strong>。 <strong>我种花呢 也未必是要做种花大明星，而是花会让很多人开心，会有很多人喜欢</strong></li></ul></li><li><p>没有犹豫才是真的喜欢</p><ul><li>喜欢啊！超级喜欢 一点犹豫都没有 没有犹豫测才是真的喜欢</li></ul></li><li><p>我们为什么要喝酒</p><ul><li>我们喝酒 是为了那些可以一起喝酒的人</li></ul></li><li><p>C餐人生</p><ul><li>华丽的A餐、看起来普普通通，但可以吃饱的B餐、奇奇怪怪没什么人点的C餐</li><li>啊兔呀，我……我好想点C餐 为什么呀？ 因，因为我喜欢那个小花，还有玩具。 啊兔 嗯？ 我的想法是不是很可笑 我……我还是选B餐吧！ 啊猪啊 是呢自己的人生 按你喜欢的方式去选择吧</li></ul></li><li><p>当你难过的时候</p><ul><li>所以，啊猪，如果难过的话，就往前跑吧，越往前跑，就离今天的难过越远，远到再也看不见了 </li><li>可是有些难过时不管跑多远都看得见？<strong>重要的时跑下去啊 跑下去，总有一天会看不见的。</strong></li></ul></li><li><p>在梦和现实边缘</p><ul><li>白天的信息，没有完全处理，之后晚上做梦，编个故事处理掉……如果梦境来自现实的话，现实好像也没有那么讨厌了。</li></ul></li><li><p>长颈鹿快不快乐</p><ul><li>可是长颈鹿真的喜欢自己的长脖子吗？长颈鹿……真的快乐吗？ 喜不喜欢，快不快乐 已经没那么重要了吧 能活下来就很好了</li></ul></li><li><p>过平凡人的生活</p><ul><li>师父：你就有学成出山了，师父平日里的教诲都记住了吗？ 毛毛：记住了，师父 师父：师父传授给你的武功，都学会了吗？ 毛毛：学会了，师父 师父：北冥秘籍、九阳真经、乾坤大挪移、神照经……这些你都记住了吗？ 毛毛：记住了，师父 师父：六脉神剑、斗转星移、黯然销魂者……你都学会了吗？ 毛毛：学会了，师父 师父：很好，你现在已经是武林第一高手了。 去吧，去过平凡人的生活</li></ul></li><li><p>因为我喜欢</p><ul><li>兔兔：芝麻汤圆有很多人喜欢，花生汤圆也是 只有黑眼豆豆汤圆没人喜欢，没人接受！ 没人喜欢的汤圆为什么要煮？不被理解的事为什么要做？ 阿猪：因为我喜欢</li></ul></li><li><p>逃跑吧小孩</p><ul><li>爸爸说女孩子读书好没用的 考到九十分 也许就有机会逃跑了</li><li>我们不停地画着一个圈，圈的尽头是另一个起点</li><li>他们不停地跳进这个圈 总期待会得到另一张脸 </li><li>不停抄袭着改变，不停妄想着一切，不停期待的明天</li><li>变成了昨天 </li><li>你，觉得恨，却离不开</li><li>环形公路</li></ul></li><li><p>我的小狗</p><ul><li>请相信你的小狗会在你最需要它的时候出现。如果有天你找不到它，也不要心急难过，你的小狗，会永远爱你，永远给你拥抱 </li><li>不喜欢的工作可以换掉。 、</li></ul></li><li><p>我喜欢自己喜欢的不得了</p><ul><li>阿兔，为什么我们总喜欢给自己制造所谓的模板呢？为什么我们不能接受真实的自己呢？为什么我们不能真的爱自己呢？ 以前我觉得，爱自己，就是给自己买冰淇淋。但是现在，我觉得，爱自己，是不讨厌自己的小肚子，不讨厌自己的痘痘，不讨厌自己的笨，不因为别人的指责怀疑自己，永远相信自己！每天都对自己说：“你可以，你最棒，就算现在不棒，以后也会很棒！” 阿兔，我们一定要成为这个世界上最爱自己的人！</li></ul></li><li><p>后记</p><ul><li>创造就像沿路播撒种子，在未来的某一天开花，带来一些特别的意义和惊喜</li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> 读书笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 随笔 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Butterfly 安裝(一)</title>
      <link href="/2024/09/14/Butterfly%20%E5%AE%89%E8%A3%9D(%E4%B8%80)/"/>
      <url>/2024/09/14/Butterfly%20%E5%AE%89%E8%A3%9D(%E4%B8%80)/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="Butterfly-安裝-一"><a href="#Butterfly-安裝-一" class="headerlink" title="Butterfly 安裝(一)"></a>Butterfly 安裝(一)</h1><p>在你的 Hexo 根目录里</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git clone https://github.com/jerryc127/hexo-theme-butterfly.git </span><br></pre></td></tr></table></figure><p>升級方法：在主題目录下，運行 <code>git pull</code></p><h2 id="應用主題"><a href="#應用主題" class="headerlink" title="應用主題"></a>應用主題</h2><p>修改 Hexo 根目录下的 <code>_config.yml</code>，把主題改为 <code>butterfly</code></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">theme: hexo-theme-butterfly</span><br></pre></td></tr></table></figure><h2 id="安裝插件"><a href="#安裝插件" class="headerlink" title="安裝插件"></a>安裝插件</h2><p>如果你沒有 pug 以及 stylus 的渲染器，请下载安裝：</p><blockquote><p>一个错误：</p><p><strong>Hexo启动页面显示extends includes&#x2F;layout.pug block content include includes&#x2F;recent-posts.pug include</strong></p><p>Hexo更改主题后启动服务器，界面显如下字符:</p><p>extends includes&#x2F;layout.pug block content include includes&#x2F;recent-posts.pug include includes&#x2F;partial</p><p>解决方案:</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm install --save hexo-renderer-jade hexo-generator-feed hexo-generator-sitemap hexo-browsersync hexo-generator-archive</span><br><span class="line"></span><br><span class="line">清除缓存</span><br><span class="line">hexo clean</span><br><span class="line"></span><br><span class="line">生成静态文件即可</span><br><span class="line">hexo g</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fe3e1e2cc85571c4de776648c3873ea20-5b26e1.png" alt="在这里插入图片描述"></p></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install hexo-renderer-pug hexo-renderer-stylus --save</span><br></pre></td></tr></table></figure><p>在 hexo 的根目錄創建一個文件 <code>_config.butterfly.yml</code>，並把<strong>主題</strong>目錄的 <code>_config.yml</code> <strong>內容</strong>复制到 <code>_config.butterfly.yml</code> 去。( <strong>注意: 复制的是主題的 <code>_config.yml</code> ，而不是 hexo 的 <code>_config.yml</code></strong>)</p><blockquote><p><strong>注意：</strong> 不要把主題目錄的 <code>_config.yml</code> 刪掉</p></blockquote><blockquote><p><strong>注意：</strong> 以後只需要在 <code>_config.butterfly.yml</code> 進行配置就行。<br>如果使用了 <code>_config.butterfly.yml</code>， 配置主題的 <code>_config.yml</code> 將不會有效果。</p></blockquote><p>Hexo会自动合并主題中的 <code>_config.yml</code> 和 <code>_config.butterfly.yml</code> 里的配置，如果存在同名配置，会使用 <code>_config.butterfly.yml</code> 的配置，其优先度较高。</p>]]></content>
      
      
      <categories>
          
          <category> Flask </category>
          
      </categories>
      
      
        <tags>
            
            <tag> web </tag>
            
            <tag> 计算机 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>去哪网</title>
      <link href="/2024/09/14/%E5%8E%BB%E5%93%AA%E7%BD%91/"/>
      <url>/2024/09/14/%E5%8E%BB%E5%93%AA%E7%BD%91/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="去哪网"><a href="#去哪网" class="headerlink" title="去哪网"></a>去哪网</h1><p>抓取网址：<a href="https://m.flight.qunar.com/ncs/page/flightlist?depCity=%E5%8C%97%E4%BA%AC&arrCity=%E4%B8%8A%E6%B5%B7&goDate=2024-09-05&from=touch_index_search&child=0&baby=0&cabinType=0">https://m.flight.qunar.com/ncs/page/flightlist?depCity=%E5%8C%97%E4%BA%AC&amp;arrCity=%E4%B8%8A%E6%B5%B7&amp;goDate=2024-09-05&amp;from=touch_index_search&amp;child=0&amp;baby=0&amp;cabinType=0</a></p><p>抓取目标：机票相关信息</p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240903141535724-41891e.png" alt="image-20240903141535724"></p><h2 id="网页分析"><a href="#网页分析" class="headerlink" title="网页分析"></a>网页分析</h2><p>打开网页后，按<code>F12</code>打开开发者工具，然后切换时间。</p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240903141432772-af37c3.png" alt="image-20240903141432772"></p><p>在搜索框中搜索<code>_m_</code></p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240903142032442-4c6896.png" alt="image-20240903142032442"></p><p>向下追踪，找到加密位置</p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240903142201679-91e647.png" alt="image-20240903142201679"></p><p>继续追踪</p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240903142347029-9bb5ee.png" alt="image-20240903142347029"></p><p>找到加密位置，<code>init()</code>是消息摘要算法(<code>md5</code>,<code>sha1</code>等)的另一种变形</p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240903142902216-6d1967.png" alt="image-20240903142902216"></p><p>初始化一直向下追踪，盯着初始化部分的值</p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240903142554674-f8727f.png" alt="image-20240903142554674"></p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240903142642049-6ae51d.png" alt="image-20240903142642049"></p><p>在初始化完成后就能发现加密算法sha1</p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240903142742987-6a3817.png" alt="image-20240903142742987"></p><p>我们找一个在线的md5，sha1加密，对结果进行验证</p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240903143320424-67073b.png" alt="image-20240903143320424"></p>]]></content>
      
      
      <categories>
          
          <category> Flask </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 日志 </tag>
            
            <tag> 计算机 </tag>
            
            <tag> Games </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>幻藏网</title>
      <link href="/2024/09/14/%E5%B9%BB%E8%97%8F%E7%BD%91/"/>
      <url>/2024/09/14/%E5%B9%BB%E8%97%8F%E7%BD%91/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="幻藏网"><a href="#幻藏网" class="headerlink" title="幻藏网"></a>幻藏网</h1><p>抓取网址：<a href="https://huancang.art/#/market">https://huancang.art/#/market</a></p><p>抓取目标：藏品相关信息</p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240903131738509-4f0b28.png" alt="image-20240903131738509"></p><h2 id="网页分析"><a href="#网页分析" class="headerlink" title="网页分析"></a>网页分析</h2><p>打开网页后，按<code>F12</code>打开开发者工具，然后搜索数据，点击翻页。</p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240903131904519-45e879.png" alt="image-20240903131904519"></p><p>载荷中没有加密，有个时间戳</p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240903131934986-3bd52c.png" alt="image-20240903131934986"></p><p>请求头中，有个签名<code>signature</code> 和 <code>x-token</code>参数加密</p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240903132028455-1fab53.png" alt="image-20240903132028455"></p><p>定位参数加密位置</p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240903132320615-26f51f.png" alt="image-20240903132320615"></p><p>打断点，在控制台输出</p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240903132341591-1f95ed.png" alt="image-20240903132341591"></p><p>向下追踪</p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240903143745841-d4e86d.png" alt="image-20240903143745841"></p><p>上面我们能明显的看到md5的特征了，我们直接那参数去标准网站进行对比，可以得到是不是标准算法</p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240903143940494-2468d5.png" alt="image-20240903143940494"></p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240903143706451-68f1f9.png" alt="image-20240903143706451"></p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><ul><li>js代码</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">Cryptojs</span> = <span class="built_in">require</span>(<span class="string">&quot;E:\\WAWS_ENV\\nodejs\\node_modules\\crypto-js&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">md5encrypto</span>(<span class="params">text</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Cryptojs</span>.<span class="title class_">MD5</span>(text).<span class="title function_">toString</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> <span class="title class_">Pi</span> = &#123;</span><br><span class="line">    <span class="attr">objKeySort</span>: <span class="function"><span class="params">A</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="title class_">Object</span>.<span class="title function_">keys</span>(A).<span class="title function_">sort</span>(), e = &#123;&#125;, t = <span class="number">0</span>; t &lt; i.<span class="property">length</span>; t++)</span><br><span class="line">            (A[i[t]] || <span class="string">&quot;0&quot;</span> == A[i[t]]) &amp;&amp; (e[i[t]] = A[i[t]]);</span><br><span class="line">        <span class="keyword">return</span> e</span><br><span class="line">    &#125;</span><br><span class="line">    ,</span><br><span class="line">    <span class="attr">getparam</span>: <span class="function"><span class="params">A</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> i = <span class="string">&quot;?&quot;</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> e <span class="keyword">in</span> A)</span><br><span class="line">            i += e,</span><br><span class="line">                i += <span class="string">&quot;=&quot;</span>,</span><br><span class="line">                i += A[e],</span><br><span class="line">                i += <span class="string">&quot;&amp;&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> i = i.<span class="title function_">substr</span>(<span class="number">0</span>, i.<span class="property">length</span> - <span class="number">1</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    ,</span><br><span class="line">    <span class="attr">getQueryVariable</span>: <span class="function"><span class="params">A</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">hash</span>.<span class="title function_">substring</span>(<span class="number">1</span>), e = (i = i.<span class="title function_">split</span>(<span class="string">&quot;?&quot;</span>)[<span class="number">1</span>]).<span class="title function_">split</span>(<span class="string">&quot;&amp;&quot;</span>), t = <span class="number">0</span>; t &lt; e.<span class="property">length</span>; t++) &#123;</span><br><span class="line">            <span class="keyword">var</span> I = e[t].<span class="title function_">split</span>(<span class="string">&quot;=&quot;</span>);</span><br><span class="line">            <span class="keyword">if</span> (I[<span class="number">0</span>] == A)</span><br><span class="line">                <span class="keyword">return</span> I[<span class="number">1</span>]</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> !<span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">    ,</span><br><span class="line">    <span class="attr">formatDate</span>: <span class="function"><span class="params">A</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (A) &#123;</span><br><span class="line">            <span class="keyword">let</span> i = <span class="title class_">Math</span>.<span class="title function_">floor</span>(A / <span class="number">1e3</span> / <span class="number">60</span> / <span class="number">60</span>)</span><br><span class="line">                , e = <span class="title class_">Math</span>.<span class="title function_">floor</span>(A / <span class="number">1e3</span> / <span class="number">60</span> % <span class="number">60</span>)</span><br><span class="line">                , t = <span class="title class_">Math</span>.<span class="title function_">floor</span>(A / <span class="number">1e3</span> % <span class="number">60</span>);</span><br><span class="line">            <span class="keyword">return</span> i = i &lt; <span class="number">10</span> ? <span class="string">&quot;0&quot;</span> + i : i,</span><br><span class="line">                e = e &lt; <span class="number">10</span> ? <span class="string">&quot;0&quot;</span> + e : e,</span><br><span class="line">                t = t &lt; <span class="number">10</span> ? <span class="string">&quot;0&quot;</span> + t : t,</span><br><span class="line">            i + <span class="string">&quot;h &quot;</span> + e + <span class="string">&quot;m &quot;</span> + t + <span class="string">&quot;s&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    ,</span><br><span class="line">    <span class="attr">contract</span>: <span class="function">(<span class="params">A, i = <span class="number">4</span>, e = <span class="number">3</span></span>) =&gt;</span> A &amp;&amp; A.<span class="title function_">replace</span>(<span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&quot;(.&#123;&quot;</span> + i + <span class="string">&quot;&#125;).*(.&#123;&quot;</span> + e + <span class="string">&quot;&#125;)&quot;</span>), <span class="string">&quot;$1******$2&quot;</span>),</span><br><span class="line">    <span class="attr">toast</span>: <span class="function">(<span class="params">A, i = <span class="string">&quot;error&quot;</span></span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="title function_">v</span>(&#123;</span><br><span class="line">            <span class="attr">message</span>: A,</span><br><span class="line">            <span class="attr">type</span>: i,</span><br><span class="line">            <span class="attr">customClass</span>: <span class="string">&quot;huancang&quot;</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    ,</span><br><span class="line">    <span class="attr">copyText</span>: <span class="function"><span class="params">A</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> i = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;textarea&quot;</span>);</span><br><span class="line">        i.<span class="property">value</span> = A,</span><br><span class="line">            <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(i),</span><br><span class="line">            i.<span class="title function_">select</span>(),</span><br><span class="line">            <span class="variable language_">document</span>.<span class="title function_">execCommand</span>(<span class="string">&quot;Copy&quot;</span>),</span><br><span class="line">            <span class="title function_">v</span>(&#123;</span><br><span class="line">                <span class="attr">message</span>: <span class="string">&quot;复制成功&quot;</span>,</span><br><span class="line">                <span class="attr">type</span>: <span class="string">&quot;success&quot;</span>,</span><br><span class="line">                <span class="attr">customClass</span>: <span class="string">&quot;huancang&quot;</span></span><br><span class="line">            &#125;),</span><br><span class="line">            i.<span class="title function_">remove</span>()</span><br><span class="line">    &#125;</span><br><span class="line">    ,</span><br><span class="line">    <span class="attr">setStorage</span>: <span class="function">(<span class="params">A, i</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="string">&quot;string&quot;</span> == <span class="keyword">typeof</span> i ? <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(A, i) : <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(A, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(i))</span><br><span class="line">    &#125;</span><br><span class="line">    ,</span><br><span class="line">    <span class="attr">getStorage</span>: <span class="function"><span class="params">A</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> i = <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(A);</span><br><span class="line">        <span class="keyword">return</span> i ? <span class="number">0</span> == i.<span class="title function_">indexOf</span>(<span class="string">&quot;&#123;&quot;</span>) || <span class="number">0</span> == i.<span class="title function_">indexOf</span>(<span class="string">&quot;[&quot;</span>) ? <span class="title class_">JSON</span>.<span class="title function_">parse</span>(i) : i : <span class="string">&quot;&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">    ,</span><br><span class="line">    <span class="attr">routerTo</span>: <span class="function"><span class="params">A</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="title class_">Hi</span>.<span class="title function_">push</span>(A)</span><br><span class="line">    &#125;</span><br><span class="line">    ,</span><br><span class="line">    <span class="attr">navTo</span>: <span class="function"><span class="params">A</span> =&gt;</span> &#123;</span><br><span class="line">        A.<span class="property">indexOf</span> &amp;&amp; <span class="number">0</span> == A.<span class="title function_">indexOf</span>(<span class="string">&quot;http&quot;</span>) ? <span class="literal">null</span> != <span class="variable language_">window</span>.<span class="title function_">open</span>(A) || (<span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">href</span> = A) : <span class="title class_">Hi</span>.<span class="title function_">push</span>(A)</span><br><span class="line">    &#125;</span><br><span class="line">    ,</span><br><span class="line">    <span class="attr">strTrim</span>: <span class="function">(<span class="params">A, i</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> e;</span><br><span class="line">        <span class="keyword">return</span> e = A.<span class="title function_">replace</span>(<span class="regexp">/(^\s+)|(\s+$)/g</span>, <span class="string">&quot;&quot;</span>),</span><br><span class="line">        i &amp;&amp; <span class="string">&quot;g&quot;</span> == i.<span class="title function_">toLowerCase</span>() &amp;&amp; (e = e.<span class="title function_">replace</span>(<span class="regexp">/\s/g</span>, <span class="string">&quot;&quot;</span>)),</span><br><span class="line">            e</span><br><span class="line">    &#125;</span><br><span class="line">    ,</span><br><span class="line">    <span class="attr">getImg</span>: <span class="function"><span class="params">A</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> i = <span class="string">`/src/assets/img/<span class="subst">$&#123;A&#125;</span>`</span>;</span><br><span class="line">        <span class="keyword">let</span> e;</span><br><span class="line">        <span class="keyword">return</span> A.<span class="title function_">indexOf</span>(<span class="string">&quot;svg/&quot;</span>) &gt; -<span class="number">1</span> ? (e = &#123;</span><br><span class="line">            <span class="string">&quot;/src/assets/img/svg/no-data.svg&quot;</span>: <span class="title class_">Ci</span></span><br><span class="line">        &#125;,</span><br><span class="line">        e[i] &amp;&amp; e[i].<span class="property">default</span>) : (e = &#123;</span><br><span class="line">            <span class="string">&quot;/src/assets/img/2022.png&quot;</span>: q,</span><br><span class="line">            <span class="string">&quot;/src/assets/img/9b823a67f06c34f6359a0c78870a20c7.jpg&quot;</span>: _,</span><br><span class="line">            <span class="string">&quot;/src/assets/img/address.png&quot;</span>: $,</span><br><span class="line">            <span class="string">&quot;/src/assets/img/alipay.png&quot;</span>: <span class="variable constant_">AA</span>,</span><br><span class="line">            <span class="string">&quot;/src/assets/img/b-title-l.png&quot;</span>: iA,</span><br><span class="line">            <span class="string">&quot;/src/assets/img/b-title-r.png&quot;</span>: eA,</span><br><span class="line">            <span class="string">&quot;/src/assets/img/balance.png&quot;</span>: tA,</span><br><span class="line">            <span class="string">&quot;/src/assets/img/bank.png&quot;</span>: lA,</span><br><span class="line">            <span class="string">&quot;/src/assets/img/banner-collection.jpg&quot;</span>: cA,</span><br><span class="line">            <span class="string">&quot;/src/assets/img/banner1-1.jpg&quot;</span>: mA,</span><br><span class="line">            <span class="string">&quot;/src/assets/img/banner1.jpg&quot;</span>: bA,</span><br><span class="line">            <span class="string">&quot;/src/assets/img/bg-l.png&quot;</span>: <span class="variable constant_">ZA</span>,</span><br><span class="line">            <span class="string">&quot;/src/assets/img/bg-r.png&quot;</span>: gA,</span><br><span class="line">            <span class="string">&quot;/src/assets/img/bh.png&quot;</span>: <span class="variable constant_">RA</span>,</span><br><span class="line">            <span class="string">&quot;/src/assets/img/bh2-1.png&quot;</span>: <span class="variable constant_">GA</span>,</span><br><span class="line">            <span class="string">&quot;/src/assets/img/bh2.png&quot;</span>: aA,</span><br><span class="line">            <span class="string">&quot;/src/assets/img/check.png&quot;</span>: dA,</span><br><span class="line">            <span class="string">&quot;/src/assets/img/close.png&quot;</span>: oA,</span><br><span class="line">            <span class="string">&quot;/src/assets/img/cz.png&quot;</span>: <span class="variable constant_">YA</span>,</span><br><span class="line">            <span class="string">&quot;/src/assets/img/default-avatar.png&quot;</span>: jA,</span><br><span class="line">            <span class="string">&quot;/src/assets/img/delete.png&quot;</span>: nA,</span><br><span class="line">            <span class="string">&quot;/src/assets/img/dizuo.png&quot;</span>: hA,</span><br><span class="line">            <span class="string">&quot;/src/assets/img/ewm.jpg&quot;</span>: <span class="variable constant_">DA</span>,</span><br><span class="line">            <span class="string">&quot;/src/assets/img/ewm1.png&quot;</span>: pA,</span><br><span class="line">            <span class="string">&quot;/src/assets/img/exchangebg.jpg&quot;</span>: <span class="variable constant_">WA</span>,</span><br><span class="line">            <span class="string">&quot;/src/assets/img/fm.png&quot;</span>: wA,</span><br><span class="line">            <span class="string">&quot;/src/assets/img/footer-logo.png&quot;</span>: yA,</span><br><span class="line">            <span class="string">&quot;/src/assets/img/footer-logo1.png&quot;</span>: uA,</span><br><span class="line">            <span class="string">&quot;/src/assets/img/ga.png&quot;</span>: <span class="variable constant_">SA</span>,</span><br><span class="line">            <span class="string">&quot;/src/assets/img/gaw.jpg&quot;</span>: <span class="variable constant_">EA</span>,</span><br><span class="line">            <span class="string">&quot;/src/assets/img/gift-on.png&quot;</span>: sA,</span><br><span class="line">            <span class="string">&quot;/src/assets/img/gift.png&quot;</span>: <span class="variable constant_">OA</span>,</span><br><span class="line">            <span class="string">&quot;/src/assets/img/hcbg.jpg&quot;</span>: <span class="variable constant_">TA</span>,</span><br><span class="line">            <span class="string">&quot;/src/assets/img/hclogo2.png&quot;</span>: vA,</span><br><span class="line">            <span class="string">&quot;/src/assets/img/hcys.png&quot;</span>: <span class="variable constant_">LA</span>,</span><br><span class="line">            <span class="string">&quot;/src/assets/img/icp.jpg&quot;</span>: <span class="variable constant_">QA</span>,</span><br><span class="line">            <span class="string">&quot;/src/assets/img/inviteFriends-on.png&quot;</span>: <span class="variable constant_">VA</span>,</span><br><span class="line">            <span class="string">&quot;/src/assets/img/inviteFriends.png&quot;</span>: <span class="variable constant_">FA</span>,</span><br><span class="line">            <span class="string">&quot;/src/assets/img/jc.png&quot;</span>: <span class="variable constant_">CA</span>,</span><br><span class="line">            <span class="string">&quot;/src/assets/img/js.png&quot;</span>: <span class="variable constant_">BA</span>,</span><br><span class="line">            <span class="string">&quot;/src/assets/img/lock.png&quot;</span>: <span class="variable constant_">HA</span>,</span><br><span class="line">            <span class="string">&quot;/src/assets/img/logo.png&quot;</span>: <span class="variable constant_">PA</span>,</span><br><span class="line">            <span class="string">&quot;/src/assets/img/more.png&quot;</span>: <span class="variable constant_">XA</span>,</span><br><span class="line">            <span class="string">&quot;/src/assets/img/no-sc.png&quot;</span>: fA,</span><br><span class="line">            <span class="string">&quot;/src/assets/img/notice-on.png&quot;</span>: <span class="variable constant_">KA</span>,</span><br><span class="line">            <span class="string">&quot;/src/assets/img/notice.22be071d.jpg&quot;</span>: qA,</span><br><span class="line">            <span class="string">&quot;/src/assets/img/notice.jpg&quot;</span>: $A,</span><br><span class="line">            <span class="string">&quot;/src/assets/img/notice.png&quot;</span>: <span class="title class_">Ai</span>,</span><br><span class="line">            <span class="string">&quot;/src/assets/img/orders-on.png&quot;</span>: ii,</span><br><span class="line">            <span class="string">&quot;/src/assets/img/orders.png&quot;</span>: ei,</span><br><span class="line">            <span class="string">&quot;/src/assets/img/play.png&quot;</span>: <span class="title class_">Ii</span>,</span><br><span class="line">            <span class="string">&quot;/src/assets/img/qb.png&quot;</span>: ci,</span><br><span class="line">            <span class="string">&quot;/src/assets/img/sandpay.png&quot;</span>: mi,</span><br><span class="line">            <span class="string">&quot;/src/assets/img/set-on.png&quot;</span>: <span class="title class_">Mi</span>,</span><br><span class="line">            <span class="string">&quot;/src/assets/img/set.png&quot;</span>: bi,</span><br><span class="line">            <span class="string">&quot;/src/assets/img/sy.png&quot;</span>: gi,</span><br><span class="line">            <span class="string">&quot;/src/assets/img/synthesis-on.png&quot;</span>: <span class="title class_">Ri</span>,</span><br><span class="line">            <span class="string">&quot;/src/assets/img/synthesis.png&quot;</span>: <span class="title class_">Gi</span>,</span><br><span class="line">            <span class="string">&quot;/src/assets/img/tx.png&quot;</span>: di,</span><br><span class="line">            <span class="string">&quot;/src/assets/img/uncheck.png&quot;</span>: oi,</span><br><span class="line">            <span class="string">&quot;/src/assets/img/user.png&quot;</span>: <span class="title class_">Yi</span>,</span><br><span class="line">            <span class="string">&quot;/src/assets/img/userCenter-on.png&quot;</span>: ji,</span><br><span class="line">            <span class="string">&quot;/src/assets/img/userCenter.png&quot;</span>: <span class="title class_">Ni</span>,</span><br><span class="line">            <span class="string">&quot;/src/assets/img/v.png&quot;</span>: hi,</span><br><span class="line">            <span class="string">&quot;/src/assets/img/wallet-on.png&quot;</span>: <span class="title class_">Di</span>,</span><br><span class="line">            <span class="string">&quot;/src/assets/img/wallet.png&quot;</span>: pi,</span><br><span class="line">            <span class="string">&quot;/src/assets/img/wb.png&quot;</span>: <span class="title class_">Wi</span>,</span><br><span class="line">            <span class="string">&quot;/src/assets/img/wechat_pay.png&quot;</span>: wi,</span><br><span class="line">            <span class="string">&quot;/src/assets/img/wx.png&quot;</span>: yi,</span><br><span class="line">            <span class="string">&quot;/src/assets/img/xs.png&quot;</span>: ui,</span><br><span class="line">            <span class="string">&quot;/src/assets/img/ysp.jpg&quot;</span>: ki,</span><br><span class="line">            <span class="string">&quot;/src/assets/img/zeng.png&quot;</span>: <span class="title class_">Ei</span>,</span><br><span class="line">            <span class="string">&quot;/src/assets/img/zl.png&quot;</span>: <span class="title class_">Oi</span>,</span><br><span class="line">            <span class="string">&quot;/src/assets/img/zm.png&quot;</span>: <span class="title class_">Ti</span>,</span><br><span class="line">            <span class="string">&quot;/src/assets/img/zs.png&quot;</span>: <span class="title class_">Li</span>,</span><br><span class="line">            <span class="string">&quot;/src/assets/img/zs1.png&quot;</span>: <span class="title class_">Ui</span>,</span><br><span class="line">            <span class="string">&quot;/src/assets/img/zz.jpg&quot;</span>: <span class="title class_">Vi</span>,</span><br><span class="line">            <span class="string">&quot;/src/assets/img/zz.png&quot;</span>: <span class="title class_">Fi</span></span><br><span class="line">        &#125;,</span><br><span class="line">        e[i] &amp;&amp; e[i].<span class="property">default</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    ,</span><br><span class="line">    <span class="attr">formatImgUrl</span>: <span class="function"><span class="params">A</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="title function_">b</span>();</span><br><span class="line">        <span class="keyword">if</span> (A)</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span> == A.<span class="title function_">indexOf</span>(<span class="string">&quot;base64&quot;</span>) &amp;&amp; <span class="number">0</span> != A.<span class="title function_">indexOf</span>(<span class="string">&quot;http&quot;</span>) &amp;&amp; (A = (A = <span class="string">`https://file.huancang.art/<span class="subst">$&#123;A&#125;</span>`</span>).<span class="title function_">replace</span>(<span class="string">&quot;//uploads&quot;</span>, <span class="string">&quot;/uploads&quot;</span>)),</span><br><span class="line">                A</span><br><span class="line">    &#125;</span><br><span class="line">    ,</span><br><span class="line">    <span class="attr">date</span>: <span class="function">(<span class="params">A, i</span>) =&gt;</span> &#123;</span><br><span class="line">        i = <span class="string">&quot;&quot;</span> + i.<span class="property">length</span> &lt;= <span class="number">10</span> ? <span class="number">1e3</span> * +i : +i;</span><br><span class="line">        <span class="keyword">let</span> e = <span class="keyword">new</span> <span class="title class_">Date</span>(i)</span><br><span class="line">            , t = e.<span class="title function_">getFullYear</span>()</span><br><span class="line">            , I = e.<span class="title function_">getMonth</span>() + <span class="number">1</span></span><br><span class="line">            , l = e.<span class="title function_">getDate</span>()</span><br><span class="line">            , c = e.<span class="title function_">getHours</span>()</span><br><span class="line">            , m = e.<span class="title function_">getMinutes</span>()</span><br><span class="line">            , M = e.<span class="title function_">getSeconds</span>();</span><br><span class="line">        <span class="keyword">return</span> I = I &lt; <span class="number">10</span> ? <span class="string">&quot;0&quot;</span> + I : I,</span><br><span class="line">            l = l &lt; <span class="number">10</span> ? <span class="string">&quot;0&quot;</span> + l : l,</span><br><span class="line">            c = c &lt; <span class="number">10</span> ? <span class="string">&quot;0&quot;</span> + c : c,</span><br><span class="line">            m = m &lt; <span class="number">10</span> ? <span class="string">&quot;0&quot;</span> + m : m,</span><br><span class="line">            M = M &lt; <span class="number">10</span> ? <span class="string">&quot;0&quot;</span> + M : M,</span><br><span class="line">            A.<span class="title function_">replace</span>(<span class="regexp">/[YmdHis]/g</span>, (<span class="function"><span class="params">A</span> =&gt;</span> (&#123;</span><br><span class="line">                <span class="attr">Y</span>: t,</span><br><span class="line">                <span class="attr">m</span>: I,</span><br><span class="line">                <span class="attr">d</span>: l,</span><br><span class="line">                <span class="attr">H</span>: c,</span><br><span class="line">                <span class="attr">i</span>: m,</span><br><span class="line">                <span class="attr">s</span>: M</span><br><span class="line">            &#125;[A])))</span><br><span class="line">    &#125;</span><br><span class="line">    ,</span><br><span class="line">    <span class="attr">checkStr</span>: <span class="function">(<span class="params">A, i</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">switch</span> (i) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;mobile&quot;</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="regexp">/^1[3|4|5|6|7|8|9][0-9]&#123;9&#125;$/</span>.<span class="title function_">test</span>(A);</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;tel&quot;</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="regexp">/^(0\d&#123;2,3&#125;-\d&#123;7,8&#125;)(-\d&#123;1,4&#125;)?$/</span>.<span class="title function_">test</span>(A);</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;card&quot;</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="regexp">/(^\d&#123;15&#125;$)|(^\d&#123;18&#125;$)|(^\d&#123;17&#125;(\d|X|x)$)/</span>.<span class="title function_">test</span>(A);</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;mobileCode&quot;</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="regexp">/^[0-9]&#123;4&#125;$/</span>.<span class="title function_">test</span>(A);</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;bankAccount&quot;</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="regexp">/^[0-9]&#123;16&#125;$/</span>.<span class="title function_">test</span>(A);</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;pwd&quot;</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="regexp">/^([a-zA-Z0-9_])&#123;6,18&#125;$/</span>.<span class="title function_">test</span>(A);</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;payPwd&quot;</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="regexp">/^[0-9]&#123;6&#125;$/</span>.<span class="title function_">test</span>(A);</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;postal&quot;</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="regexp">/[1-9]\d&#123;5&#125;(?!\d)/</span>.<span class="title function_">test</span>(A);</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;QQ&quot;</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="regexp">/^[1-9][0-9]&#123;4,9&#125;$/</span>.<span class="title function_">test</span>(A);</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;email&quot;</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="regexp">/^[\w-]+(\.[\w-]+)*@[\w-]+(\.[\w-]+)+$/</span>.<span class="title function_">test</span>(A);</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;money&quot;</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="regexp">/^\d*(?:\.\d&#123;0,2&#125;)?$/</span>.<span class="title function_">test</span>(A);</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;URL&quot;</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="regexp">/(http|ftp|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&amp;:/~\+#]*[\w\-\@?^=%&amp;/~\+#])?/</span>.<span class="title function_">test</span>(A);</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;IP&quot;</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="regexp">/((?:(?:25[0-5]|2[0-4]\\d|[01]?\\d?\\d)\\.)&#123;3&#125;(?:25[0-5]|2[0-4]\\d|[01]?\\d?\\d))/</span>.<span class="title function_">test</span>(A);</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;date&quot;</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="regexp">/^(\d&#123;4&#125;)\-(\d&#123;2&#125;)\-(\d&#123;2&#125;) (\d&#123;2&#125;)(?:\:\d&#123;2&#125;|:(\d&#123;2&#125;):(\d&#123;2&#125;))$/</span>.<span class="title function_">test</span>(A) || <span class="regexp">/^(\d&#123;4&#125;)\-(\d&#123;2&#125;)\-(\d&#123;2&#125;)$/</span>.<span class="title function_">test</span>(A);</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;number&quot;</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="regexp">/^[0-9]$/</span>.<span class="title function_">test</span>(A);</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;english&quot;</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="regexp">/^[a-zA-Z]+$/</span>.<span class="title function_">test</span>(A);</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;chinese&quot;</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="regexp">/^[\\u4E00-\\u9FA5]+$/</span>.<span class="title function_">test</span>(A);</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;lower&quot;</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="regexp">/^[a-z]+$/</span>.<span class="title function_">test</span>(A);</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;upper&quot;</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="regexp">/^[A-Z]+$/</span>.<span class="title function_">test</span>(A);</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;HTML&quot;</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="regexp">/&lt;(&quot;[^&quot;]*&quot;|&#x27;[^&#x27;]*&#x27;|[^&#x27;&quot;&gt;])*&gt;/</span>.<span class="title function_">test</span>(A);</span><br><span class="line">            <span class="attr">default</span>:</span><br><span class="line">                <span class="keyword">return</span> !<span class="number">0</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">waws</span>(<span class="params">page</span>) &#123;</span><br><span class="line">    <span class="comment">// x-token的生成</span></span><br><span class="line">    <span class="keyword">let</span> i = (<span class="keyword">new</span> <span class="title class_">Date</span>).<span class="title function_">getTime</span>(),</span><br><span class="line">        data = &#123;</span><br><span class="line">            <span class="string">&quot;page&quot;</span>: page,</span><br><span class="line">            <span class="string">&quot;per_page&quot;</span>: <span class="number">12</span>,</span><br><span class="line">            <span class="string">&quot;flag&quot;</span>: <span class="string">&quot;top&quot;</span>,</span><br><span class="line">            <span class="string">&quot;timestamp&quot;</span>: i</span><br><span class="line">        &#125;</span><br><span class="line">    data = <span class="title class_">Pi</span>.<span class="title function_">getparam</span>(<span class="title class_">Pi</span>.<span class="title function_">objKeySort</span>(data))</span><br><span class="line">    <span class="title class_">Xi</span> = <span class="string">&#x27;6RNRDpjjV6wZ2ssPxqeIBeSoV1ITXDdC&#x27;</span></span><br><span class="line">    data = <span class="string">`<span class="subst">$&#123;data&#125;</span>&amp;key=<span class="subst">$&#123;Xi&#125;</span>`</span></span><br><span class="line"></span><br><span class="line">    path = <span class="string">&quot;api/product/getproductsearch&quot;</span></span><br><span class="line">    data = (path + data).<span class="title function_">toLowerCase</span>()</span><br><span class="line">    x_token = <span class="title function_">md5encrypto</span>(data)</span><br><span class="line"></span><br><span class="line">    signature = <span class="title function_">md5encrypto</span>(<span class="title function_">md5encrypto</span>(<span class="string">&quot;7Tv7LrinK2bsNAi9TF2uui3ZIcoxK1WT&quot;</span>))</span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="string">&#x27;x_token&#x27;</span>:x_token,<span class="string">&quot;signature&quot;</span>:signature,<span class="string">&quot;timestamp&quot;</span>:i&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">waws</span>(<span class="number">2</span>))</span><br></pre></td></tr></table></figure><ul><li>python代码</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> execjs</span><br><span class="line"></span><br><span class="line">page = <span class="string">&quot;3&quot;</span></span><br><span class="line">t = execjs.<span class="built_in">compile</span>(<span class="built_in">open</span>(<span class="string">&#x27;./demo.js&#x27;</span>,<span class="string">&quot;r&quot;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>).read()).call(<span class="string">&#x27;waws&#x27;</span>,page)</span><br><span class="line"></span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">&#x27;accept&#x27;</span>: <span class="string">&#x27;application/json, text/plain, */*&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;accept-language&#x27;</span>: <span class="string">&#x27;zh-CN,zh;q=0.9&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;cache-control&#x27;</span>: <span class="string">&#x27;no-cache&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;content-type&#x27;</span>: <span class="string">&#x27;application/json;charset=UTF-8&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;origin&#x27;</span>: <span class="string">&#x27;https://huancang.art&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;pragma&#x27;</span>: <span class="string">&#x27;no-cache&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;priority&#x27;</span>: <span class="string">&#x27;u=1, i&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;referer&#x27;</span>: <span class="string">&#x27;https://huancang.art/&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;sec-ch-ua&#x27;</span>: <span class="string">&#x27;&quot;Not)A;Brand&quot;;v=&quot;99&quot;, &quot;Google Chrome&quot;;v=&quot;127&quot;, &quot;Chromium&quot;;v=&quot;127&quot;&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;sec-ch-ua-mobile&#x27;</span>: <span class="string">&#x27;?0&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;sec-ch-ua-platform&#x27;</span>: <span class="string">&#x27;&quot;Windows&quot;&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;sec-fetch-dest&#x27;</span>: <span class="string">&#x27;empty&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;sec-fetch-mode&#x27;</span>: <span class="string">&#x27;cors&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;sec-fetch-site&#x27;</span>: <span class="string">&#x27;same-site&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;signature&#x27;</span>: t[<span class="string">&#x27;signature&#x27;</span>],</span><br><span class="line">    <span class="string">&#x27;token&#x27;</span>: <span class="string">&#x27;null&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;user-agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/127.0.0.0 Safari/537.36&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;x-token&#x27;</span>: t[<span class="string">&#x27;x_token&#x27;</span>],</span><br><span class="line">&#125;</span><br><span class="line">proxies = &#123;</span><br><span class="line">            <span class="string">&#x27;http&#x27;</span>: <span class="string">&#x27;127.0.0.1:10792&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;https&#x27;</span>: <span class="string">&#x27;127.0.0.1:10792&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">params = &#123;</span><br><span class="line">    <span class="string">&#x27;flag&#x27;</span>: <span class="string">&#x27;top&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;page&#x27;</span>: page,</span><br><span class="line">    <span class="string">&#x27;per_page&#x27;</span>: <span class="string">&#x27;12&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;timestamp&#x27;</span>: <span class="built_in">str</span>(t[<span class="string">&#x27;timestamp&#x27;</span>]),</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">response = requests.get(<span class="string">&#x27;https://api.huancang.art/api/product/getProductSearch&#x27;</span>, params=params, headers=headers,proxies=proxies).text</span><br><span class="line"><span class="built_in">print</span>(response)</span><br></pre></td></tr></table></figure><h3 id="结果"><a href="#结果" class="headerlink" title="结果"></a>结果</h3><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240903151320312-c43c6b.png" alt="image-20240903151320312"></p>]]></content>
      
      
      <categories>
          
          <category> Flask </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 日志 </tag>
            
            <tag> 计算机 </tag>
            
            <tag> Games </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>凡科网</title>
      <link href="/2024/09/14/%E5%87%A1%E7%A7%91%E7%BD%91/"/>
      <url>/2024/09/14/%E5%87%A1%E7%A7%91%E7%BD%91/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="凡科网"><a href="#凡科网" class="headerlink" title="凡科网"></a>凡科网</h1><p>抓取网址：<a href="https://i.fkw.com/?_ta=3">https://i.fkw.com/?_ta=3</a></p><p>抓取目标：登录过程</p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240909230914846-ee942e.png" alt="image-20240909230914846"></p><h2 id="网页分析"><a href="#网页分析" class="headerlink" title="网页分析"></a>网页分析</h2><p>打开网页后，按<code>F12</code>打开开发者工具，然后输入账号密码，点击登录。</p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240909231056961-7345d3.png" alt="image-20240909231056961"></p><p>使用关键词搜索</p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240909231223250-cb9438.png" alt="image-20240909231223250"></p><p>使用路径交叉搜索</p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240909231438643-38c2e4.png" alt="image-20240909231438643"></p><p>代码中搜索</p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240909231613237-136e8c.png" alt="image-20240909231613237"></p><p>md5加密，在加密网站验证没有改过的md5加密</p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240909232133674-060a8b.png" alt="image-20240909232133674"></p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><ul><li>js代码</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">Cryptojs</span> = <span class="built_in">require</span>(<span class="string">&quot;E:\\WAWS_ENV\\nodejs\\node_modules\\crypto-js&quot;</span>)</span><br><span class="line">data = <span class="string">&#x27;11212&#x27;</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">waws</span>(<span class="params">data</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Cryptojs</span>.<span class="title class_">MD5</span>(data).<span class="title function_">toString</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>python代码</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> execjs</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">cookies = &#123;</span><br><span class="line">    <span class="string">&#x27;_cliid&#x27;</span>: <span class="string">&#x27;cCZL3EmS95IkfeTJ&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;loginReferer&#x27;</span>: <span class="string">&#x27;https://github.com/&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;loginComeForm&#x27;</span>: <span class="string">&#x27;fkjz&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;first_ta&#x27;</span>: <span class="string">&#x27;3&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;_ta&#x27;</span>: <span class="string">&#x27;3&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;_tp&#x27;</span>: <span class="string">&#x27;-&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;_newUnion&#x27;</span>: <span class="string">&#x27;0&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;_kw&#x27;</span>: <span class="string">&#x27;0&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;_vid_url&#x27;</span>: <span class="string">&#x27;https%3A%2F%2Fi.fkw.com%2F%3F_ta%3D3&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;_s_pro&#x27;</span>: <span class="string">&#x27;i.fkw.com%2F&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;_c_pro&#x27;</span>: <span class="string">&#x27;i.fkw.com%2F&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;reg_sid&#x27;</span>: <span class="string">&#x27;0&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;innerFlag&#x27;</span>: <span class="string">&#x27;1&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;wxRegBiz&#x27;</span>: <span class="string">&#x27;none&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;_faiHeDistictId&#x27;</span>: <span class="string">&#x27;6475d129134b96a8&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;SL_G_WPT_TO&#x27;</span>: <span class="string">&#x27;eo&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;SL_GWPT_Show_Hide_tmp&#x27;</span>: <span class="string">&#x27;1&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;SL_wptGlobTipTmp&#x27;</span>: <span class="string">&#x27;1&#x27;</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">&#x27;Accept&#x27;</span>: <span class="string">&#x27;*/*&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Accept-Language&#x27;</span>: <span class="string">&#x27;zh-CN,zh;q=0.9&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Cache-Control&#x27;</span>: <span class="string">&#x27;no-cache&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Connection&#x27;</span>: <span class="string">&#x27;keep-alive&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/x-www-form-urlencoded; charset=UTF-8&#x27;</span>,</span><br><span class="line">    <span class="comment"># &#x27;Cookie&#x27;: &#x27;_cliid=cCZL3EmS95IkfeTJ; loginReferer=https://github.com/; loginComeForm=fkjz; first_ta=3; _ta=3; _tp=-; _newUnion=0; _kw=0; _vid_url=https%3A%2F%2Fi.fkw.com%2F%3F_ta%3D3; _s_pro=i.fkw.com%2F; _c_pro=i.fkw.com%2F; reg_sid=0; innerFlag=1; wxRegBiz=none; _faiHeDistictId=6475d129134b96a8; SL_G_WPT_TO=eo; SL_GWPT_Show_Hide_tmp=1; SL_wptGlobTipTmp=1&#x27;,</span></span><br><span class="line">    <span class="string">&#x27;Origin&#x27;</span>: <span class="string">&#x27;https://i.fkw.com&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Pragma&#x27;</span>: <span class="string">&#x27;no-cache&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Referer&#x27;</span>: <span class="string">&#x27;https://i.fkw.com/?_ta=3&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Sec-Fetch-Dest&#x27;</span>: <span class="string">&#x27;empty&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Sec-Fetch-Mode&#x27;</span>: <span class="string">&#x27;cors&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Sec-Fetch-Site&#x27;</span>: <span class="string">&#x27;same-origin&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/128.0.0.0 Safari/537.36&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;X-Requested-With&#x27;</span>: <span class="string">&#x27;XMLHttpRequest&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;sec-ch-ua&#x27;</span>: <span class="string">&#x27;&quot;Chromium&quot;;v=&quot;128&quot;, &quot;Not;A=Brand&quot;;v=&quot;24&quot;, &quot;Google Chrome&quot;;v=&quot;128&quot;&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;sec-ch-ua-mobile&#x27;</span>: <span class="string">&#x27;?0&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;sec-ch-ua-platform&#x27;</span>: <span class="string">&#x27;&quot;Windows&quot;&#x27;</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 账号密码</span></span><br><span class="line">cacct = <span class="string">&#x27;zzzz&#x27;</span></span><br><span class="line">pwd = <span class="string">&#x27;aaaa&#x27;</span></span><br><span class="line"></span><br><span class="line">t = execjs.<span class="built_in">compile</span>(<span class="built_in">open</span>(<span class="string">&#x27;./demo.js&#x27;</span>,<span class="string">&quot;r&quot;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>).read()).call(<span class="string">&#x27;waws&#x27;</span>,pwd)</span><br><span class="line">params = &#123;</span><br><span class="line">    <span class="string">&#x27;dogSrc&#x27;</span>: <span class="string">&#x27;3&#x27;</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">proxies = &#123;</span><br><span class="line">            <span class="string">&#x27;http&#x27;</span>: <span class="string">&#x27;127.0.0.1:10792&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;https&#x27;</span>: <span class="string">&#x27;127.0.0.1:10792&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">data = &#123;</span><br><span class="line">    <span class="string">&#x27;cacct&#x27;</span>: cacct,</span><br><span class="line">    <span class="string">&#x27;sacct&#x27;</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;pwd&#x27;</span>: t,</span><br><span class="line">    <span class="string">&#x27;autoLogin&#x27;</span>: <span class="string">&#x27;false&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;staffLogin&#x27;</span>: <span class="string">&#x27;false&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;bizType&#x27;</span>: <span class="string">&#x27;5&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;dogId&#x27;</span>: <span class="string">&#x27;0&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;fromsite&#x27;</span>: <span class="string">&#x27;false&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;cmd&#x27;</span>: <span class="string">&#x27;loginCorpNews&#x27;</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">response = requests.post(<span class="string">&#x27;https://i.fkw.com/ajax/login_h.jsp&#x27;</span>, params=params, cookies=cookies, headers=headers, data=data,proxies=proxies).text</span><br><span class="line"><span class="built_in">print</span>(response)</span><br></pre></td></tr></table></figure><h3 id="结果"><a href="#结果" class="headerlink" title="结果"></a>结果</h3><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240909230335456-a81426.png" alt="image-20240909230335456"></p>]]></content>
      
      
      <categories>
          
          <category> Flask </category>
          
      </categories>
      
      
        <tags>
            
            <tag> web </tag>
            
            <tag> 计算机 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>阿里房产</title>
      <link href="/2024/09/14/%E9%98%BF%E9%87%8C%E6%88%BF%E4%BA%A7/"/>
      <url>/2024/09/14/%E9%98%BF%E9%87%8C%E6%88%BF%E4%BA%A7/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="阿里房产"><a href="#阿里房产" class="headerlink" title="阿里房产"></a>阿里房产</h1><p>抓取网址：<a href="https://zc-paimai.taobao.com/wow/pm/default/pc/4b80fa?spm=a2129.27064540.puimod-zc-focus-2021_2860107850.category-1-1&pmid=4974966512_1725351051706&pmtk=20140647.0.0.0.27064540.puimod-zc-focus-2021_2860107850.category-1-1&path=27064540&page=6">https://zc-paimai.taobao.com/wow/pm/default/pc/4b80fa?spm=a2129.27064540.puimod-zc-focus-2021_2860107850.category-1-1&amp;pmid=4974966512_1725351051706&amp;pmtk=20140647.0.0.0.27064540.puimod-zc-focus-2021_2860107850.category-1-1&amp;path=27064540&amp;page=6</a></p><p>抓取目标：房屋相关信息</p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240903163039869-23ccd5.png" alt="image-20240903163039869"></p><h2 id="网页分析"><a href="#网页分析" class="headerlink" title="网页分析"></a>网页分析</h2><p>打开网页后，按<code>F12</code>打开开发者工具，然后搜索数据，点击翻页。</p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240903163236861-9ae9ed.png" alt="image-20240903163236861"></p><p>载荷有sign加密</p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240903163320877-57045a.png" alt="image-20240903163320877"></p><p>定位参数加密位置</p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240903163401462-a181d2.png" alt="image-20240903163401462"></p><p>大致根据特征可以得到是md5加密</p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240903163535810-12fc63.png" alt="image-20240903163535810"></p><p>抠代码</p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240903163654090-97bb46.png" alt="image-20240903163654090"></p><p>这个自执行函数需要进行改动</p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240903164149499-38a5fc.png" alt="image-20240903164149499"></p><p>寻找参数</p><ul><li>a</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">a = (<span class="keyword">new</span> <span class="title class_">Date</span>).<span class="title function_">getTime</span>()</span><br></pre></td></tr></table></figure><ul><li>s</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">s = n.<span class="property">appKey</span> || (<span class="string">&quot;waptest&quot;</span> === o.<span class="property">subDomain</span> ? <span class="string">&quot;4272&quot;</span> : <span class="string">&quot;12574478&quot;</span>)</span><br></pre></td></tr></table></figure><p>其实就是载荷中的appkey</p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240903164304238-c9d831.png" alt="image-20240903164304238"></p><ul><li>o.token</li></ul><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240903164512380-c99767.png" alt="image-20240903164512380"></p><p>其实这个值是不会变的，我们先写死，在全局进行搜索可得</p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240903165004952-03fd4d.png" alt="image-20240903165004952"></p><ul><li>data</li></ul><p>就是载荷中的表单数据</p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240903165159819-dda22c.png" alt="image-20240903165159819"></p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">p</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">t</span>(<span class="params">e, t</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> e &lt;&lt; t | e &gt;&gt;&gt; <span class="number">32</span> - t</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">n</span>(<span class="params">e, t</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> n, o, r, i, s;</span><br><span class="line">        <span class="keyword">return</span> r = <span class="number">2147483648</span> &amp; e,</span><br><span class="line">            i = <span class="number">2147483648</span> &amp; t,</span><br><span class="line">            s = (<span class="number">1073741823</span> &amp; e) + (<span class="number">1073741823</span> &amp; t),</span><br><span class="line">            (n = <span class="number">1073741824</span> &amp; e) &amp; (o = <span class="number">1073741824</span> &amp; t) ? <span class="number">2147483648</span> ^ s ^ r ^ i : n | o ? <span class="number">1073741824</span> &amp; s ? <span class="number">3221225472</span> ^ s ^ r ^ i : <span class="number">1073741824</span> ^ s ^ r ^ i : s ^ r ^ i</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">o</span>(<span class="params">e, o, r, i, s, a, p</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> e = <span class="title function_">n</span>(e, <span class="title function_">n</span>(<span class="title function_">n</span>(<span class="keyword">function</span> (<span class="params">e, t, n</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> e &amp; t | ~e &amp; n</span><br><span class="line">        &#125;(o, r, i), s), p)),</span><br><span class="line">            <span class="title function_">n</span>(<span class="title function_">t</span>(e, a), o)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">r</span>(<span class="params">e, o, r, i, s, a, p</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> e = <span class="title function_">n</span>(e, <span class="title function_">n</span>(<span class="title function_">n</span>(<span class="keyword">function</span> (<span class="params">e, t, n</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> e &amp; n | t &amp; ~n</span><br><span class="line">        &#125;(o, r, i), s), p)),</span><br><span class="line">            <span class="title function_">n</span>(<span class="title function_">t</span>(e, a), o)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">i</span>(<span class="params">e, o, r, i, s, a, p</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> e = <span class="title function_">n</span>(e, <span class="title function_">n</span>(<span class="title function_">n</span>(<span class="keyword">function</span> (<span class="params">e, t, n</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> e ^ t ^ n</span><br><span class="line">        &#125;(o, r, i), s), p)),</span><br><span class="line">            <span class="title function_">n</span>(<span class="title function_">t</span>(e, a), o)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">s</span>(<span class="params">e, o, r, i, s, a, p</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> e = <span class="title function_">n</span>(e, <span class="title function_">n</span>(<span class="title function_">n</span>(<span class="keyword">function</span> (<span class="params">e, t, n</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> t ^ (e | ~n)</span><br><span class="line">        &#125;(o, r, i), s), p)),</span><br><span class="line">            <span class="title function_">n</span>(<span class="title function_">t</span>(e, a), o)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">a</span>(<span class="params">e</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> t, n = <span class="string">&quot;&quot;</span>, o = <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="keyword">for</span> (t = <span class="number">0</span>; <span class="number">3</span> &gt;= t; t++)</span><br><span class="line">            n += (o = <span class="string">&quot;0&quot;</span> + (e &gt;&gt;&gt; <span class="number">8</span> * t &amp; <span class="number">255</span>).<span class="title function_">toString</span>(<span class="number">16</span>)).<span class="title function_">substr</span>(o.<span class="property">length</span> - <span class="number">2</span>, <span class="number">2</span>);</span><br><span class="line">        <span class="keyword">return</span> n</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> p, u, c, d, l, f, m, g, y, v;</span><br><span class="line">    <span class="keyword">for</span> (v = <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> t, n = e.<span class="property">length</span>, o = n + <span class="number">8</span>, r = <span class="number">16</span> * ((o - o % <span class="number">64</span>) / <span class="number">64</span> + <span class="number">1</span>), i = <span class="keyword">new</span> <span class="title class_">Array</span>(r - <span class="number">1</span>), s = <span class="number">0</span>, a = <span class="number">0</span>; n &gt; a;)</span><br><span class="line">            s = a % <span class="number">4</span> * <span class="number">8</span>,</span><br><span class="line">                i[t = (a - a % <span class="number">4</span>) / <span class="number">4</span>] = i[t] | e.<span class="title function_">charCodeAt</span>(a) &lt;&lt; s,</span><br><span class="line">                a++;</span><br><span class="line">        <span class="keyword">return</span> s = a % <span class="number">4</span> * <span class="number">8</span>,</span><br><span class="line">            i[t = (a - a % <span class="number">4</span>) / <span class="number">4</span>] = i[t] | <span class="number">128</span> &lt;&lt; s,</span><br><span class="line">            i[r - <span class="number">2</span>] = n &lt;&lt; <span class="number">3</span>,</span><br><span class="line">            i[r - <span class="number">1</span>] = n &gt;&gt;&gt; <span class="number">29</span>,</span><br><span class="line">            i</span><br><span class="line">    &#125;(e = <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span><br><span class="line">        e = e.<span class="title function_">replace</span>(<span class="regexp">/\r\n/g</span>, <span class="string">&quot;\n&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> t = <span class="string">&quot;&quot;</span>, n = <span class="number">0</span>; n &lt; e.<span class="property">length</span>; n++) &#123;</span><br><span class="line">            <span class="keyword">var</span> o = e.<span class="title function_">charCodeAt</span>(n);</span><br><span class="line">            <span class="number">128</span> &gt; o ? t += <span class="title class_">String</span>.<span class="title function_">fromCharCode</span>(o) : o &gt; <span class="number">127</span> &amp;&amp; <span class="number">2048</span> &gt; o ? (t += <span class="title class_">String</span>.<span class="title function_">fromCharCode</span>(o &gt;&gt; <span class="number">6</span> | <span class="number">192</span>),</span><br><span class="line">                t += <span class="title class_">String</span>.<span class="title function_">fromCharCode</span>(<span class="number">63</span> &amp; o | <span class="number">128</span>)) : (t += <span class="title class_">String</span>.<span class="title function_">fromCharCode</span>(o &gt;&gt; <span class="number">12</span> | <span class="number">224</span>),</span><br><span class="line">                t += <span class="title class_">String</span>.<span class="title function_">fromCharCode</span>(o &gt;&gt; <span class="number">6</span> &amp; <span class="number">63</span> | <span class="number">128</span>),</span><br><span class="line">                t += <span class="title class_">String</span>.<span class="title function_">fromCharCode</span>(<span class="number">63</span> &amp; o | <span class="number">128</span>))</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> t</span><br><span class="line">    &#125;(e)),</span><br><span class="line">             f = <span class="number">1732584193</span>,</span><br><span class="line">             m = <span class="number">4023233417</span>,</span><br><span class="line">             g = <span class="number">2562383102</span>,</span><br><span class="line">             y = <span class="number">271733878</span>,</span><br><span class="line">             p = <span class="number">0</span>; p &lt; v.<span class="property">length</span>; p += <span class="number">16</span>)</span><br><span class="line">        u = f,</span><br><span class="line">            c = m,</span><br><span class="line">            d = g,</span><br><span class="line">            l = y,</span><br><span class="line">            f = <span class="title function_">o</span>(f, m, g, y, v[p + <span class="number">0</span>], <span class="number">7</span>, <span class="number">3614090360</span>),</span><br><span class="line">            y = <span class="title function_">o</span>(y, f, m, g, v[p + <span class="number">1</span>], <span class="number">12</span>, <span class="number">3905402710</span>),</span><br><span class="line">            g = <span class="title function_">o</span>(g, y, f, m, v[p + <span class="number">2</span>], <span class="number">17</span>, <span class="number">606105819</span>),</span><br><span class="line">            m = <span class="title function_">o</span>(m, g, y, f, v[p + <span class="number">3</span>], <span class="number">22</span>, <span class="number">3250441966</span>),</span><br><span class="line">            f = <span class="title function_">o</span>(f, m, g, y, v[p + <span class="number">4</span>], <span class="number">7</span>, <span class="number">4118548399</span>),</span><br><span class="line">            y = <span class="title function_">o</span>(y, f, m, g, v[p + <span class="number">5</span>], <span class="number">12</span>, <span class="number">1200080426</span>),</span><br><span class="line">            g = <span class="title function_">o</span>(g, y, f, m, v[p + <span class="number">6</span>], <span class="number">17</span>, <span class="number">2821735955</span>),</span><br><span class="line">            m = <span class="title function_">o</span>(m, g, y, f, v[p + <span class="number">7</span>], <span class="number">22</span>, <span class="number">4249261313</span>),</span><br><span class="line">            f = <span class="title function_">o</span>(f, m, g, y, v[p + <span class="number">8</span>], <span class="number">7</span>, <span class="number">1770035416</span>),</span><br><span class="line">            y = <span class="title function_">o</span>(y, f, m, g, v[p + <span class="number">9</span>], <span class="number">12</span>, <span class="number">2336552879</span>),</span><br><span class="line">            g = <span class="title function_">o</span>(g, y, f, m, v[p + <span class="number">10</span>], <span class="number">17</span>, <span class="number">4294925233</span>),</span><br><span class="line">            m = <span class="title function_">o</span>(m, g, y, f, v[p + <span class="number">11</span>], <span class="number">22</span>, <span class="number">2304563134</span>),</span><br><span class="line">            f = <span class="title function_">o</span>(f, m, g, y, v[p + <span class="number">12</span>], <span class="number">7</span>, <span class="number">1804603682</span>),</span><br><span class="line">            y = <span class="title function_">o</span>(y, f, m, g, v[p + <span class="number">13</span>], <span class="number">12</span>, <span class="number">4254626195</span>),</span><br><span class="line">            g = <span class="title function_">o</span>(g, y, f, m, v[p + <span class="number">14</span>], <span class="number">17</span>, <span class="number">2792965006</span>),</span><br><span class="line">            f = <span class="title function_">r</span>(f, m = <span class="title function_">o</span>(m, g, y, f, v[p + <span class="number">15</span>], <span class="number">22</span>, <span class="number">1236535329</span>), g, y, v[p + <span class="number">1</span>], <span class="number">5</span>, <span class="number">4129170786</span>),</span><br><span class="line">            y = <span class="title function_">r</span>(y, f, m, g, v[p + <span class="number">6</span>], <span class="number">9</span>, <span class="number">3225465664</span>),</span><br><span class="line">            g = <span class="title function_">r</span>(g, y, f, m, v[p + <span class="number">11</span>], <span class="number">14</span>, <span class="number">643717713</span>),</span><br><span class="line">            m = <span class="title function_">r</span>(m, g, y, f, v[p + <span class="number">0</span>], <span class="number">20</span>, <span class="number">3921069994</span>),</span><br><span class="line">            f = <span class="title function_">r</span>(f, m, g, y, v[p + <span class="number">5</span>], <span class="number">5</span>, <span class="number">3593408605</span>),</span><br><span class="line">            y = <span class="title function_">r</span>(y, f, m, g, v[p + <span class="number">10</span>], <span class="number">9</span>, <span class="number">38016083</span>),</span><br><span class="line">            g = <span class="title function_">r</span>(g, y, f, m, v[p + <span class="number">15</span>], <span class="number">14</span>, <span class="number">3634488961</span>),</span><br><span class="line">            m = <span class="title function_">r</span>(m, g, y, f, v[p + <span class="number">4</span>], <span class="number">20</span>, <span class="number">3889429448</span>),</span><br><span class="line">            f = <span class="title function_">r</span>(f, m, g, y, v[p + <span class="number">9</span>], <span class="number">5</span>, <span class="number">568446438</span>),</span><br><span class="line">            y = <span class="title function_">r</span>(y, f, m, g, v[p + <span class="number">14</span>], <span class="number">9</span>, <span class="number">3275163606</span>),</span><br><span class="line">            g = <span class="title function_">r</span>(g, y, f, m, v[p + <span class="number">3</span>], <span class="number">14</span>, <span class="number">4107603335</span>),</span><br><span class="line">            m = <span class="title function_">r</span>(m, g, y, f, v[p + <span class="number">8</span>], <span class="number">20</span>, <span class="number">1163531501</span>),</span><br><span class="line">            f = <span class="title function_">r</span>(f, m, g, y, v[p + <span class="number">13</span>], <span class="number">5</span>, <span class="number">2850285829</span>),</span><br><span class="line">            y = <span class="title function_">r</span>(y, f, m, g, v[p + <span class="number">2</span>], <span class="number">9</span>, <span class="number">4243563512</span>),</span><br><span class="line">            g = <span class="title function_">r</span>(g, y, f, m, v[p + <span class="number">7</span>], <span class="number">14</span>, <span class="number">1735328473</span>),</span><br><span class="line">            f = <span class="title function_">i</span>(f, m = <span class="title function_">r</span>(m, g, y, f, v[p + <span class="number">12</span>], <span class="number">20</span>, <span class="number">2368359562</span>), g, y, v[p + <span class="number">5</span>], <span class="number">4</span>, <span class="number">4294588738</span>),</span><br><span class="line">            y = <span class="title function_">i</span>(y, f, m, g, v[p + <span class="number">8</span>], <span class="number">11</span>, <span class="number">2272392833</span>),</span><br><span class="line">            g = <span class="title function_">i</span>(g, y, f, m, v[p + <span class="number">11</span>], <span class="number">16</span>, <span class="number">1839030562</span>),</span><br><span class="line">            m = <span class="title function_">i</span>(m, g, y, f, v[p + <span class="number">14</span>], <span class="number">23</span>, <span class="number">4259657740</span>),</span><br><span class="line">            f = <span class="title function_">i</span>(f, m, g, y, v[p + <span class="number">1</span>], <span class="number">4</span>, <span class="number">2763975236</span>),</span><br><span class="line">            y = <span class="title function_">i</span>(y, f, m, g, v[p + <span class="number">4</span>], <span class="number">11</span>, <span class="number">1272893353</span>),</span><br><span class="line">            g = <span class="title function_">i</span>(g, y, f, m, v[p + <span class="number">7</span>], <span class="number">16</span>, <span class="number">4139469664</span>),</span><br><span class="line">            m = <span class="title function_">i</span>(m, g, y, f, v[p + <span class="number">10</span>], <span class="number">23</span>, <span class="number">3200236656</span>),</span><br><span class="line">            f = <span class="title function_">i</span>(f, m, g, y, v[p + <span class="number">13</span>], <span class="number">4</span>, <span class="number">681279174</span>),</span><br><span class="line">            y = <span class="title function_">i</span>(y, f, m, g, v[p + <span class="number">0</span>], <span class="number">11</span>, <span class="number">3936430074</span>),</span><br><span class="line">            g = <span class="title function_">i</span>(g, y, f, m, v[p + <span class="number">3</span>], <span class="number">16</span>, <span class="number">3572445317</span>),</span><br><span class="line">            m = <span class="title function_">i</span>(m, g, y, f, v[p + <span class="number">6</span>], <span class="number">23</span>, <span class="number">76029189</span>),</span><br><span class="line">            f = <span class="title function_">i</span>(f, m, g, y, v[p + <span class="number">9</span>], <span class="number">4</span>, <span class="number">3654602809</span>),</span><br><span class="line">            y = <span class="title function_">i</span>(y, f, m, g, v[p + <span class="number">12</span>], <span class="number">11</span>, <span class="number">3873151461</span>),</span><br><span class="line">            g = <span class="title function_">i</span>(g, y, f, m, v[p + <span class="number">15</span>], <span class="number">16</span>, <span class="number">530742520</span>),</span><br><span class="line">            f = <span class="title function_">s</span>(f, m = <span class="title function_">i</span>(m, g, y, f, v[p + <span class="number">2</span>], <span class="number">23</span>, <span class="number">3299628645</span>), g, y, v[p + <span class="number">0</span>], <span class="number">6</span>, <span class="number">4096336452</span>),</span><br><span class="line">            y = <span class="title function_">s</span>(y, f, m, g, v[p + <span class="number">7</span>], <span class="number">10</span>, <span class="number">1126891415</span>),</span><br><span class="line">            g = <span class="title function_">s</span>(g, y, f, m, v[p + <span class="number">14</span>], <span class="number">15</span>, <span class="number">2878612391</span>),</span><br><span class="line">            m = <span class="title function_">s</span>(m, g, y, f, v[p + <span class="number">5</span>], <span class="number">21</span>, <span class="number">4237533241</span>),</span><br><span class="line">            f = <span class="title function_">s</span>(f, m, g, y, v[p + <span class="number">12</span>], <span class="number">6</span>, <span class="number">1700485571</span>),</span><br><span class="line">            y = <span class="title function_">s</span>(y, f, m, g, v[p + <span class="number">3</span>], <span class="number">10</span>, <span class="number">2399980690</span>),</span><br><span class="line">            g = <span class="title function_">s</span>(g, y, f, m, v[p + <span class="number">10</span>], <span class="number">15</span>, <span class="number">4293915773</span>),</span><br><span class="line">            m = <span class="title function_">s</span>(m, g, y, f, v[p + <span class="number">1</span>], <span class="number">21</span>, <span class="number">2240044497</span>),</span><br><span class="line">            f = <span class="title function_">s</span>(f, m, g, y, v[p + <span class="number">8</span>], <span class="number">6</span>, <span class="number">1873313359</span>),</span><br><span class="line">            y = <span class="title function_">s</span>(y, f, m, g, v[p + <span class="number">15</span>], <span class="number">10</span>, <span class="number">4264355552</span>),</span><br><span class="line">            g = <span class="title function_">s</span>(g, y, f, m, v[p + <span class="number">6</span>], <span class="number">15</span>, <span class="number">2734768916</span>),</span><br><span class="line">            m = <span class="title function_">s</span>(m, g, y, f, v[p + <span class="number">13</span>], <span class="number">21</span>, <span class="number">1309151649</span>),</span><br><span class="line">            f = <span class="title function_">s</span>(f, m, g, y, v[p + <span class="number">4</span>], <span class="number">6</span>, <span class="number">4149444226</span>),</span><br><span class="line">            y = <span class="title function_">s</span>(y, f, m, g, v[p + <span class="number">11</span>], <span class="number">10</span>, <span class="number">3174756917</span>),</span><br><span class="line">            g = <span class="title function_">s</span>(g, y, f, m, v[p + <span class="number">2</span>], <span class="number">15</span>, <span class="number">718787259</span>),</span><br><span class="line">            m = <span class="title function_">s</span>(m, g, y, f, v[p + <span class="number">9</span>], <span class="number">21</span>, <span class="number">3951481745</span>),</span><br><span class="line">            f = <span class="title function_">n</span>(f, u),</span><br><span class="line">            m = <span class="title function_">n</span>(m, c),</span><br><span class="line">            g = <span class="title function_">n</span>(g, d),</span><br><span class="line">            y = <span class="title function_">n</span>(y, l);</span><br><span class="line">    <span class="keyword">return</span> (<span class="title function_">a</span>(f) + <span class="title function_">a</span>(m) + <span class="title function_">a</span>(g) + <span class="title function_">a</span>(y)).<span class="title function_">toLowerCase</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">token = <span class="string">&#x27;6b15c062e7cdf09b4a732e8af15cb224&#x27;</span></span><br><span class="line">a = (<span class="keyword">new</span> <span class="title class_">Date</span>).<span class="title function_">getTime</span>()</span><br><span class="line">s = <span class="number">12574478</span></span><br><span class="line">data = <span class="string">&#x27;&#123;&quot;dfApp&quot;:&quot;auctionwalle&quot;,&quot;dfApiName&quot;:&quot;auctionwalle.datou.getPageModulesData&quot;,&quot;dfVariables&quot;:&quot;&#123;\\&quot;pageId\\&quot;:1410667,\\&quot;moduleIds\\&quot;:\\&quot;9018433170:items\\&quot;,\\&quot;context\\&quot;:&#123;\\&quot;_b_9018433170:items\\&quot;:\\&quot;&#123;\\\\\\&quot;spm\\\\\\&quot;:\\\\\\&quot;a2129.27064540.puimod-zc-focus-2021_2860107850.category-1-1\\\\\\&quot;,\\\\\\&quot;pmid\\\\\\&quot;:\\\\\\&quot;4974966512_1725351051706\\\\\\&quot;,\\\\\\&quot;pmtk\\\\\\&quot;:\\\\\\&quot;20140647.0.0.0.27064540.puimod-zc-focus-2021_2860107850.category-1-1\\\\\\&quot;,\\\\\\&quot;path\\\\\\&quot;:\\\\\\&quot;27064540\\\\\\&quot;,\\\\\\&quot;userInfo\\\\\\&quot;:&#123;\\\\\\&quot;userId\\\\\\&quot;:\\\\\\&quot;2003794341\\\\\\&quot;&#125;,\\\\\\&quot;page\\\\\\&quot;:\\\\\\&quot;6\\\\\\&quot;,\\\\\\&quot;appendMap\\\\\\&quot;:&#123;\\\\\\&quot;sid\\\\\\&quot;:\\\\\\&quot;5091490057_1725351075707\\\\\\&quot;&#125;&#125;\\&quot;,\\&quot;userInfo\\&quot;:\\&quot;&#123;&#125;\\&quot;,\\&quot;device\\&quot;:\\&quot;pc\\&quot;,\\&quot;sceneCode\\&quot;:\\&quot;20200713C5R32B6N\\&quot;&#125;&#125;&quot;,&quot;dfUniqueId&quot;:&quot;1410667.9018433170:items&quot;,&quot;dfVariablesRecover&quot;:&quot;&#123;&#125;&quot;&#125;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">p</span>(token + <span class="string">&quot;&amp;&quot;</span> + a + <span class="string">&quot;&amp;&quot;</span> + s + <span class="string">&quot;&amp;&quot;</span> + data))</span><br></pre></td></tr></table></figure><ul><li>python</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> execjs</span><br><span class="line"></span><br><span class="line">cookies = &#123;</span><br><span class="line">    <span class="string">&#x27;cna&#x27;</span>: <span class="string">&#x27;CX/0HulERjACAXkjZLQUrotW&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;hng&#x27;</span>: <span class="string">&#x27;CN%7Czh-CN%7CCNY%7C156&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;_uetvid&#x27;</span>: <span class="string">&#x27;111ec7202b1b11ef9a492342900bfc17&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;thw&#x27;</span>: <span class="string">&#x27;cn&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;tracknick&#x27;</span>: <span class="string">&#x27;tb35987068&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;havana_lgc2_0&#x27;</span>: <span class="string">&#x27;eyJoaWQiOjIwMDM3OTQzNDEsInNnIjoiNWY5YTczNDg5Y2M3ZDRiYWNlYjg4ZGNiNDE3MGMwYzEiLCJzaXRlIjowLCJ0b2tlbiI6IjFrc1pyVlhSRjJodWRJbGVpM3RKanp3In0&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;_hvn_lgc_&#x27;</span>: <span class="string">&#x27;0&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;wk_cookie2&#x27;</span>: <span class="string">&#x27;11a06b099c8334dd1274b9833a29abde&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;wk_unb&#x27;</span>: <span class="string">&#x27;UUjRIb%2BRjfXy3g%3D%3D&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;useNativeIM&#x27;</span>: <span class="string">&#x27;false&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;sn&#x27;</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;lgc&#x27;</span>: <span class="string">&#x27;tb35987068&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;t&#x27;</span>: <span class="string">&#x27;48abf2ad6e8cff7ef43818e5805801cd&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;cancelledSubSites&#x27;</span>: <span class="string">&#x27;empty&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;dnk&#x27;</span>: <span class="string">&#x27;tb35987068&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;cookie2&#x27;</span>: <span class="string">&#x27;19356d370f3d7d26f6ce7bc8790e4131&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;_tb_token_&#x27;</span>: <span class="string">&#x27;ee65ede36f755&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;_samesite_flag_&#x27;</span>: <span class="string">&#x27;true&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;3PcFlag&#x27;</span>: <span class="string">&#x27;1725323187067&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;xlly_s&#x27;</span>: <span class="string">&#x27;1&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;mtop_partitioned_detect&#x27;</span>: <span class="string">&#x27;1&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;_m_h5_tk&#x27;</span>: <span class="string">&#x27;6b15c062e7cdf09b4a732e8af15cb224_1725361462969&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;_m_h5_tk_enc&#x27;</span>: <span class="string">&#x27;65240e71484cece8cc1b21c8925df0aa&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;sgcookie&#x27;</span>: <span class="string">&#x27;E100a4dKFEsNCiQOrVllZc6uLMzmDw5wfOQW2WlgPF7ChvwBMycMIvKiwm7MJ2N9WOrTVT0TBnL%2B7JA%2FZu2ynccyqgKXVwRWVNqWnYaKdYjvHGH8YjcnQbviAliPrBaebZHT&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;havana_lgc_exp&#x27;</span>: <span class="string">&#x27;1756455023810&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;unb&#x27;</span>: <span class="string">&#x27;2003794341&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;uc1&#x27;</span>: <span class="string">&#x27;pas=0&amp;existShop=false&amp;cookie14=UoYcBh0HWRw0zQ%3D%3D&amp;cookie16=UtASsssmPlP%2Ff1IHDsDaPRu%2BPw%3D%3D&amp;cookie21=UIHiLt3xThH8t7YQoFNq&amp;cookie15=UIHiLt3xD8xYTw%3D%3D&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;uc3&#x27;</span>: <span class="string">&#x27;nk2=F5RGM4nN%2F3eKwg%3D%3D&amp;vt3=F8dD3isMuxMdRKuxn5c%3D&amp;id2=UUjRIb%2BRjfXy3g%3D%3D&amp;lg2=VFC%2FuZ9ayeYq2g%3D%3D&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;csg&#x27;</span>: <span class="string">&#x27;7dab3463&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;cookie17&#x27;</span>: <span class="string">&#x27;UUjRIb%2BRjfXy3g%3D%3D&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;skt&#x27;</span>: <span class="string">&#x27;20c19402f0a2ebd4&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;existShop&#x27;</span>: <span class="string">&#x27;MTcyNTM1MTAyMw%3D%3D&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;uc4&#x27;</span>: <span class="string">&#x27;id4=0%40U2ozlu98sp9Pv%2Bwx4miEQDtz2YBg&amp;nk4=0%40FY4NBmsLbwJ%2BfuFaCEctxWKmMAOk&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;_cc_&#x27;</span>: <span class="string">&#x27;VFC%2FuZ9ajQ%3D%3D&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;_l_g_&#x27;</span>: <span class="string">&#x27;Ug%3D%3D&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;sg&#x27;</span>: <span class="string">&#x27;81b&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;_nk_&#x27;</span>: <span class="string">&#x27;tb35987068&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;cookie1&#x27;</span>: <span class="string">&#x27;U7f2lqdlPB%2Fp3JJb11snyODQOqKQNfbrQZbxM1OPCqE%3D&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;sdkSilent&#x27;</span>: <span class="string">&#x27;1725437423814&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;havana_sdkSilent&#x27;</span>: <span class="string">&#x27;1725437423814&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;tfstk&#x27;</span>: <span class="string">&#x27;fIMIxlxMRwbBA3x9VaKa1oeKLZ27N494vgZ-m0BF2JepwzaZ2HmEYBvS1m0783A3LfaSWVad8JWE503aSYleqBXJVm4gzvyLy7sTqq-nP0x32z3-Pzle_Konx82Juz923D0JdEgZRuELX3E7D9h4JClox82J7GWJgKinlsoMKbeJfRE74we826F9fuZby8ULwNCTDPe8y4FRXPEumkCLy6Q9fu4T28FL9GH6xiZWOymBXmJqw1T1Aua1ets0YWCIq_Wcnpr39rF9kt6XZkNQkDU6u0pB45nuNYjlF7mKi4qxJwL4t0hs5kwWQ6exfb3bjvpVRlcEXmztcgWrcJMsCbF6vpn_dyNbf5sA1JG--YNnOgxmXJ3iirVpsFqsLxP7o5_9Jco_JSGS8FX88jit5SkN7tyoSb38VVQC4IB4lKKONGNcFla2fh1lZuVkEN_7x9h09lqQ_ht1JbVLjla2fh1lZWEgAo-6fwhl.&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;isg&#x27;</span>: <span class="string">&#x27;BMHBMwXOQ8YGSa9JAs45sdZY0A3b7jXgdE5nPyMTQE3XCubcaDzLsBxM7H5MAs0Y&#x27;</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">&#x27;accept&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;accept-language&#x27;</span>: <span class="string">&#x27;zh-CN,zh;q=0.9&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;cache-control&#x27;</span>: <span class="string">&#x27;no-cache&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;content-type&#x27;</span>: <span class="string">&#x27;application/x-www-form-urlencoded&#x27;</span>,</span><br><span class="line">    <span class="comment"># &#x27;cookie&#x27;: &#x27;cna=CX/0HulERjACAXkjZLQUrotW; hng=CN%7Czh-CN%7CCNY%7C156; _uetvid=111ec7202b1b11ef9a492342900bfc17; thw=cn; tracknick=tb35987068; havana_lgc2_0=eyJoaWQiOjIwMDM3OTQzNDEsInNnIjoiNWY5YTczNDg5Y2M3ZDRiYWNlYjg4ZGNiNDE3MGMwYzEiLCJzaXRlIjowLCJ0b2tlbiI6IjFrc1pyVlhSRjJodWRJbGVpM3RKanp3In0; _hvn_lgc_=0; wk_cookie2=11a06b099c8334dd1274b9833a29abde; wk_unb=UUjRIb%2BRjfXy3g%3D%3D; useNativeIM=false; sn=; lgc=tb35987068; t=48abf2ad6e8cff7ef43818e5805801cd; cancelledSubSites=empty; dnk=tb35987068; cookie2=19356d370f3d7d26f6ce7bc8790e4131; _tb_token_=ee65ede36f755; _samesite_flag_=true; 3PcFlag=1725323187067; xlly_s=1; mtop_partitioned_detect=1; _m_h5_tk=6b15c062e7cdf09b4a732e8af15cb224_1725361462969; _m_h5_tk_enc=65240e71484cece8cc1b21c8925df0aa; sgcookie=E100a4dKFEsNCiQOrVllZc6uLMzmDw5wfOQW2WlgPF7ChvwBMycMIvKiwm7MJ2N9WOrTVT0TBnL%2B7JA%2FZu2ynccyqgKXVwRWVNqWnYaKdYjvHGH8YjcnQbviAliPrBaebZHT; havana_lgc_exp=1756455023810; unb=2003794341; uc1=pas=0&amp;existShop=false&amp;cookie14=UoYcBh0HWRw0zQ%3D%3D&amp;cookie16=UtASsssmPlP%2Ff1IHDsDaPRu%2BPw%3D%3D&amp;cookie21=UIHiLt3xThH8t7YQoFNq&amp;cookie15=UIHiLt3xD8xYTw%3D%3D; uc3=nk2=F5RGM4nN%2F3eKwg%3D%3D&amp;vt3=F8dD3isMuxMdRKuxn5c%3D&amp;id2=UUjRIb%2BRjfXy3g%3D%3D&amp;lg2=VFC%2FuZ9ayeYq2g%3D%3D; csg=7dab3463; cookie17=UUjRIb%2BRjfXy3g%3D%3D; skt=20c19402f0a2ebd4; existShop=MTcyNTM1MTAyMw%3D%3D; uc4=id4=0%40U2ozlu98sp9Pv%2Bwx4miEQDtz2YBg&amp;nk4=0%40FY4NBmsLbwJ%2BfuFaCEctxWKmMAOk; _cc_=VFC%2FuZ9ajQ%3D%3D; _l_g_=Ug%3D%3D; sg=81b; _nk_=tb35987068; cookie1=U7f2lqdlPB%2Fp3JJb11snyODQOqKQNfbrQZbxM1OPCqE%3D; sdkSilent=1725437423814; havana_sdkSilent=1725437423814; tfstk=fIMIxlxMRwbBA3x9VaKa1oeKLZ27N494vgZ-m0BF2JepwzaZ2HmEYBvS1m0783A3LfaSWVad8JWE503aSYleqBXJVm4gzvyLy7sTqq-nP0x32z3-Pzle_Konx82Juz923D0JdEgZRuELX3E7D9h4JClox82J7GWJgKinlsoMKbeJfRE74we826F9fuZby8ULwNCTDPe8y4FRXPEumkCLy6Q9fu4T28FL9GH6xiZWOymBXmJqw1T1Aua1ets0YWCIq_Wcnpr39rF9kt6XZkNQkDU6u0pB45nuNYjlF7mKi4qxJwL4t0hs5kwWQ6exfb3bjvpVRlcEXmztcgWrcJMsCbF6vpn_dyNbf5sA1JG--YNnOgxmXJ3iirVpsFqsLxP7o5_9Jco_JSGS8FX88jit5SkN7tyoSb38VVQC4IB4lKKONGNcFla2fh1lZuVkEN_7x9h09lqQ_ht1JbVLjla2fh1lZWEgAo-6fwhl.; isg=BMHBMwXOQ8YGSa9JAs45sdZY0A3b7jXgdE5nPyMTQE3XCubcaDzLsBxM7H5MAs0Y&#x27;,</span></span><br><span class="line">    <span class="string">&#x27;origin&#x27;</span>: <span class="string">&#x27;https://zc-paimai.taobao.com&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;pragma&#x27;</span>: <span class="string">&#x27;no-cache&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;priority&#x27;</span>: <span class="string">&#x27;u=1, i&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;referer&#x27;</span>: <span class="string">&#x27;https://zc-paimai.taobao.com/&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;sec-ch-ua&#x27;</span>: <span class="string">&#x27;&quot;Not)A;Brand&quot;;v=&quot;99&quot;, &quot;Google Chrome&quot;;v=&quot;127&quot;, &quot;Chromium&quot;;v=&quot;127&quot;&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;sec-ch-ua-mobile&#x27;</span>: <span class="string">&#x27;?0&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;sec-ch-ua-platform&#x27;</span>: <span class="string">&#x27;&quot;Windows&quot;&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;sec-fetch-dest&#x27;</span>: <span class="string">&#x27;empty&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;sec-fetch-mode&#x27;</span>: <span class="string">&#x27;cors&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;sec-fetch-site&#x27;</span>: <span class="string">&#x27;same-site&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;user-agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/127.0.0.0 Safari/537.36&#x27;</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">page = <span class="built_in">str</span>(<span class="number">5</span>)</span><br><span class="line">data = &#123;</span><br><span class="line">    <span class="string">&#x27;data&#x27;</span>: <span class="string">&#x27;&#123;&quot;dfApp&quot;:&quot;auctionwalle&quot;,&quot;dfApiName&quot;:&quot;auctionwalle.datou.getPageModulesData&quot;,&quot;dfVariables&quot;:&quot;&#123;\\&quot;pageId\\&quot;:1410667,\\&quot;moduleIds\\&quot;:\\&quot;9018433170:items\\&quot;,\\&quot;context\\&quot;:&#123;\\&quot;_b_9018433170:items\\&quot;:\\&quot;&#123;\\\\\\&quot;spm\\\\\\&quot;:\\\\\\&quot;a2129.27064540.puimod-zc-focus-2021_2860107850.category-1-1\\\\\\&quot;,\\\\\\&quot;pmid\\\\\\&quot;:\\\\\\&quot;4974966512_1725351051706\\\\\\&quot;,\\\\\\&quot;pmtk\\\\\\&quot;:\\\\\\&quot;20140647.0.0.0.27064540.puimod-zc-focus-2021_2860107850.category-1-1\\\\\\&quot;,\\\\\\&quot;path\\\\\\&quot;:\\\\\\&quot;27064540\\\\\\&quot;,\\\\\\&quot;userInfo\\\\\\&quot;:&#123;\\\\\\&quot;userId\\\\\\&quot;:\\\\\\&quot;2003794341\\\\\\&quot;&#125;,\\\\\\&quot;page\\\\\\&quot;:\\\\\\&quot;&#x27;</span>+ page +<span class="string">&#x27;\\\\\\&quot;,\\\\\\&quot;appendMap\\\\\\&quot;:&#123;\\\\\\&quot;sid\\\\\\&quot;:\\\\\\&quot;5091490057_1725351075707\\\\\\&quot;&#125;&#125;\\&quot;,\\&quot;userInfo\\&quot;:\\&quot;&#123;&#125;\\&quot;,\\&quot;device\\&quot;:\\&quot;pc\\&quot;,\\&quot;sceneCode\\&quot;:\\&quot;20200713C5R32B6N\\&quot;&#125;&#125;&quot;,&quot;dfUniqueId&quot;:&quot;1410667.9018433170:items&quot;,&quot;dfVariablesRecover&quot;:&quot;&#123;&#125;&quot;&#125;&#x27;</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">token = <span class="string">&#x27;6b15c062e7cdf09b4a732e8af15cb224&#x27;</span></span><br><span class="line">a = <span class="built_in">str</span>(<span class="built_in">round</span>(time.time() * <span class="number">1000</span>))</span><br><span class="line">s = <span class="built_in">str</span>(<span class="number">12574478</span>)</span><br><span class="line">_data = data[<span class="string">&#x27;data&#x27;</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">t = execjs.<span class="built_in">compile</span>(<span class="built_in">open</span>(<span class="string">&#x27;./demo.js&#x27;</span>,<span class="string">&quot;r&quot;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>).read()).call(<span class="string">&#x27;p&#x27;</span>,token + <span class="string">&quot;&amp;&quot;</span> + a + <span class="string">&quot;&amp;&quot;</span> + s + <span class="string">&quot;&amp;&quot;</span> + _data)</span><br><span class="line"></span><br><span class="line">params = &#123;</span><br><span class="line">    <span class="string">&#x27;jsv&#x27;</span>: <span class="string">&#x27;2.6.1&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;appKey&#x27;</span>: s,</span><br><span class="line">    <span class="string">&#x27;t&#x27;</span>: a,</span><br><span class="line">    <span class="string">&#x27;sign&#x27;</span>: t,</span><br><span class="line">    <span class="string">&#x27;bxPageId&#x27;</span>: <span class="string">&#x27;1410667&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;api&#x27;</span>: <span class="string">&#x27;mtop.taobao.datafront.invoke.auctionwalle&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;v&#x27;</span>: <span class="string">&#x27;1.0&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;type&#x27;</span>: <span class="string">&#x27;originaljson&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;dataType&#x27;</span>: <span class="string">&#x27;json&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;requiredParams&#x27;</span>: <span class="string">&#x27;dfApiName,dfUniqueId&#x27;</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">proxies = &#123;</span><br><span class="line">            <span class="string">&#x27;http&#x27;</span>: <span class="string">&#x27;127.0.0.1:10792&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;https&#x27;</span>: <span class="string">&#x27;127.0.0.1:10792&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">response = requests.post(</span><br><span class="line">    <span class="string">&#x27;https://h5api.m.taobao.com/h5/mtop.taobao.datafront.invoke.auctionwalle/1.0/&#x27;</span>,</span><br><span class="line">    params=params,</span><br><span class="line">    cookies=cookies,</span><br><span class="line">    headers=headers,</span><br><span class="line">    data=data,</span><br><span class="line">    proxies=proxies</span><br><span class="line">).json()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(response)</span><br></pre></td></tr></table></figure><h3 id="结果"><a href="#结果" class="headerlink" title="结果"></a>结果</h3><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240903170607332-56355f.png" alt="image-20240903170607332"></p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240903170552195-423ac4.png" alt="image-20240903170552195"></p>]]></content>
      
      
      <categories>
          
          <category> Flask </category>
          
      </categories>
      
      
        <tags>
            
            <tag> web </tag>
            
            <tag> 计算机 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>十天后回到现实</title>
      <link href="/2024/09/14/%E5%8D%81%E5%A4%A9%E5%90%8E%E5%9B%9E%E5%88%B0%E7%8E%B0%E5%AE%9E/"/>
      <url>/2024/09/14/%E5%8D%81%E5%A4%A9%E5%90%8E%E5%9B%9E%E5%88%B0%E7%8E%B0%E5%AE%9E/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="凡科网"><a href="#凡科网" class="headerlink" title="凡科网"></a>凡科网</h1><p>抓取网址：<a href="https://i.fkw.com/?_ta=3">https://i.fkw.com/?_ta=3</a></p><p>抓取目标：登录过程</p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240909230914846-ee942e.png" alt="image-20240909230914846"></p><h2 id="网页分析"><a href="#网页分析" class="headerlink" title="网页分析"></a>网页分析</h2><p>打开网页后，按<code>F12</code>打开开发者工具，然后输入账号密码，点击登录。</p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240909231056961-7345d3.png" alt="image-20240909231056961"></p><p>使用关键词搜索</p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240909231223250-cb9438.png" alt="image-20240909231223250"></p><p>使用路径交叉搜索</p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240909231438643-38c2e4.png" alt="image-20240909231438643"></p><p>代码中搜索</p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240909231613237-136e8c.png" alt="image-20240909231613237"></p><p>md5加密，在加密网站验证没有改过的md5加密</p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240909232133674-060a8b.png" alt="image-20240909232133674"></p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><ul><li>js代码</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">Cryptojs</span> = <span class="built_in">require</span>(<span class="string">&quot;E:\\WAWS_ENV\\nodejs\\node_modules\\crypto-js&quot;</span>)</span><br><span class="line">data = <span class="string">&#x27;11212&#x27;</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">waws</span>(<span class="params">data</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Cryptojs</span>.<span class="title class_">MD5</span>(data).<span class="title function_">toString</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>python代码</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> execjs</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">cookies = &#123;</span><br><span class="line">    <span class="string">&#x27;_cliid&#x27;</span>: <span class="string">&#x27;cCZL3EmS95IkfeTJ&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;loginReferer&#x27;</span>: <span class="string">&#x27;https://github.com/&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;loginComeForm&#x27;</span>: <span class="string">&#x27;fkjz&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;first_ta&#x27;</span>: <span class="string">&#x27;3&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;_ta&#x27;</span>: <span class="string">&#x27;3&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;_tp&#x27;</span>: <span class="string">&#x27;-&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;_newUnion&#x27;</span>: <span class="string">&#x27;0&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;_kw&#x27;</span>: <span class="string">&#x27;0&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;_vid_url&#x27;</span>: <span class="string">&#x27;https%3A%2F%2Fi.fkw.com%2F%3F_ta%3D3&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;_s_pro&#x27;</span>: <span class="string">&#x27;i.fkw.com%2F&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;_c_pro&#x27;</span>: <span class="string">&#x27;i.fkw.com%2F&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;reg_sid&#x27;</span>: <span class="string">&#x27;0&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;innerFlag&#x27;</span>: <span class="string">&#x27;1&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;wxRegBiz&#x27;</span>: <span class="string">&#x27;none&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;_faiHeDistictId&#x27;</span>: <span class="string">&#x27;6475d129134b96a8&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;SL_G_WPT_TO&#x27;</span>: <span class="string">&#x27;eo&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;SL_GWPT_Show_Hide_tmp&#x27;</span>: <span class="string">&#x27;1&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;SL_wptGlobTipTmp&#x27;</span>: <span class="string">&#x27;1&#x27;</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">&#x27;Accept&#x27;</span>: <span class="string">&#x27;*/*&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Accept-Language&#x27;</span>: <span class="string">&#x27;zh-CN,zh;q=0.9&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Cache-Control&#x27;</span>: <span class="string">&#x27;no-cache&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Connection&#x27;</span>: <span class="string">&#x27;keep-alive&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/x-www-form-urlencoded; charset=UTF-8&#x27;</span>,</span><br><span class="line">    <span class="comment"># &#x27;Cookie&#x27;: &#x27;_cliid=cCZL3EmS95IkfeTJ; loginReferer=https://github.com/; loginComeForm=fkjz; first_ta=3; _ta=3; _tp=-; _newUnion=0; _kw=0; _vid_url=https%3A%2F%2Fi.fkw.com%2F%3F_ta%3D3; _s_pro=i.fkw.com%2F; _c_pro=i.fkw.com%2F; reg_sid=0; innerFlag=1; wxRegBiz=none; _faiHeDistictId=6475d129134b96a8; SL_G_WPT_TO=eo; SL_GWPT_Show_Hide_tmp=1; SL_wptGlobTipTmp=1&#x27;,</span></span><br><span class="line">    <span class="string">&#x27;Origin&#x27;</span>: <span class="string">&#x27;https://i.fkw.com&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Pragma&#x27;</span>: <span class="string">&#x27;no-cache&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Referer&#x27;</span>: <span class="string">&#x27;https://i.fkw.com/?_ta=3&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Sec-Fetch-Dest&#x27;</span>: <span class="string">&#x27;empty&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Sec-Fetch-Mode&#x27;</span>: <span class="string">&#x27;cors&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Sec-Fetch-Site&#x27;</span>: <span class="string">&#x27;same-origin&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/128.0.0.0 Safari/537.36&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;X-Requested-With&#x27;</span>: <span class="string">&#x27;XMLHttpRequest&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;sec-ch-ua&#x27;</span>: <span class="string">&#x27;&quot;Chromium&quot;;v=&quot;128&quot;, &quot;Not;A=Brand&quot;;v=&quot;24&quot;, &quot;Google Chrome&quot;;v=&quot;128&quot;&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;sec-ch-ua-mobile&#x27;</span>: <span class="string">&#x27;?0&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;sec-ch-ua-platform&#x27;</span>: <span class="string">&#x27;&quot;Windows&quot;&#x27;</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 账号密码</span></span><br><span class="line">cacct = <span class="string">&#x27;zzzz&#x27;</span></span><br><span class="line">pwd = <span class="string">&#x27;aaaa&#x27;</span></span><br><span class="line"></span><br><span class="line">t = execjs.<span class="built_in">compile</span>(<span class="built_in">open</span>(<span class="string">&#x27;./demo.js&#x27;</span>,<span class="string">&quot;r&quot;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>).read()).call(<span class="string">&#x27;waws&#x27;</span>,pwd)</span><br><span class="line">params = &#123;</span><br><span class="line">    <span class="string">&#x27;dogSrc&#x27;</span>: <span class="string">&#x27;3&#x27;</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">proxies = &#123;</span><br><span class="line">            <span class="string">&#x27;http&#x27;</span>: <span class="string">&#x27;127.0.0.1:10792&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;https&#x27;</span>: <span class="string">&#x27;127.0.0.1:10792&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">data = &#123;</span><br><span class="line">    <span class="string">&#x27;cacct&#x27;</span>: cacct,</span><br><span class="line">    <span class="string">&#x27;sacct&#x27;</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;pwd&#x27;</span>: t,</span><br><span class="line">    <span class="string">&#x27;autoLogin&#x27;</span>: <span class="string">&#x27;false&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;staffLogin&#x27;</span>: <span class="string">&#x27;false&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;bizType&#x27;</span>: <span class="string">&#x27;5&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;dogId&#x27;</span>: <span class="string">&#x27;0&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;fromsite&#x27;</span>: <span class="string">&#x27;false&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;cmd&#x27;</span>: <span class="string">&#x27;loginCorpNews&#x27;</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">response = requests.post(<span class="string">&#x27;https://i.fkw.com/ajax/login_h.jsp&#x27;</span>, params=params, cookies=cookies, headers=headers, data=data,proxies=proxies).text</span><br><span class="line"><span class="built_in">print</span>(response)</span><br></pre></td></tr></table></figure><h3 id="结果"><a href="#结果" class="headerlink" title="结果"></a>结果</h3><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240909230335456-a81426.png" alt="image-20240909230335456"></p>]]></content>
      
      
      <categories>
          
          <category> Flask </category>
          
      </categories>
      
      
        <tags>
            
            <tag> web </tag>
            
            <tag> 计算机 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>文件上传</title>
      <link href="/2024/03/22/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/"/>
      <url>/2024/03/22/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="Flask教程-七-文件上传"><a href="#Flask教程-七-文件上传" class="headerlink" title="Flask教程(七)文件上传"></a><a href="https://xugaoxiang.com/2020/03/20/flask-7-file-upload/">Flask教程(七)文件上传</a></h1><h3 id="软硬件环境"><a href="#软硬件环境" class="headerlink" title="软硬件环境"></a>软硬件环境</h3><ul><li>Windows 10 64bit</li><li>Anaconda3 with <a href="https://xugaoxiang.com/tag/python/">python</a> 3.7</li><li>PyCharm 2019.3</li><li>Flask 1.1.1</li></ul><h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>文件上传是个经常碰到的问题。其中涉及很多的内容比如文件的上传、文件类型的过滤，文件大小的限制，文件重命名，文件目录管理等等。下面我们来看看最基本的上传功能的实现，至于提到的其它问题，大家可以自己摸索摸索。</p><h3 id="Flask处理文件上传"><a href="#Flask处理文件上传" class="headerlink" title="Flask处理文件上传"></a>Flask处理文件上传</h3><p>在<code>Flask</code>中进行文件上传，需要在通过<code>html</code>中的<code>form</code>表单，而且需要设置<code>enctype=multipart/form-data</code>，看下面的实例</p><p><code>index.html</code>文件内容</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>upload<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span> = <span class="string">&quot;/success&quot;</span> <span class="attr">method</span> = <span class="string">&quot;post&quot;</span> <span class="attr">enctype</span>=<span class="string">&quot;multipart/form-data&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">name</span>=<span class="string">&quot;file&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span> = <span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Upload&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>主要就是一个<code>form</code>表单，使用的<code>http</code>方法是<code>POST</code>并且设置<code>enctype=&quot;multipart/form-data&quot;</code>，<code>input</code>标签的类型是<code>file</code>，接下来还需要编写一个<code>html</code>，用来显示上传成功后的信息</p><p><code>success.html</code>文件内容</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Success<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>File uploaded successfully!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>File Name: <span class="tag">&lt;<span class="name">b</span>&gt;</span> &#123;&#123;name&#125;&#125; <span class="tag">&lt;/<span class="name">b</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>最后来看看<code>Flask</code>端的处理代码，<code>run.py</code>文件内容</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask, render_template, request</span><br><span class="line">app = Flask(__name__)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index</span>():</span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">&#x27;index.html&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/success&#x27;</span>, methods=[<span class="string">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">success</span>():</span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">&#x27;POST&#x27;</span>:</span><br><span class="line">        f = request.files[<span class="string">&#x27;file&#x27;</span>]</span><br><span class="line">        f.save(f.filename)</span><br><span class="line">        <span class="keyword">return</span> render_template(<span class="string">&#x27;success.html&#x27;</span>, name=f.filename)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app.run(host=<span class="string">&quot;127.0.0.1&quot;</span>,port=<span class="number">5000</span>,debug=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure><p>注意到<code>success</code>方法中，只处理<code>POST</code>请求，并从请求对象中的<code>files</code>获取到文件的内容，调用<code>save</code>保存文件，渲染网页时，将文件名传递过去，文件名会在<code>success.html</code>中显示</p><p>启动<code>Flask</code>服务，访问<a href="http://127.0.0.1:5000/">http://127.0.0.1:5000</a></p><p><img src="https://image.xugaoxiang.com/imgs/2020/12/92777c31881f0a5f.png" alt="flask"></p><p>点击<code>选择文件</code>，在弹出框中选择需要上传的文件，然后点击<code>Upload</code></p><p><img src="https://image.xugaoxiang.com/imgs/2020/12/3b3cc78a98b70938.png" alt="flask"></p><p>来到<code>pycharm</code>可以看到刚刚接收到的文件<code>python_logo.png</code></p><p><img src="https://image.xugaoxiang.com/imgs/2020/12/a3ee8dded624982b.png" alt="flask"></p>]]></content>
      
      
      <categories>
          
          <category> Flask </category>
          
          <category> 文件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> web </tag>
            
            <tag> 文件 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>添加favicon</title>
      <link href="/2024/03/22/%E6%B7%BB%E5%8A%A0favicon/"/>
      <url>/2024/03/22/%E6%B7%BB%E5%8A%A0favicon/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="Flask教程-二十一-添加favicon"><a href="#Flask教程-二十一-添加favicon" class="headerlink" title="Flask教程(二十一)添加favicon"></a>Flask教程(二十一)添加favicon</h1><h3 id="软硬件环境"><a href="#软硬件环境" class="headerlink" title="软硬件环境"></a>软硬件环境</h3><ul><li>windows 10 64bit</li><li>anaconda3 with <a href="https://xugaoxiang.com/tag/python/">python</a> 3.7</li><li><a href="https://xugaoxiang.com/tag/flask/">flask</a> 1.1.2</li></ul><h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p><code>favicon</code>是<code>favorites icon</code>的缩写，是指在网页浏览器显示在标签页或者历史记录里的图标。这个图标能帮助用户将您的网站与其他网站区分开。</p><p><img src="https://image.xugaoxiang.com/imgs/2020/11/7935912149734132.png" alt="favicon"></p><h3 id="图片转icon"><a href="#图片转icon" class="headerlink" title="图片转icon"></a>图片转icon</h3><p><code>favicon</code>文件的尺寸通常比较小，常见的尺寸有16x16，32x32和48x48。我们准备一张<code>jpg</code>或者<code>png</code>的图片，来到在线的转换站点进行转换</p><p><a href="https://favicon.io/favicon-converter/">https://favicon.io/favicon-converter/</a></p><p><img src="https://image.xugaoxiang.com/imgs/2020/11/97f22b79c104aa15.png" alt="favicon"></p><h3 id="flask中如何处理？"><a href="#flask中如何处理？" class="headerlink" title="flask中如何处理？"></a>flask中如何处理？</h3><p>我们简单写个<code>flask</code>应用，这个应该非常熟练了，<code>app.py</code>内容为</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask, render_template</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index</span>():</span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">&#x27;index.html&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app.run()</span><br></pre></td></tr></table></figure><p>创建模板文件<code>index.html</code></p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;shortcut icon&quot;</span> <span class="attr">href</span>=<span class="string">&quot;&#123;&#123; url_for(&#x27;static&#x27;, filename=&#x27;favicon.ico&#x27;) &#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Favicon<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Hello favicon<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>然后将转换好的<code>icon</code>文件放到<code>static</code>文件夹下，文件名为<code>favicon.ico</code></p><p>最后启动<code>flask</code>服务后，访问<code>http://127.0.0.1:5000</code>，在浏览器地址栏左侧就可以看到<code>favicon</code>了</p><p><img src="https://image.xugaoxiang.com/imgs/2020/11/e5bc8003b837731d.png" alt="favicon"></p>]]></content>
      
      
      <categories>
          
          <category> Flask </category>
          
      </categories>
      
      
        <tags>
            
            <tag> web </tag>
            
            <tag> 计算机 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>数据库操作flask_sqlalchemy</title>
      <link href="/2024/03/22/%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9Cflask_sqlalchemy/"/>
      <url>/2024/03/22/%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9Cflask_sqlalchemy/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="Flask教程-十一-数据库操作flask-sqlalchemy"><a href="#Flask教程-十一-数据库操作flask-sqlalchemy" class="headerlink" title="Flask教程(十一)数据库操作flask_sqlalchemy"></a><a href="https://xugaoxiang.com/2020/07/14/flask-11-sqlalchemy/">Flask教程(十一)数据库操作flask_sqlalchemy</a></h1><h3 id="软硬件环境"><a href="#软硬件环境" class="headerlink" title="软硬件环境"></a>软硬件环境</h3><ul><li>windows 10 64bit</li><li>anaconda3 with <a href="https://xugaoxiang.com/tag/python/">python</a> 3.7</li><li>pycharm 2020.1.2</li><li><a href="https://xugaoxiang.com/tag/flask/">flask</a> 1.1.2</li><li><a href="https://xugaoxiang.com/tag/sqlite/">sqlite</a>3</li></ul><h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>在<code>web</code>开发中，离不开数据库操作。前文我们已经介绍过<code>SQLAlchemy</code>这个<code>ORM</code>, <a href="https://xugaoxiang.com/2020/06/16/python-sqlalchemy-mysql/">python使用sqlalchemy操作mysql数据库</a>, 真的非常简单好用。<code>Flask-SQLAlchemy</code>是<code>flask</code>的扩展，它将<code>SQLAlchemy</code>的支持带到了<code>flask</code>应用程序中</p><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p>使用老方法安装</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">pip install flask_sqlalchemy</span><br></pre></td></tr></table></figure><h3 id="sqlite安装"><a href="#sqlite安装" class="headerlink" title="sqlite安装"></a><a href="https://xugaoxiang.com/tag/sqlite/">sqlite</a>安装</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SQLAlchemy`操作`mysql`的示例前面已经演示过了，这次我们使用`sqlite`数据库。`sqlite`是一款轻量级的数据库，可以很方便的在嵌入式设备或者移动设备上使用，支持主流的操作系统`win`、`linux`、`macOS`、`android`等，目前版本已经发展到了`sqlite3</span><br></pre></td></tr></table></figure><p>来到官方站点 <a href="https://www.sqlite.org/download.html%EF%BC%8C%E6%A0%B9%E6%8D%AE%E8%87%AA%E5%B7%B1%E7%9A%84%E5%B9%B3%E5%8F%B0%E8%BF%9B%E8%A1%8C%E9%80%89%E6%8B%A9%E4%B8%8B%E8%BD%BD">https://www.sqlite.org/download.html，根据自己的平台进行选择下载</a></p><p><img src="https://image.xugaoxiang.com/imgs/2020/07/e5b026f717a1e8ef.png" alt="flask-sqlalchemy"></p><p>将下载下来的2个压缩包分别加压缩，然后将里面的文全部件放在一个文件夹里，方便使用，然后将这个文件夹的路径加入到系统的环境变量里</p><p><img src="https://image.xugaoxiang.com/imgs/2020/07/54e85b8e3986a781.png" alt="flask-sqlalchemy"></p><p><img src="https://image.xugaoxiang.com/imgs/2020/07/8e428dab159ca513.png" alt="flask-sqlalchemy"></p><p>然后，我们在任意位置，打开终端，就都可以直接使用<code>sqlite.exe</code>了</p><p><img src="https://image.xugaoxiang.com/imgs/2020/07/64cc08d83b0a63be.png" alt="flask-sqlalchemy"></p><p>如果不熟悉<code>sql</code>的命令的话，可以使用图形化客户端，这里推荐一个工具，它是一个开源的项目，可以下面的地址进行下载</p><p><a href="https://sqlitebrowser.org/dl/">https://sqlitebrowser.org/dl/</a></p><h3 id="代码示例"><a href="#代码示例" class="headerlink" title="代码示例"></a>代码示例</h3><p>这里还是使用上一节 <a href="https://xugaoxiang.com/2020/07/09/flask-10-wtf/">Flask教程(十)表单处理Flask-WTF</a> 中的用户注册是示例，在原来的基础上进行修改，当用户提交注册信息的时候，<code>flask</code>会去数据库中进行查询，如果用户名不存在则将用户信息写入<code>sqlite</code>，否则给出无效用户名的错误信息，要求用户重新填写</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask, render_template, request</span><br><span class="line"><span class="keyword">from</span> flask_wtf <span class="keyword">import</span> FlaskForm</span><br><span class="line"><span class="keyword">from</span> wtforms <span class="keyword">import</span> SubmitField, StringField, PasswordField</span><br><span class="line"><span class="keyword">from</span> wtforms.validators <span class="keyword">import</span> DataRequired, EqualTo, Length, Email</span><br><span class="line"><span class="keyword">from</span> flask_sqlalchemy <span class="keyword">import</span> SQLAlchemy</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line">app.secret_key = <span class="string">&quot;xxx&quot;</span></span><br><span class="line"><span class="comment"># 设置数据库URI</span></span><br><span class="line">app.config[<span class="string">&#x27;SQLALCHEMY_DATABASE_URI&#x27;</span>] = <span class="string">&#x27;sqlite:///member.sqlite3&#x27;</span></span><br><span class="line">app.config[<span class="string">&#x27;SQLALCHEMY_TRACK_MODIFICATIONS&#x27;</span>] = <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用app作为参数实例化一个SQLAlchemy类的对象</span></span><br><span class="line">db = SQLAlchemy(app)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建会员模型</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Member</span>(db.Model):</span><br><span class="line">    <span class="built_in">id</span> = db.Column(<span class="string">&#x27;id&#x27;</span>, db.Integer, primary_key=<span class="literal">True</span>, autoincrement=<span class="literal">True</span>)</span><br><span class="line">    username = db.Column(db.String(<span class="number">45</span>), unique=<span class="literal">True</span>)</span><br><span class="line">    email = db.Column(db.String(<span class="number">45</span>))</span><br><span class="line">    password = db.Column(db.String(<span class="number">128</span>))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, username, email, password</span>):</span><br><span class="line">        self.username = username</span><br><span class="line">        self.email = email</span><br><span class="line">        self.password = password</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建数据表</span></span><br><span class="line">db.create_all()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用WTF实现表单，自定义一个表单类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">RegisterForm</span>(<span class="title class_ inherited__">FlaskForm</span>):</span><br><span class="line">    username = StringField(label=<span class="string">&#x27;用户名: &#x27;</span>, validators=[DataRequired()])</span><br><span class="line">    email = StringField(label=<span class="string">&#x27;邮箱: &#x27;</span>, validators=[DataRequired(), Email(message=<span class="string">&#x27;邮箱格式错误&#x27;</span>)])</span><br><span class="line">    password = PasswordField(label=<span class="string">&#x27;密码: &#x27;</span>, validators=[DataRequired(), Length(<span class="number">6</span>, <span class="number">16</span>, message=<span class="string">&#x27;密码格式错误&#x27;</span>)])</span><br><span class="line">    password2 = PasswordField(label=<span class="string">&#x27;确认密码: &#x27;</span>, validators=[DataRequired(), Length(<span class="number">6</span>, <span class="number">16</span>, message=<span class="string">&#x27;密码格式错误&#x27;</span>), EqualTo(<span class="string">&#x27;password&#x27;</span>, message=<span class="string">&#x27;密码不一致&#x27;</span>)])</span><br><span class="line">    submit = SubmitField(label=<span class="string">&#x27;注册&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/&#x27;</span>, methods=[<span class="string">&#x27;GEt&#x27;</span>, <span class="string">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">register</span>():</span><br><span class="line">    register_form = RegisterForm()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">&#x27;POST&#x27;</span>:</span><br><span class="line">        <span class="keyword">if</span> register_form.validate_on_submit():</span><br><span class="line">            username = request.form.get(<span class="string">&#x27;username&#x27;</span>)</span><br><span class="line">            email = request.form.get(<span class="string">&#x27;email&#x27;</span>)</span><br><span class="line">            password = request.form.get(<span class="string">&#x27;password&#x27;</span>)</span><br><span class="line"></span><br><span class="line">            <span class="comment"># 判断数据库中是否已经存在相同的用户名</span></span><br><span class="line">            <span class="keyword">if</span> Member.query.filter_by(username=username).<span class="built_in">all</span>():</span><br><span class="line">                <span class="keyword">return</span> <span class="string">&#x27;Invalid username&#x27;</span></span><br><span class="line"></span><br><span class="line">            <span class="comment"># 构建数据库记录并写入数据库</span></span><br><span class="line">            member = Member(username=username, email=email, password=password)</span><br><span class="line">            db.session.add(member)</span><br><span class="line">            db.session.commit()</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&#x27;Register success.&#x27;</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&#x27;Invalid&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 把实例化后的register_form传入到页面register.html中</span></span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">&#x27;register.html&#x27;</span>, form=register_form)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app.run(host=<span class="string">&quot;127.0.0.1&quot;</span>,port=<span class="number">5000</span>,debug=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure><p>模板文件跟原来的一样，只有一个<code>form</code>表单，没有做任何修改</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Register<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">        &#123;&#123; form.csrf_token() &#125;&#125;</span><br><span class="line">        &#123;&#123; form.username.label &#125;&#125; &#123;&#123; form.username &#125;&#125; <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        &#123;&#123; form.email.label &#125;&#125; &#123;&#123; form.email  &#125;&#125; <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        &#123;&#123; form.password.label &#125;&#125; &#123;&#123; form.password &#125;&#125; <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        &#123;&#123; form.password2.label &#125;&#125; &#123;&#123; form.password2 &#125;&#125; <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        &#123;&#123; form.submit &#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>程序运行起来后，访问<code>http://127.0.0.1:5000</code>，输入满足条件的注册信息</p><p><img src="https://image.xugaoxiang.com/imgs/2020/07/6b089ae9698bb29e.png" alt="flask-sqlalchemy"></p><p><img src="https://image.xugaoxiang.com/imgs/2020/07/4c0b742f4266f95f.png" alt="flask-sqlalchemy"></p><p>在项目根目录生成了数据库文件<code>member.sqlite3</code></p><p><img src="https://image.xugaoxiang.com/imgs/2020/07/ae57b1fb7feb11dd.png" alt="flask-sqlalchemy"></p><p>使用图形化工具<code>DB Browser</code>打开<code>member.sqlite3</code>可以看到刚才注册成功的用户信息，利用工具，可以很方便的进行数据的增删改查</p><p><img src="https://image.xugaoxiang.com/imgs/2020/07/c459a67b7b6cb9f3.png" alt="flask-sqlalchemy"></p><p>如果用户名已经被注册过了，则页面提示错误信息，相应的信息也不会被写入数据库</p><p><img src="https://image.xugaoxiang.com/imgs/2020/07/298f3cc169e78604.png" alt="flask-sqlalchemy"></p><h3 id="备注"><a href="#备注" class="headerlink" title="备注"></a>备注</h3><p>如果出现警告</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">UserWarning SQLALCHEMY_TRACK_MODIFICATIONS adds significant overhead</span><br></pre></td></tr></table></figure><p>可以通过设置<code>app.config[&#39;SQLALCHEMY_TRACK_MODIFICATIONS&#39;] = True</code>来消除上面的警告</p>]]></content>
      
      
      <categories>
          
          <category> Flask </category>
          
          <category> 数据库 </category>
          
          <category> 爬虫 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> web </tag>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>闪现信息</title>
      <link href="/2024/03/22/%E9%97%AA%E7%8E%B0%E6%B6%88%E6%81%AF/"/>
      <url>/2024/03/22/%E9%97%AA%E7%8E%B0%E6%B6%88%E6%81%AF/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="Flask教程-九-闪现消息"><a href="#Flask教程-九-闪现消息" class="headerlink" title="Flask教程(九)闪现消息"></a><a href="https://xugaoxiang.com/2020/03/25/flask-9-flash/">Flask教程(九)闪现消息</a></h1><h3 id="软硬件环境"><a href="#软硬件环境" class="headerlink" title="软硬件环境"></a>软硬件环境</h3><ul><li>Windows 10 64bit</li><li>Anaconda3 with <a href="https://xugaoxiang.com/tag/python/">python</a> 3.7</li><li>PyCharm 2019.3</li><li>Flask 1.1.1</li></ul><h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>在<code>web</code>应用中，经常需要对用户的操作实施反馈，好让用户知道到底发生了什么事。最常见的方式自然是在网页上显示一些字符，可以是确认消息、警告或者错误提醒。</p><h3 id="Flask实现"><a href="#Flask实现" class="headerlink" title="Flask实现"></a>Flask实现</h3><p>在<code>Flask</code>中，使用<code>flash message</code>(闪现消息)，具体使用的方法是<code>flash()</code></p><blockquote><p>flash(message, category)</p></blockquote><p>其中<br>* message: 具体的消息内容<br>* category: 可选参数，表示消息类型，比如错误、警告等</p><p>在视图函数中发送了消息，自然的，就需要在模板文件中取出消息，我们使用方法<code>get_flashed_message</code></p><blockquote><p>get_flashed_messages(with_categories, category_filter)</p></blockquote><p>其中2个参数都是可选参数</p><ul><li>with_categories: 消息类型，与上面的<code>flash</code>匹配</li><li>category_filter: 过滤条件</li></ul><p>下面看个完整的实例</p><p><code>run.py</code>文件内容</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask, render_template, request, redirect, url_for, flash</span><br><span class="line">app = Flask(__name__)</span><br><span class="line">app.secret_key = <span class="string">&quot;xxx&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index</span>():</span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">&#x27;index.html&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/login&#x27;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">login</span>():</span><br><span class="line">    error = <span class="literal">None</span></span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">&quot;POST&quot;</span>:</span><br><span class="line">        <span class="keyword">if</span> request.form[<span class="string">&#x27;email&#x27;</span>] != <span class="string">&#x27;test@gmail.com&#x27;</span> <span class="keyword">or</span> request.form[<span class="string">&#x27;password&#x27;</span>] != <span class="string">&#x27;test&#x27;</span>:</span><br><span class="line">            error = <span class="string">&quot;Invalid account.&quot;</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            flash(<span class="string">&quot;Login successfully&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span> redirect(url_for(<span class="string">&#x27;index&#x27;</span>))</span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">&#x27;login.html&#x27;</span>, error=error)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app.run(host=<span class="string">&quot;127.0.0.1&quot;</span>,port=<span class="number">5000</span>,debug=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure><p>当邮箱和密码输入正确的时候，调用<code>flash</code>方法</p><p>模板文件<code>index.html</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Index<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    &#123;% with messages = get_flashed_messages() %&#125;</span><br><span class="line">         &#123;% if messages %&#125;</span><br><span class="line">               &#123;% for message in messages %&#125;</span><br><span class="line">                    <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; message &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">               &#123;% endfor %&#125;</span><br><span class="line">         &#123;% endif %&#125;</span><br><span class="line">    &#123;% endwith %&#125;</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>Welcome!<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span> = <span class="string">&quot;&#123;&#123; url_for(&#x27;login&#x27;) &#125;&#125;&quot;</span>&gt;</span>login<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>通过调用<code>get_flashed_messages</code>方法获取到所有的消息，然后使用<code>for-in</code>的循环显示出每一条消息。页面的底部，我们放置一个超链接，用于跳转到<code>login</code>页面</p><p><code>login.html</code>文件内容</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Login<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span> = <span class="string">&quot;post&quot;</span> <span class="attr">action</span> = <span class="string">&quot;http://localhost:5000/login&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>Email<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span> = <span class="string">&#x27;email&#x27;</span> <span class="attr">name</span> = <span class="string">&#x27;email&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>Password<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span> = <span class="string">&#x27;password&#x27;</span> <span class="attr">name</span> = <span class="string">&#x27;password&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span> = <span class="string">&quot;submit&quot;</span> <span class="attr">value</span> = <span class="string">&quot;Submit&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    &#123;% if error %&#125;</span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">strong</span>&gt;</span>Error<span class="tag">&lt;/<span class="name">strong</span>&gt;</span>: &#123;&#123; error &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    &#123;% endif %&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>这是前面我们介绍过的简单登录界面，最下面用于显示出错信息</p><p>最后启动下<code>Flask</code>服务，访问<a href="http://127.0.0.1:5000/">http://127.0.0.1:5000</a></p><p><img src="https://image.xugaoxiang.com/imgs/2020/12/5b650bda89543ca0.png" alt="flask"></p><p>输入<code>email</code>和<code>password</code></p><p><img src="https://image.xugaoxiang.com/imgs/2020/12/a0370dc596ceaf0c.png" alt="flask"></p><p>出错，显示无效账户信息</p><p><img src="https://image.xugaoxiang.com/imgs/2020/12/fcbab509c41c0390.png" alt="flask"></p><p>成功，显示欢迎信息</p><p><img src="https://image.xugaoxiang.com/imgs/2020/12/8e693af00c6122d7.png" alt="flask"></p>]]></content>
      
      
      <categories>
          
          <category> Flask </category>
          
      </categories>
      
      
        <tags>
            
            <tag> web </tag>
            
            <tag> 计算机 </tag>
            
            <tag> 消息队列 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>日志</title>
      <link href="/2024/03/22/%E6%97%A5%E5%BF%97/"/>
      <url>/2024/03/22/%E6%97%A5%E5%BF%97/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="Flask教程-十五-日志"><a href="#Flask教程-十五-日志" class="headerlink" title="Flask教程(十五)日志"></a><a href="https://xugaoxiang.com/2020/08/25/flask-15-logging/">Flask教程(十五)日志</a></h1><h3 id="软硬件环境"><a href="#软硬件环境" class="headerlink" title="软硬件环境"></a>软硬件环境</h3><ul><li>windows 10 64bit</li><li>anaconda3 with <a href="https://xugaoxiang.com/tag/python/">python</a> 3.7</li><li>pycharm 2020.1.2</li><li><a href="https://xugaoxiang.com/tag/flask/">flask</a> 1.1.2</li></ul><h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p><code>flask</code>日志使用标准的<code>python logging</code>。所有与<code>flask</code>相关的消息都用<code>app.logger</code>来记录，同样的，这个日志记录器也可用于你自己的日志记录。</p><p><code>logging</code>是<code>python</code>自带的系统模块，在 <a href="https://xugaoxiang.com/category/python%E7%BC%96%E7%A8%8B/python%E5%AE%9E%E7%94%A8%E6%A8%A1%E5%9D%97/"><code>python</code>实用模块</a> 板块，我们已经介绍过它的使用方法，不了解的童鞋可以去看看，链接是 <a href="https://xugaoxiang.com/2019/12/04/python-module-logging/">https://xugaoxiang.com/2019/12/04/python-module-logging/</a></p><h3 id="日志配置"><a href="#日志配置" class="headerlink" title="日志配置"></a>日志配置</h3><p>在<code>flask</code>中，不用任何配置就可以使用<code>app.logger</code>，如下示例</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/login&#x27;</span>, methods=[<span class="string">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">login</span>():</span><br><span class="line">    user = get_user(request.form[<span class="string">&#x27;username&#x27;</span>])</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> user.check_password(request.form[<span class="string">&#x27;password&#x27;</span>]):</span><br><span class="line">        login_user(user)</span><br><span class="line">        app.logger.info(<span class="string">f&#x27;<span class="subst">&#123;user.username&#125;</span> logged in successfully.&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span> redirect(url_for(<span class="string">&#x27;index&#x27;</span>))</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        app.logger.info(<span class="string">f&#x27;<span class="subst">&#123;user.username&#125;</span> failed to log in&#x27;</span>)</span><br><span class="line">        abort(<span class="number">401</span>)</span><br></pre></td></tr></table></figure><p>默认情况下，<code>flask</code>会自动添加一个<code>StreamHandler</code>到<code>app.logger</code>。在请求过程中，它会写到由<code>WSGI</code>服务器指定的，保存在<code>environ[&#39;wsgi.errors&#39;]</code>变量中的日志流(通常是<code>sys.stderr</code>)中。在请求之外，则会记录到<code>sys.stderr</code>。</p><p>如果你对日志默认配置不太满意的话，可以自行设置。当想要为项目配置日志时，应当在创建应用对象之前进行配置。 如果晚了，那么<code>app.logger</code>就会成为缺省记录器。下面我们使用<code>logging.config.dictConfig</code>来配置日志，看示例</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> logging.config</span><br><span class="line"></span><br><span class="line">logging.config.dictConfig(</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">&quot;version&quot;</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="string">&quot;disable_existing_loggers&quot;</span>: <span class="literal">False</span>,</span><br><span class="line">        <span class="string">&quot;formatters&quot;</span>: &#123;</span><br><span class="line">            <span class="string">&quot;simple&quot;</span>: &#123;<span class="string">&quot;format&quot;</span>: <span class="string">&quot;%(asctime)s - %(name)s - %(levelname)s - %(message)s&quot;</span>&#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&quot;handlers&quot;</span>: &#123;</span><br><span class="line">            <span class="string">&quot;console&quot;</span>: &#123;</span><br><span class="line">                <span class="string">&quot;class&quot;</span>: <span class="string">&quot;logging.StreamHandler&quot;</span>,</span><br><span class="line">                <span class="string">&quot;level&quot;</span>: <span class="string">&quot;DEBUG&quot;</span>,</span><br><span class="line">                <span class="string">&quot;formatter&quot;</span>: <span class="string">&quot;simple&quot;</span>,</span><br><span class="line">                <span class="string">&quot;stream&quot;</span>: <span class="string">&quot;ext://sys.stdout&quot;</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="string">&quot;info_file_handler&quot;</span>: &#123;</span><br><span class="line">                <span class="string">&quot;class&quot;</span>: <span class="string">&quot;logging.handlers.RotatingFileHandler&quot;</span>,</span><br><span class="line">                <span class="string">&quot;level&quot;</span>: <span class="string">&quot;INFO&quot;</span>,</span><br><span class="line">                <span class="string">&quot;formatter&quot;</span>: <span class="string">&quot;simple&quot;</span>,</span><br><span class="line">                <span class="string">&quot;filename&quot;</span>: <span class="string">&quot;info.log&quot;</span>,</span><br><span class="line">                <span class="string">&quot;maxBytes&quot;</span>: <span class="number">10485760</span>,</span><br><span class="line">                <span class="string">&quot;backupCount&quot;</span>: <span class="number">50</span>,</span><br><span class="line">                <span class="string">&quot;encoding&quot;</span>: <span class="string">&quot;utf8&quot;</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="string">&quot;error_file_handler&quot;</span>: &#123;</span><br><span class="line">                <span class="string">&quot;class&quot;</span>: <span class="string">&quot;logging.handlers.RotatingFileHandler&quot;</span>,</span><br><span class="line">                <span class="string">&quot;level&quot;</span>: <span class="string">&quot;ERROR&quot;</span>,</span><br><span class="line">                <span class="string">&quot;formatter&quot;</span>: <span class="string">&quot;simple&quot;</span>,</span><br><span class="line">                <span class="string">&quot;filename&quot;</span>: <span class="string">&quot;errors.log&quot;</span>,</span><br><span class="line">                <span class="string">&quot;maxBytes&quot;</span>: <span class="number">10485760</span>,</span><br><span class="line">                <span class="string">&quot;backupCount&quot;</span>: <span class="number">20</span>,</span><br><span class="line">                <span class="string">&quot;encoding&quot;</span>: <span class="string">&quot;utf8&quot;</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="string">&quot;debug_file_handler&quot;</span>: &#123;</span><br><span class="line">                <span class="string">&quot;class&quot;</span>: <span class="string">&quot;logging.handlers.RotatingFileHandler&quot;</span>,</span><br><span class="line">                <span class="string">&quot;level&quot;</span>: <span class="string">&quot;DEBUG&quot;</span>,</span><br><span class="line">                <span class="string">&quot;formatter&quot;</span>: <span class="string">&quot;simple&quot;</span>,</span><br><span class="line">                <span class="string">&quot;filename&quot;</span>: <span class="string">&quot;debug.log&quot;</span>,</span><br><span class="line">                <span class="string">&quot;maxBytes&quot;</span>: <span class="number">10485760</span>,</span><br><span class="line">                <span class="string">&quot;backupCount&quot;</span>: <span class="number">50</span>,</span><br><span class="line">                <span class="string">&quot;encoding&quot;</span>: <span class="string">&quot;utf8&quot;</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&quot;loggers&quot;</span>: &#123;</span><br><span class="line">            <span class="string">&quot;my_module&quot;</span>: &#123;<span class="string">&quot;level&quot;</span>: <span class="string">&quot;ERROR&quot;</span>, <span class="string">&quot;handlers&quot;</span>: [<span class="string">&quot;console&quot;</span>], <span class="string">&quot;propagate&quot;</span>: <span class="string">&quot;no&quot;</span>&#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&quot;root&quot;</span>: &#123;</span><br><span class="line">            <span class="string">&quot;level&quot;</span>: <span class="string">&quot;DEBUG&quot;</span>,</span><br><span class="line">            <span class="string">&quot;handlers&quot;</span>: [<span class="string">&quot;error_file_handler&quot;</span>, <span class="string">&quot;debug_file_handler&quot;</span>],</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br></pre></td></tr></table></figure><p>上面是一个将日志写入文件的配置示例，当日志文件大小大于<code>10M</code>后，就用一个新的文件来存放日志，总的日志文件数目是50个。<code>debug</code>的信息写入<code>debug.log</code>，<code>info</code>的信息写入<code>info.log</code>，<code>error</code>的信息写入<code>error.log</code>。日志中每一行的内容是这样的</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;&quot;format&quot;: &quot;%(asctime)s - %(name)s - %(levelname)s - %(message)s&quot;&#125;</span><br></pre></td></tr></table></figure><p>各字段分别对应，日志时间 - 模块 - 日志等级 - 具体的日志内容</p><p><img src="https://image.xugaoxiang.com/imgs/2020/08/9f543f9cec8b662a.png" alt="flask-logging"></p>]]></content>
      
      
      <categories>
          
          <category> 爬虫 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 日志 </tag>
            
            <tag> 计算机 </tag>
            
            <tag> Games </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>项目部署</title>
      <link href="/2024/03/22/%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2/"/>
      <url>/2024/03/22/%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="Flask教程-十二-项目部署"><a href="#Flask教程-十二-项目部署" class="headerlink" title="Flask教程(十二)项目部署"></a><a href="https://xugaoxiang.com/2020/07/21/flask-12-deployment/">Flask教程(十二)项目部署</a></h1><h3 id="软硬件环境"><a href="#软硬件环境" class="headerlink" title="软硬件环境"></a>软硬件环境</h3><ul><li>ubuntu 18.04 64bit</li><li>anaconda3 with <a href="https://xugaoxiang.com/tag/python/">python</a> 3.7</li><li>pycharm 2020.1.2</li><li><a href="https://xugaoxiang.com/tag/flask/">flask</a> 1.1.2</li><li><a href="https://xugaoxiang.com/tag/gunicorn/">gunicorn</a> 20.0.4</li><li><a href="https://xugaoxiang.com/tag/nginx/">nginx</a> 1.14.0</li></ul><h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p><code>Flask</code>框架内部实现了一个简易的<code>Web</code>服务器，因此在之前的教程中，我们并没有去单独安装<code>Web</code>服务器，但是如果项目要在生产环境中部署的话，其内置的服务器是不适合的，既不够稳定，也无法承受大量请求的并发，<code>Flask</code>+<code>gunicorn</code>+<code>nginx</code>+<code>supervisor</code>是最常用的<code>Flask</code>应用部署方案，本文就来一步一步进行<code>Flask</code>应用程序的部署</p><h3 id="什么是WSGI"><a href="#什么是WSGI" class="headerlink" title="什么是WSGI"></a>什么是WSGI</h3><p><code>Web Server Gateway Interface</code>，即<code>web</code>服务器网关接口，是<code>Web</code>服务器和<code>Web</code>应用程序或框架之间的一种简单而通用的接口，它是一种协议，一种规范，专门<strong>用来解决众多<code>Web</code>服务器和<code>Web</code>应用程序或框架的兼容性问题</strong>。<strong>有了<code>WSGI</code>，你不用担心你写的<code>Web</code>应用程序只能运行在某一款<code>Web</code>服务器上</strong>。</p><h3 id="gunicorn"><a href="#gunicorn" class="headerlink" title="gunicorn"></a>gunicorn</h3><p>目前<code>Flask</code>官方列出了5个常用的<code>WSGI</code>容器，它们都实现了<code>WSGI</code>，我们使用最常用的<code>gunicorn</code></p><p><img src="https://image.xugaoxiang.com/imgs/2020/07/09d7518ba4f9bb9a.png" alt="flask"></p><p>它的安装非常方便，使用<code>pip</code>即可</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">pip install gunicorn</span><br></pre></td></tr></table></figure><p>接下来就可以启动<code>gunicorn</code>服务了，我们使用 <a href="https://xugaoxiang.com/2020/07/09/flask-10-wtf/">Flask教程(十)表单处理Flask-WTF</a> 中的示例，进入到源码目录，执行<code>gunicorn -w 2 -b :5000 run:app</code></p><p><strong>在windows中并不能使用gunicorn</strong>，我们可以将服务部署在ubuntu上</p><p>命令中的<code>-w</code>指的是处理请求的进程数，<code>-b</code>是指绑定本机<code>ip</code>，可以省略掉不写，使用的端口是5000，<code>run:app</code>指的是<code>run.py</code>中的<code>flask app</code>，更多参数帮助可以参照<code>gunicorn -h</code></p><p><img src="https://image.xugaoxiang.com/imgs/2020/07/37802711ac941683.png" alt="flask"></p><p>这时候在浏览器中访问<code>http://192.168.1.140:5000</code>，这里的192.168.1.140是<code>ubuntu</code>系统的<code>ip</code>地址</p><p><img src="https://image.xugaoxiang.com/imgs/2020/07/cb6a951614adcb86.png" alt="flask"></p><p>效果与<code>Flask</code>内置服务器是一模一样的</p><h3 id="nginx"><a href="#nginx" class="headerlink" title="nginx"></a>nginx</h3><p><code>nginx</code>是一个功能强大的反向代理服务器，我们使用<code>nginx</code>来转发<code>gunicorn</code>服务。为什么要在<code>gunicorn</code>之上再加层<code>nginx</code>呢？<strong>一方面<code>nginx</code>可以补充<code>gunicorn</code>在某些方面的不足，如<code>SSL</code>支持、高并发处理、负载均衡处理等，另一方面如果是做一个<code>web</code>网站，除了服务之外，肯定会有一些静态文件需要托管，这方面也是<code>nginx</code>的强项</strong></p><p>首先安装<code>nginx</code></p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo apt install nginx</span><br></pre></td></tr></table></figure><p>编辑配置文件<code>/etc/nginx/sites-available/default</code>，修改<code>location /</code>如下</p><figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 注意下这里的监听端口，访问的时候会用到</span></span><br><span class="line"><span class="attribute">listen</span> <span class="number">80</span> default_server;</span><br><span class="line"><span class="attribute">listen</span> [::]:<span class="number">80</span> default_server;</span><br><span class="line"></span><br><span class="line"><span class="section">location</span> / &#123;</span><br><span class="line">    <span class="comment"># First attempt to serve request as file, then</span></span><br><span class="line">    <span class="comment"># as directory, then fall back to displaying a 404.</span></span><br><span class="line">    <span class="attribute">try_files</span> <span class="variable">$uri</span> <span class="variable">$uri</span>/ =<span class="number">404</span>;</span><br><span class="line">    <span class="attribute">proxy_pass</span> http://localhost:5000/;</span><br><span class="line">    <span class="attribute">proxy_redirect</span> <span class="literal">off</span>;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">proxy_set_header</span> Host <span class="variable">$http_post</span>;</span><br><span class="line">    <span class="attribute">proxy_set_header</span> X-Real-IP <span class="variable">$remote_addr</span>;</span><br><span class="line">    <span class="attribute">proxy_set_header</span> X-Forwarded-For <span class="variable">$proxy_add_x_forwarded_for</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>接下来重启<code>nginx</code>服务</p><figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="attribute">sudo</span> /etc/init.d/nginx restart</span><br></pre></td></tr></table></figure><p>这时候一定要确保<code>gunicorn</code>服务已经启动，然后访问<code>http://192.168.1.140</code></p><p><img src="https://image.xugaoxiang.com/imgs/2020/07/7e7443ccf719981e.png" alt="flask"></p><h3 id="supervisor"><a href="#supervisor" class="headerlink" title="supervisor"></a><a href="https://xugaoxiang.com/tag/supervisor/">supervisor</a></h3><p><code>supervisor</code>是一个用<code>python</code>语言编写的进程管理工具，它可以很方便的监听、启动、停止、重启一个或多个进程。当一个进程意外被杀死，<code>supervisor</code>监听到进程死后，可以很方便的让进程自动恢复，不再需要程序员或系统管理员自己编写代码来控制，更详细的使用方法请参考之前的文章 <a href="https://xugaoxiang.com/2019/12/04/supervisor/">https://xugaoxiang.com/2019/12/04/supervisor/</a></p><p>首先创建<code>/etc/supervisor/conf.d/gunicorn.conf</code>文件，这是<code>gunicorn</code>服务的配置文件</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">[program:gunicorn]</span><br><span class="line">command=/home/waws/anaconda3/<span class="built_in">bin</span>/gunicorn -w <span class="number">2</span> -b :<span class="number">5000</span> run:app</span><br><span class="line">directory=/home/waws/workshop/Flask-<span class="number">10</span>-wtf</span><br><span class="line">autostart=true</span><br><span class="line">autorestart=true</span><br><span class="line">user=waws</span><br><span class="line">redirect_stderr=true</span><br></pre></td></tr></table></figure><p>接着还是同样的方法创建<code>nginx</code>的配置文件，<code>/etc/supervisor/conf.d/nginx.conf</code>，内容是</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">[program:nginx]</span><br><span class="line">command=/usr/sbin/nginx -g <span class="string">&#x27;daemon on;&#x27;</span></span><br><span class="line">autostart=true</span><br><span class="line">autorestart=true</span><br><span class="line">user=root</span><br><span class="line">redirect_stderr=true</span><br></pre></td></tr></table></figure><p><code>nginx</code>是需要<code>root</code>权限的，所以<code>user</code>应该设置成<code>root</code>。最后就可以重启<code>supervisor</code>了</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo /etc/init.d/supervisor restart </span><br></pre></td></tr></table></figure><p>重启成功后，我们来查看下<code>gunicorn</code>和<code>nginx</code>是否启动正常</p><p><img src="https://image.xugaoxiang.com/imgs/2020/07/d8c90f489ba6e27c.png" alt="flask"></p><p>以及<code>Flask</code>应用是否正常</p><p><img src="https://image.xugaoxiang.com/imgs/2020/07/7e7443ccf719981e.png" alt="flask"></p>]]></content>
      
      
      <categories>
          
          <category> Flask </category>
          
          <category> 部署 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> web </tag>
            
            <tag> 计算机 </tag>
            
            <tag> 部署 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/2024/03/21/hello-world/"/>
      <url>/2024/03/21/hello-world/</url>
      
        <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="抱歉, 这个密码看着不太对, 请微信联系管理员获取." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <script id="hbeData" type="hbeData" data-hmacdigest="cec54f34d647805c22085d125ec24529598f9b18465f67aa4a74ad82a871e9fe">184d5613b7d1f40c9857b7bf904a8fe36763f41fad38a324569baffd9e9b9270647ec6fffb73b5e137740c8138634aaa6c83d30703f081a724b3085fc525af138516d2def46c6c250cffc8a41b8b17e040322010a66a30f5273a596f9a81d256cfe2c93489c3f3ca5ddcbaa087bec5b93fde6f5729abd8c262d881eea92c5580afaba5d2c3b918c31f296edd08878e32ba9c05e1aa1b5dc88ccc8058e640b37ca75242f3e62d38ee1d209e368215ddbad3413a7f8f65768f0206aa5874136289d73ee3914ea2e9539ae294400a36def0ee5f23f5cc5c9af6f976dd3f6cb6e6499cc20a231042c9d3fd4a1bc2157451aebf3002d0d45fefbf7652dc9e482142428b7e27f0aea9c25a3ecf6a60362b1485d724ef8c409810d27700ae67fe78d7bb92da1bb023b91ee00932d5d97a314723b19cdafd0cea0d5569b1548064f98036a1f4c9776b43cb506d0fc28d1fb8c1ccfafa5e26248bc76e5951f0dd5a4633352b6ebeb5faf4ae37014763b62ec77afd185f697ce6648211188b0118e163e9c8f3e61a046914a13b7dc06f7bce826ce4e3eaf1775cc721a27619bcfedcbb7e067298476b5bbfde1ffc5bb488f6ffd979a9eafb2a9cf39de2fe65a2a8d46606838747a9a06f51dad54f3bf0726bbc359ffdca4be2d36a34e43b75b9dd95bdf5b68cca2a0670e2e2918ccde6a05837200b0f2ed6cb0494ba53686568dfc6243e4ae7b72b201f3feebc2bb201c26bfdb6f08c4e6d392eea6fa06738b065f4bae22afd2b543fd39d946e3c5f8fbe025a00edb46c418312781313269e39a450b223195c776764baa7c736bde79a52b5a196a1eab7c5df97d69525122b5a60a71fde4f7b8650e09919e3ac80e49e73e0a9029af26f61aaec49991cd3e692c083e9969b3e9a126331bc6be9a05687f2fa86474af049c5e6007ea5d616115df5362a2b8c36e779f3d8bf622940509b72dc808116837ca311542f4340f14effe4264b200f3ce059d45b522bc40011a3faa089c30a9a5bec10d3d994d3b2d38b06d5a39e88c1957d16f1483e5f628f254e09d3bc11846fef261e0982d98ce4972a4f5f18cb1e98b30ea3fb9ff624658fc49e4c3fc97ac10cc3099ef38ecfb94a86b65b912322a89bc3393ba5fd8a7948f4e38e9496931bc905f5ef23953dc28adda60bc4832384e283163e548df1ec1eb83793fd4ac5fa35732f2b279394a0d7aaedf7e352dbb8a91816b1a009ab35d592625e3893b00e4850a996998a48ebcbfdb180796441905d5201530b9dcbf3ca12fe54585a68c679c6b3d1b367e7e2a76c56937993eff21f571398f154bb3a747b6a44bcb340f3ef57c89c786bee0effa6e6d7b53608599b9f968bfce206ff1cfe2f20952f10131672ba2a33606545d4741b71f3e065de309f1fbf2781b70fa63770dfd047159ceecea220d41b73d7c4b86c874b73e8409e080aabb168f94cb3f09a7f6745e298c6a9e08fcdbccc556526f7eea1a85605e821e6dac9107f6b43e490ec3b5d4e26b4a0c8c2f1332219d6b64de94cc3ff5586f11039b2da803be54353197732f9dfb0b795e5192739cf24a31ad7209b47b09bc751155da8e6a4ac67dc832b61e5fda7cabae4085df5c64e838344fdfca0746f78de3cdb415ad254874fc960b6161d8bc691aa1a1edb6af4c846a04f94b1c63df0a504ba174905bf86053bbd2fb3682566f9f6d0f44bc6dcb1ecf39d6b225182dfef9eedf46056ece0bdb46a0dc118dd830e0cce483ed935d8b752c250ce9d16e32d19be30b8d184f0fb41858fe17ec7a97931367aef04904ee8e460c5f13aac2f9a8fbf416549c44ec1377cb3b09702d7430b18c8dfb6dacc5f508f18762946ddaef72438b6953d1cc7dedcb3472fc49189a5947933b94202c14052f74455cc83411b15294fde3055cd214e5105a6f6b8f40cbfaeaa6264b9550c622920732fdae00e79841c12e4d21f08a3a90b0322b1ba5e488bf768bb9ae0e8910d425735d61a689d57b73a4a4c08c92755d6d7fa0e24efdbe2fe9f12e4b89dde554a69b5aed5e4981316c45477040b407cf18604081c6fb3af8a881050ce43926fb7deca95609c785d96bc7e7a9406ef145a3b8e0ed91015c3c983b8828967b13b2c9a269968541e0c2f752355c05094841b621d9053d5cd8581c897e64b37518f8b12850262f759ac64548c8dc454c7e2df8573b5e4439092d7c05ea6f3b89778dcf3b5c08b8f91d87bf4f45e71288f119b6c8763f7d610685351a19366878e6def97366232c92138cb5555acabd3dc16d16e0d2c66f664e3198cd53548779f0ebcc56f8074a6ab3e97ea01517b81675a48a4745178c245b77378bcacd73fc504c396c4568688182f934620cdd6b0bf675645f9d21cc99289d989d60748f2571555a76ecbd836e1ff6122690ac1b1feb73714e5b63fa286dac56c03d85cfe07d4c0c1b2bbf457737e13c0caadd7ab996cfc2f5360f5dcd8d812a722aa27a337e08c99083c7d0be1ca940607e2e11228713a23b0f6ecbb802d6ffe7bae592ded4aaaf43e93a25feff15364c9d6484b03b64823cee38d6afa76d202af022b8f32bd66e5ec68324d75d4bff2049e3f218a124fc27afe3a409ad1927e384fe9079b545f777f4ffed5fda93c55ec8895bc2f06a4c321aa28f5997adfc5aedc2800ba99b3d796d5b7d8cf0cce5309846613ea161c9a5dd2b9316ed62bb310f5fcccf5a2db6e2e6cc8c8ec22c9e6b35af55b2447c9bd05b7a08d81e306a601cd197a13ce38090621b60c7b64976c6ec05564a0b39ea80f083be9d294efe606b41e99e37eef818bb6ad072c592096f7d931f69493733cd298fbf278088a85b771572136417bcc4b3c25e20949bc71c94e35cef6cded9a533744c7da5158f2abaf6305bb5d0c2f63ed65c331491f96e68f86b5bfad8edadcecbd0a8472d933f2e5501dce30c3ff2ffe234ecfdd2761f2aa19878ffb0f1a84f72840ca7c517a90d90d0fe85371eef74638ce850f71a6945c98ebce43fe7b2eb4b37f64c6fac5a34ab6fdf4998ee07c89dc59b491d73e4c0d4cab6bb1b6b4379adcc6b1aa88c1531ac6fcddfee92b3204da96363df6aa2d9c0019f6d55d290eb7b5c91fa2b42b9b08e29d288d710b66fea618e9eb54664b63b848b30037a3f3bca68bf3b840eec8030b44aa787c1f557ac09784d69a4becd0598c25a051f2f8880c5ed27581a2581a11aa7a9df4a64d331532d2d40c589411a990bb53f4976e8ed8eede37ff2d0fc74f2444ac383918e125f7d0382fddc75a6bfd9f94b534539f62e34cb87da15ee628c479f7c583fae30371f1775c8810eeb433cd6938a0aadf43242a6b7bd10feecaaf602f6621424efc4e7aa9484b5ce1eb8904ca0dc43ff709d10a5bf1a7ff81cb0a99c22985a92435ba72c8575fd68f1d03f490b1d53feada452f1acb62154fd9bedb78fbbc474ef886dbee17c97312f9ee6cfc460e9a81b07d830797e5d39386796fd2ee1ff629c9651868868e841cb40f817b97eecdf08cfc3acf082709c40f377d5cd7ca7d8a4d42f997f7951d7dfcf9cfbffc7d25e589d58b6a2039a8930067ce59ca35bd5743413b8a7f916d9d7bc7002eff2aa88714d8b3b4681ab1419d3156d8b524731e91fc2233deb096f73b1e759c9d9512daba0f68d92fab9a769d24008c9d9811eec98a3311b77a72b20da0d34d028e6963cb06952e02c3733148ad5c91889ccd8cf87b70ccb3ac3445ca26071d6d4972c747bbffb27adaf938021055d54b45d4d003a7931df39e1686e60be9951bd7fb296d647f6a591828c293613da2714887525b434648f392de01025a3615dea74c700a6afb7ea5260136547c2cadde173a994264cd6914e18f5cbc18fc17294236f795bc82cfd6f836eedd7321db82be88aad1217611d02d2c50df5e41a0f58442943c3366cbebb3e7afc7d371c549af99d2f891aab289dc70793a33c23a77ae02d0cff6b5e340a2f09034c04b98</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-surge">      <input class="hbe hbe-input-field hbe-input-field-surge" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-surge" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-surge" data-content="您好, 这里需要密码, 请微信联系博主获取.">您好, 这里需要密码, 请微信联系博主获取.</span>      </label>      <svg class="hbe hbe-graphic hbe-graphic-surge" width="300%" height="100%" viewBox="0 0 1200 60" preserveAspectRatio="none">        <path d="M1200,9c0,0-305.005,0-401.001,0C733,9,675.327,4.969,598,4.969C514.994,4.969,449.336,9,400.333,9C299.666,9,0,9,0,9v43c0,0,299.666,0,400.333,0c49.002,0,114.66,3.484,197.667,3.484c77.327,0,135-3.484,200.999-3.484C894.995,52,1200,52,1200,52V9z"></path>      </svg>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      
      
      <categories>
          
          <category> Diary </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 测试 </tag>
            
            <tag> Games </tag>
            
            <tag> 开心 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>测试3</title>
      <link href="/2024/03/19/%E6%B5%8B%E8%AF%953/"/>
      <url>/2024/03/19/%E6%B5%8B%E8%AF%953/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script>]]></content>
      
      
      <categories>
          
          <category> Flask </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 日志 </tag>
            
            <tag> 计算机 </tag>
            
            <tag> Games </tag>
            
            <tag> 爬虫 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Butterfly 主題页面(二)</title>
      <link href="/2024/03/19/Butterfly%20%E4%B8%BB%E9%A1%8C%E9%A0%81%E9%9D%A2(%E4%BA%8C)/"/>
      <url>/2024/03/19/Butterfly%20%E4%B8%BB%E9%A1%8C%E9%A0%81%E9%9D%A2(%E4%BA%8C)/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="Butterfly-主題页面-二"><a href="#Butterfly-主題页面-二" class="headerlink" title="Butterfly 主題页面(二)"></a>Butterfly 主題页面(二)</h1><h2 id="Front-matter"><a href="#Front-matter" class="headerlink" title="Front-matter"></a>Front-matter</h2><p><strong>Front-matter 是 markdown 文件最上方以 <code>---</code> 分隔的区域，用于指定個別档案的变数。</strong></p><ul><li>Page Front-matter 用于<code>页面</code>配置</li><li>Post Front-matter 用于<code>文章页</code>配置</li></ul><blockquote><p> 如果标注<code>可选</code>的参数，可根据自己需要添加，不用全部都写在 markdown 里</p></blockquote><h3 id="Page-Front-matter"><a href="#Page-Front-matter" class="headerlink" title="Page Front-matter"></a>Page Front-matter</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title:</span><br><span class="line">date:</span><br><span class="line">updated:</span><br><span class="line">type:</span><br><span class="line">comments:</span><br><span class="line">description:</span><br><span class="line">keywords:</span><br><span class="line">top_img:</span><br><span class="line">mathjax:</span><br><span class="line">katex:</span><br><span class="line">aside:</span><br><span class="line">aplayer:</span><br><span class="line">highlight_shrink:</span><br><span class="line">random:</span><br><span class="line">---</span><br></pre></td></tr></table></figure><table><thead><tr><th>寫法</th><th>解释</th></tr></thead><tbody><tr><td>title</td><td>【必需】页面标题</td></tr><tr><td>date</td><td>【必需】页面创建日期</td></tr><tr><td>type</td><td>【必需】标签、分类和友情链接三个页面需要配置</td></tr><tr><td>updated</td><td>【可选】页面更新日期</td></tr><tr><td>description</td><td>【可选】页面描述</td></tr><tr><td>keywords</td><td>【可选】页面关键字</td></tr><tr><td>comments</td><td>【可选】显示页面评论模块 (确认 true)</td></tr><tr><td>top_img</td><td>【可选】页面顶部图片</td></tr><tr><td>mathjax</td><td>【可选】显示mathjax (当设置mathjax的per_page: false時，才需要配置，确认 false)</td></tr><tr><td>katex</td><td>【可选】显示katex (当设置katex的per_page: false時，才需要配置，确认 false)</td></tr><tr><td>aside</td><td>【可选】显示侧边栏 (确认 true)</td></tr><tr><td>aplayer</td><td>【可选】在需要的页面加载aplayer的js和css,请参考文章下面的<code>音樂</code> 配置</td></tr><tr><td>highlight_shrink</td><td>【可选】配置代码框是否展開 (true&#x2F;false) (确认为设置中highlight_shrink的配置)</td></tr><tr><td>random</td><td>【可选】配置友情链接是否随机排序（确认为 false)</td></tr></tbody></table><h3 id="Post-Front-matter"><a href="#Post-Front-matter" class="headerlink" title="Post Front-matter"></a>Post Front-matter</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title:</span><br><span class="line">date:</span><br><span class="line">updated:</span><br><span class="line">tags:</span><br><span class="line">categories:</span><br><span class="line">keywords:</span><br><span class="line">description:</span><br><span class="line">top_img:</span><br><span class="line">comments:</span><br><span class="line">cover:</span><br><span class="line">toc:</span><br><span class="line">toc_number:</span><br><span class="line">toc_style_simple:</span><br><span class="line">copyright:</span><br><span class="line">copyright_author:</span><br><span class="line">copyright_author_href:</span><br><span class="line">copyright_url:</span><br><span class="line">copyright_info:</span><br><span class="line">mathjax:</span><br><span class="line">katex:</span><br><span class="line">aplayer:</span><br><span class="line">highlight_shrink:</span><br><span class="line">aside:</span><br><span class="line">abcjs:</span><br><span class="line">---</span><br></pre></td></tr></table></figure><table><thead><tr><th>寫法</th><th>解释</th></tr></thead><tbody><tr><td>title</td><td>【必需】文章标题</td></tr><tr><td>date</td><td>【必需】文章创建日期</td></tr><tr><td>updated</td><td>【可选】文章更新日期</td></tr><tr><td>tags</td><td>【可选】文章标签</td></tr><tr><td>categories</td><td>【可选】文章分类</td></tr><tr><td>keywords</td><td>【可选】文章关键字</td></tr><tr><td>description</td><td>【可选】文章描述</td></tr><tr><td>top_img</td><td>【可选】文章顶部图片</td></tr><tr><td>cover</td><td>【可选】文章缩略图(如果沒有设置top_img,文章頁顶部將显示缩略图，可设为false&#x2F;图片地址&#x2F;留空)</td></tr><tr><td>comments</td><td>【可选】显示文章评论模块(确认 true)</td></tr><tr><td>toc</td><td>【可选】显示文章TOC(确认为设置中toc的enable配置)</td></tr><tr><td>toc_number</td><td>【可选】显示toc_number(确认为设置中toc的number配置)</td></tr><tr><td>toc_style_simple</td><td>【可选】显示 toc 简洁模式</td></tr><tr><td>copyright</td><td>【可选】显示文章版权模块(确认为设置中post_copyright的enable配置)</td></tr><tr><td>copyright_author</td><td>【可选】文章版权模块的<code>文章作者</code></td></tr><tr><td>copyright_author_href</td><td>【可选】文章版权模块的<code>文章作者</code>链接</td></tr><tr><td>copyright_url</td><td>【可选】文章版权模块的<code>文章連結</code>链接</td></tr><tr><td>copyright_info</td><td>【可选】文章版权模块的<code>版权聲明</code>文字</td></tr><tr><td>mathjax</td><td>【可选】显示mathjax(当设置 mathjax 的 per_page: false 時，才需要配置，确认 false )</td></tr><tr><td>katex</td><td>【可选】显示 katex (当设置 katex 的 per_page: false 時，才需要配置，确认 false )</td></tr><tr><td>aplayer</td><td>【可选】在需要的页面加载 aplayer 的 js 和 css,请参考文章下面的<code>音樂</code> 配置</td></tr><tr><td>highlight_shrink</td><td>【可选】配置代码框是否展開(true&#x2F;false)(确认为设置中 highlight_shrink 的配置)</td></tr><tr><td>aside</td><td>【可选】显示侧边栏 (确认 true)</td></tr><tr><td>abcjs</td><td>【可选】加载 abcjs (当设置 abcjs 的 per_page: false 時，才需要配置，确认 false )</td></tr></tbody></table><h2 id="标签页"><a href="#标签页" class="headerlink" title="标签页"></a>标签页</h2><ol><li><p>前往你的 Hexo 博客的根目录</p></li><li><p>輸入 <code>hexo new page tags</code></p></li><li><p>你会找到 <code>source/tags/index.md</code> 这个文件</p></li><li><p>修改这个文件：</p><p><strong>记得添加 <code>type: &quot;tags&quot;</code></strong></p></li></ol><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: 标签</span><br><span class="line">date: 2018-01-05 00:00:00</span><br><span class="line">type: &quot;tags&quot;</span><br><span class="line">orderby: random</span><br><span class="line">order: 1</span><br><span class="line">---</span><br></pre></td></tr></table></figure><table><thead><tr><th>参数</th><th>解释</th></tr></thead><tbody><tr><td>type</td><td>【必须】页面类型，必须为 <code>tags</code></td></tr><tr><td>orderby</td><td>【可选】排序方式 ：random&#x2F;name&#x2F;length</td></tr><tr><td>order</td><td>【可选】排序次序： 1, asc for ascending; -1, desc for descending</td></tr></tbody></table><h2 id="分类页"><a href="#分类页" class="headerlink" title="分类页"></a>分类页</h2><ol><li><p>前往你的 Hexo 博客的根目录</p></li><li><p>輸入 <code>hexo new page categories</code></p></li><li><p>你会找到 <code>source/categories/index.md</code> 这个文件</p></li><li><p>修改这个文件：</p><p><strong>记得添加 <code>type: &quot;categories&quot;</code></strong></p></li></ol><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: 分类</span><br><span class="line">date: 2018-01-05 00:00:00</span><br><span class="line">type: &quot;categories&quot;</span><br><span class="line">---</span><br></pre></td></tr></table></figure><h2 id="友情链接"><a href="#友情链接" class="headerlink" title="友情链接"></a>友情链接</h2><p>为你的博客创建一個友情链接！</p><h3 id="创建友情链接页面"><a href="#创建友情链接页面" class="headerlink" title="创建友情链接页面"></a>创建友情链接页面</h3><ol><li><p>前往你的 Hexo 博客的根目录</p></li><li><p>輸入 <code>hexo new page link</code></p></li><li><p>你会找到 <code>source/link/index.md</code> 这个文件</p></li><li><p>修改这个文件：</p><p>记得添加 <code>type: &quot;link&quot;</code></p></li></ol><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: 友情链接</span><br><span class="line">date: 2018-06-07 22:17:49</span><br><span class="line">type: &quot;link&quot;</span><br><span class="line">---</span><br></pre></td></tr></table></figure><h3 id="友情链接添加"><a href="#友情链接添加" class="headerlink" title="友情链接添加"></a>友情链接添加</h3><p>在Hexo博客目录中的 <code>source/_data</code>（如果沒有 _data 文件夹，请自行创建），创建一個文件 <code>link.yml</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">- class_name: 友情链接</span><br><span class="line">  class_desc: 那些人，那些事</span><br><span class="line">  link_list:</span><br><span class="line">    - name: Hexo</span><br><span class="line">      link: https://hexo.io/zh-tw/</span><br><span class="line">      avatar: https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg</span><br><span class="line">      descr: 快速、简单且強大的网络框架</span><br><span class="line"></span><br><span class="line">- class_name: 网站</span><br><span class="line">  class_desc: 值得推荐的网站</span><br><span class="line">  link_list:</span><br><span class="line">    - name: Youtube</span><br><span class="line">      link: https://www.youtube.com/</span><br><span class="line">      avatar: https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png</span><br><span class="line">      descr: 视频网站</span><br><span class="line">    - name: Weibo</span><br><span class="line">      link: https://www.weibo.com/</span><br><span class="line">      avatar: https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png</span><br><span class="line">      descr: 中国最大社交分享平台</span><br><span class="line">    - name: Twitter</span><br><span class="line">      link: https://twitter.com/</span><br><span class="line">      avatar: https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png</span><br><span class="line">      descr: 社交分享平台</span><br></pre></td></tr></table></figure><p><code>class_name</code> 和 <code>class_desc</code> 支持 html 格式书写，如不需要，也可以留空。</p><h3 id="友情链接随机排序"><a href="#友情链接随机排序" class="headerlink" title="友情链接随机排序"></a>友情链接随机排序</h3><p>主題支持友情链接随机排序，只需要在顶部 <code>front-matter</code> 添加 <code>random: true</code></p><h3 id="友情链接界面设置"><a href="#友情链接界面设置" class="headerlink" title="友情链接界面设置"></a>友情链接界面设置</h3><p>由 2.2.0 起，友情链接界面可以由用户自己自定义，只需要在友情链接的md檔设置就行，以普通的Markdown格式书写。</p><h2 id="图库"><a href="#图库" class="headerlink" title="图库"></a>图库</h2><p>图库页面只是普通的页面，你只需要 <code>hexo n page xxxxx</code> 创建你的页面就行</p><p>然後使用标签外掛 <a href="https://butterfly.js.org/posts/4aa8abbe/#Gallery%E7%9B%B8%E5%86%8A%E5%9B%BE%E5%BA%93">galleryGroup</a>，具体用法请查看对应的內容。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;div class=&quot;gallery-group-main&quot;&gt;</span><br><span class="line">&#123;% galleryGroup &#x27;壁紙&#x27; &#x27;收藏的一些壁紙&#x27; &#x27;/Gallery/wallpaper&#x27; https://i.loli.net/2019/11/10/T7Mu8Aod3egmC4Q.png %&#125;</span><br><span class="line">&#123;% galleryGroup &#x27;漫威&#x27; &#x27;关于漫威的图片&#x27; &#x27;/Gallery/marvel&#x27; https://i.loli.net/2019/12/25/8t97aVlp4hgyBGu.jpg %&#125;</span><br><span class="line">&#123;% galleryGroup &#x27;OH MY GIRL&#x27; &#x27;关于OH MY GIRL的图片&#x27; &#x27;/Gallery/ohmygirl&#x27; https://i.loli.net/2019/12/25/hOqbQ3BIwa6KWpo.jpg %&#125;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><h3 id="子页面"><a href="#子页面" class="headerlink" title="子页面"></a>子页面</h3><p>子页面也是普通的页面，你只需要 <code>hexo n page xxxxx</code> 创建你的页面就行</p><p>然後使用标签外掛 <a href="https://butterfly.js.org/posts/4aa8abbe/#Gallery%E7%9B%B8%E5%86%8A">gallery</a>，具体用法请查看对应的內容。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;% gallery %&#125;</span><br><span class="line">![](https://i.loli.net/2019/12/25/Fze9jchtnyJXMHN.jpg)</span><br><span class="line">![](https://i.loli.net/2019/12/25/ryLVePaqkYm4TEK.jpg)</span><br><span class="line">![](https://i.loli.net/2019/12/25/gEy5Zc1Ai6VuO4N.jpg)</span><br><span class="line">![](https://i.loli.net/2019/12/25/d6QHbytlSYO4FBG.jpg)</span><br><span class="line">![](https://i.loli.net/2019/12/25/6nepIJ1xTgufatZ.jpg)</span><br><span class="line">![](https://i.loli.net/2019/12/25/E7Jvr4eIPwUNmzq.jpg)</span><br><span class="line">![](https://i.loli.net/2019/12/25/mh19anwBSWIkGlH.jpg)</span><br><span class="line">![](https://i.loli.net/2019/12/25/2tu9JC8ewpBFagv.jpg)</span><br><span class="line">&#123;% endgallery %&#125;</span><br></pre></td></tr></table></figure><blockquote><p>如果你想要使用 <code>/photo/ohmygirl</code> 这样的链接显示你的图片內容</p><p>你可以把创建好的 <code>ohmygirl</code> 整個文件夹移到 <code>photo</code> 文件夹里去</p></blockquote><h2 id="404页面"><a href="#404页面" class="headerlink" title="404页面"></a>404页面</h2><p>主題內置了一個简单的 404 页面，可在设置中开启</p><p>本地预览時，訪問出錯的网站是不会跳到 404 页面的。</p><p>如需本地预览，请訪問 <code>http://localhost:4000/404.html</code></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># A simple 404 page</span><br><span class="line">error_404:</span><br><span class="line">  enable: true</span><br><span class="line">  subtitle: &quot;页面沒有找到&quot;</span><br><span class="line">  background: </span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Flask </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 日志 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Butterfly 主题配置(五)</title>
      <link href="/2024/03/19/Butterfly%20%E4%B8%BB%E9%A2%98%E9%85%8D%E7%BD%AE(%E4%BA%94)/"/>
      <url>/2024/03/19/Butterfly%20%E4%B8%BB%E9%A2%98%E9%85%8D%E7%BD%AE(%E4%BA%94)/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="Butterfly-主题配置-五"><a href="#Butterfly-主题配置-五" class="headerlink" title="Butterfly 主题配置(五)"></a>Butterfly 主题配置(五)</h1><h3 id="搜索"><a href="#搜索" class="headerlink" title="搜索"></a>搜索</h3><div class="tabs" id="test1"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="test1-1">algoliasearch</button><button type="button" class="tab " data-href="test1-2">本地搜索</button><button type="button" class="tab " data-href="test1-3">DocSearch</button></ul><div class="tab-contents"><div class="tab-item-content active" id="test1-1"><blockquote><p>记得运行 hexo clean </p></blockquote><blockquote><p>如果你使用 hexo-algoliasearch，请记得配置 fields 参数的 title, permalink 和 content</p></blockquote><ol><li><p>你需要安装 hexo-algolia或 hexo-algoliasearch. 根据它们的説明文档去做相应的配置。</p></li><li><p>修改 <code>主题配置文件</code></p></li></ol><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">algolia_search:</span><br><span class="line">  enable: true</span><br><span class="line">  hits:</span><br><span class="line">    per_page: 6</span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="test1-2"><blockquote><p>记得运行 hexo clean</p></blockquote><ol><li><p>你需要安装 hexo-generator-searchdb 或者 hexo-generator-search，根据它的文档去做相应配置</p></li><li><p>修改 <code>主题配置文件</code></p></li></ol><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Local search</span></span><br><span class="line">local_search:</span><br><span class="line">  enable: false</span><br><span class="line"><span class="meta prompt_">  # </span><span class="language-bash">Preload the search data when the page loads.</span></span><br><span class="line">  preload: false</span><br><span class="line"><span class="meta prompt_">  # </span><span class="language-bash">Show top n results per article, show all results by setting to -1</span></span><br><span class="line">  top_n_per_article: 1</span><br><span class="line"><span class="meta prompt_">  # </span><span class="language-bash">Unescape html strings to the readable one.</span></span><br><span class="line">  unescape: false</span><br><span class="line">  CDN:</span><br></pre></td></tr></table></figure><table><thead><tr><th>参数</th><th>解释</th></tr></thead><tbody><tr><td>enable</td><td>是否开启本地搜索</td></tr><tr><td>preload</td><td>预加载，开启后，进入网页后会自动加载搜索文件。关闭时，只有点击搜索按钮后，才会加载搜索文件</td></tr><tr><td>top_n_per_article</td><td>匹配的文章结果，默认显示最开始的 1段结果</td></tr><tr><td>unescape</td><td>将 html 字符串解码为可读字符串</td></tr><tr><td>CDN</td><td>搜索文件的 CDN 地址（默认使用的本地链接）</td></tr></tbody></table></div><div class="tab-item-content" id="test1-3"><p>DocSearch 是另一款由 algolia 提供的搜索服务，具体申请和使用请查看 DocSearch 文档</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docsearch:</span><br><span class="line">  enable: false</span><br><span class="line">  appId:</span><br><span class="line">  apiKey:</span><br><span class="line">  indexName:</span><br><span class="line">  option:</span><br></pre></td></tr></table></figure><table><thead><tr><th>参数</th><th>解释</th></tr></thead><tbody><tr><td>enable</td><td>【必须】是否开启 docsearch</td></tr><tr><td>appId</td><td>【必须】你的 Algolia 应用 ID</td></tr><tr><td>apiKey</td><td>【必须】你的 Algolia 搜索 API key</td></tr><tr><td>indexName</td><td>【必须】你的 Algolia index name</td></tr><tr><td>option</td><td>【可选】其余的 docsearch 配置<br/>具体配置可查这里</td></tr></tbody></table><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fhexo-theme-butterfly-docs-docsearch-dcd8ae.png" alt="DocSearch"></p></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div><h3 id="分享"><a href="#分享" class="headerlink" title="分享"></a>分享</h3><blockquote><p>只能选择一个分享服务商</p></blockquote><div class="tabs" id="test1"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="test1-1">sharejs</button><button type="button" class="tab " data-href="test1-2">addtoany</button></ul><div class="tab-contents"><div class="tab-item-content active" id="test1-1"><p>如果你不知道 sharejs，看看它的説明。</p><p>修改 <code>主题配置文件</code></p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sharejs:</span><br><span class="line">  enable: true</span><br><span class="line">  sites: facebook,twitter,wechat,weibo,qq  #想要显示的内容</span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="test1-2"><p>可以到addtoany查看使用説明</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">addtoany:</span><br><span class="line">  enable: true</span><br><span class="line">  item: facebook,twitter,wechat,sina_weibo,facebook_messenger,email,copy_link</span><br></pre></td></tr></table></figure></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div><h3 id="分析统计"><a href="#分析统计" class="headerlink" title="分析统计"></a>分析统计</h3><div class="tabs" id="test1"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="test1-1">百度统计</button><button type="button" class="tab " data-href="test1-2">谷歌分析</button><button type="button" class="tab " data-href="test1-3">Cloudflare</button></ul><div class="tab-contents"><div class="tab-item-content active" id="test1-1"><ol><li>登录百度统计的官方网站</li><li>找到你百度统计的统计代码</li></ol><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fhexo-theme-butterfly-doc-baidu-tongji-1dcdce.jpeg" alt="img"></p><ol start="3"><li>修改 主题配置文件</li></ol><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">baidu_analytics: 你的代码</span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="test1-2"><ol><li>登录百度统计的官方网站</li><li>找到你百度统计的统计代码</li></ol><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fhexo-theme-butterfly-doc-google-analytics-eb178c.jpeg" alt="img"></p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">google_analytics: 你的代码 # 通常以`UA-`打头</span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="test1-3"><ol><li>登录 Cloudflare 分析的官方网站</li><li>找到 JavaScript 程式码片段</li><li>找到你的 token</li></ol><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fhexo-theme-butterfly-docs-cloudflare-analytics-id-a71900.png" alt="image-20201230195158742"></p><ol start="4"><li>修改 主题配置文件</li></ol><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Cloudflare Analytics</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">https://www.cloudflare.com/zh-tw/web-analytics/</span></span><br><span class="line">cloudflare_analytics:</span><br></pre></td></tr></table></figure></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div><h3 id="网站验证"><a href="#网站验证" class="headerlink" title="网站验证"></a>网站验证</h3><p>如果需要搜索引擎收录网站，可能需要登录对应搜索引擎的管理平台进行提交。<br>各自的验证码可从各自管理平台拿到</p><p>修改 <code>主题配置文件</code></p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">site_verification:</span><br><span class="line"><span class="meta prompt_">  # </span><span class="language-bash">- name: google-site-verification</span></span><br><span class="line"><span class="meta prompt_">  # </span><span class="language-bash">  content: xxxxxx</span></span><br><span class="line"><span class="meta prompt_">  # </span><span class="language-bash">- name: baidu-site-verification</span></span><br><span class="line"><span class="meta prompt_">  # </span><span class="language-bash">  content: xxxxxxx</span></span><br></pre></td></tr></table></figure><h3 id="美化-特效"><a href="#美化-特效" class="headerlink" title="美化&#x2F;特效"></a>美化&#x2F;特效</h3><h4 id="自定义主题色"><a href="#自定义主题色" class="headerlink" title="自定义主题色"></a>自定义主题色</h4><p>可以修改大部分UI颜色</p><p>修改 主题配置文件，比如：</p><blockquote><p>颜色值必须被双引号包裹，就像”#000”而不是#000。否则将会在构建的时候报错！</p></blockquote><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">theme_color:</span><br><span class="line">  enable: true</span><br><span class="line">  main: &quot;#49B1F5&quot;</span><br><span class="line">  paginator: &quot;#00c4b6&quot;</span><br><span class="line">  button_hover: &quot;#FF7242&quot;</span><br><span class="line">  text_selection: &quot;#00c4b6&quot;</span><br><span class="line">  link_color: &quot;#99a9bf&quot;</span><br><span class="line">  meta_color: &quot;#858585&quot;</span><br><span class="line">  hr_color: &quot;#A4D8FA&quot;</span><br><span class="line">  code_foreground: &quot;#F47466&quot;</span><br><span class="line">  code_background: &quot;rgba(27, 31, 35, .05)&quot;</span><br><span class="line">  toc_color: &quot;#00c4b6&quot;</span><br><span class="line">  blockquote_padding_color: &quot;#49b1f5&quot;</span><br><span class="line">  blockquote_background_color: &quot;#49b1f5&quot;</span><br><span class="line">  scrollbar_color: &quot;#49b1f5&quot;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fhexo-theme-butterfly-doc-color_1-db763c.png" alt="img"></p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fhexo-theme-butterfly-doc-color_2-ce6242.png" alt="img"></p><h4 id="主页top-img显示大小"><a href="#主页top-img显示大小" class="headerlink" title="主页top_img显示大小"></a>主页top_img显示大小</h4><p>默认的显示为全屏。site-info的区域会居中显示</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">主页设置</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">默认top_img全屏，site_info在中间</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">使用默认, 都无需填写（建议默认）</span></span><br><span class="line">index_site_info_top: # 主页标题距离顶部距离  例如 300px/300em/300rem/10%</span><br><span class="line">index_top_img_height:  #主页top_img高度 例如 300px/300em/300rem  不能使用百分比</span><br></pre></td></tr></table></figure><p>注意：index_top_img_height的值不能使用百分比。<br>2个都不填的话，会使用默认值</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">index_top_img_height: 400px</span><br></pre></td></tr></table></figure><p>效果</p><p><img src="https://jsd.012700.xyz/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-index-top-img-setting.png" alt="img"></p><h4 id="文字左右对齊"><a href="#文字左右对齊" class="headerlink" title="文字左右对齊"></a>文字左右对齊</h4><p>可设置文字向两侧对齊，对最后一行无效</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Stretches the lines so that each line has equal width（文字向两侧对齊，对最后一行无效）</span></span><br><span class="line">text_align_justify: true</span><br></pre></td></tr></table></figure><blockquote><p>text_align_justify: false</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Ftext-align-justify-false-12739c.png" alt="img"></p><blockquote><p>text_align_justify: true</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Ftext-align-justify-true-62cfe4.png" alt="img"></p><h4 id="网站背景"><a href="#网站背景" class="headerlink" title="网站背景"></a>网站背景</h4><p>默认显示白色，可设置图片或者颜色</p><p>修改 <code>主题配置文件</code></p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">图片格式 url(http://xxxxxx.com/xxx.jpg)</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">颜色（HEX值/RGB值/顔色单词/渐变色)</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">留空 不显示背景</span></span><br><span class="line">background:</span><br></pre></td></tr></table></figure><p>留意: 如果你的网站根目录不是’&#x2F;‘,使用本地图片时，需加上你的根目录。<br>例如：网站是 <a href="https://yoursite.com/blog,%E5%BC%95%E7%94%A8%E4%B8%80%E5%BC%A0img/xx.png%E5%9B%BE%E7%89%87%EF%BC%8C%E5%88%99%E8%AE%BE%E7%BD%AEbackground%E4%B8%BA">https://yoursite.com/blog,引用一张img/xx.png图片，则设置background为</a> &#96;url(&#x2F;blog&#x2F;img&#x2F;xx.png)</p><blockquote><p>background:’#49B202’</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fhexo-theme-butterfly-doc-set-body-background-color-8b4fe8.png" alt="img"></p><blockquote><p>background: url(<a href="https://i.loli.net/2019/09/09/5oDRkWVKctx2b6A.png">https://i.loli.net/2019/09/09/5oDRkWVKctx2b6A.png</a>)</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fhexo-theme-butterfly-doc-set-body-background-img-c7f555.png" alt="img"></p><h4 id="footer-背景"><a href="#footer-背景" class="headerlink" title="footer 背景"></a>footer 背景</h4><p>修改 <code>主题配置文件</code></p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">footer是否显示图片背景(与top_img一致)</span></span><br><span class="line">footer_bg: true</span><br></pre></td></tr></table></figure><table><thead><tr><th>配置的值</th><th>效果</th></tr></thead><tbody><tr><td>留空&#x2F;false</td><td>显示默认的顔色</td></tr><tr><td>img链接</td><td>图片的链接，显示所配置的图片</td></tr><tr><td>顔色(<br/>HEX值 - #0000FF<br/>RGB值 - rgb(0,0,255)<br/>顔色单词 - orange<br/>渐变色 - linear-gradient( 135deg, #E2B0FF 10%, #9F44D3 100%)<br/>）</td><td>对应的顔色</td></tr><tr><td>true</td><td>显示跟 top_img 一样</td></tr></tbody></table><blockquote><p>true</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fhexo-theme-butterfly-doc-footer-img-533c3b.png" alt="img"></p><h4 id="背景特效"><a href="#背景特效" class="headerlink" title="背景特效"></a>背景特效</h4><div class="tabs" id="test1"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="test1-1">静止彩带</button><button type="button" class="tab " data-href="test1-2">动态彩带</button><button type="button" class="tab " data-href="test1-3">canvas-nest</button></ul><div class="tab-contents"><div class="tab-item-content active" id="test1-1"><p>好看的綵带背景，可设置每次刷新更换彩带，或者每次点击更换彩带<br>修改 <code>主题配置文件</code></p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">canvas_ribbon:</span><br><span class="line">  enable: false</span><br><span class="line">  size: 150</span><br><span class="line">  alpha: 0.6</span><br><span class="line">  zIndex: -1</span><br><span class="line">  click_to_change: false  #设置是否每次点击都更换綵带</span><br><span class="line">  mobile: false # false 手机端不显示 true 手机端显示</span><br></pre></td></tr></table></figure><p>相关配置可查看canvas_ribbon</p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fhexo-theme-butterfly-docs-canvas-ribbon-637c1f.png" alt="img"></p></div><div class="tab-item-content" id="test1-2"><p>好看的綵带背景，会飘动<br>修改 <code>主题配置文件</code></p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">canvas_fluttering_ribbon:</span><br><span class="line">  enable: true</span><br><span class="line">  mobile: false # false 手机端不显示 true 手机端显示</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fhexo-theme-butterfly-doc-canvas-ribbon-piao-bd105a.gif" alt="img">****</p></div><div class="tab-item-content" id="test1-3"><p>修改 <code>主题配置文件</code></p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">canvas_nest:</span><br><span class="line">  enable: true</span><br><span class="line">  color: &#x27;0,0,255&#x27; #color of lines, default: &#x27;0,0,0&#x27;; RGB values: (R,G,B).(note: use &#x27;,&#x27; to separate.)</span><br><span class="line">  opacity: 0.7 # the opacity of line (0~1), default: 0.5.</span><br><span class="line">  zIndex: -1 # z-index property of the background, default: -1.</span><br><span class="line">  count: 99 # the number of lines, default: 99.</span><br><span class="line">  mobile: false # false 手机端不显示 true 手机端显示</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fhexo-theme-butterfly-doc-canvas_nest-40b815.gif" alt="img"></p></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div><h4 id="自定义字体和字体大小"><a href="#自定义字体和字体大小" class="headerlink" title="自定义字体和字体大小"></a>自定义字体和字体大小</h4><h5 id="全局字体"><a href="#全局字体" class="headerlink" title="全局字体"></a>全局字体</h5><p>可自行设置字体的font-family<br>如不需要配置，请留空</p><p>修改 <code>主题配置文件</code></p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Global font settings</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Don<span class="string">&#x27;t modify the following settings unless you know how they work (非必要不要修改)</span></span></span><br><span class="line">font:</span><br><span class="line">  global-font-size:</span><br><span class="line">  code-font-size:</span><br><span class="line">  font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, &quot;Helvetica Neue&quot;, Lato, Roboto, &quot;PingFang SC&quot;, &quot;Microsoft JhengHei&quot;, &quot;Microsoft YaHei&quot;, sans-serif</span><br><span class="line">  code-font-family: consolas, Menlo, &quot;PingFang SC&quot;, &quot;Microsoft JhengHei&quot;, &quot;Microsoft YaHei&quot;, sans-serif</span><br></pre></td></tr></table></figure><h5 id="Blog-标题字体"><a href="#Blog-标题字体" class="headerlink" title="Blog 标题字体"></a>Blog 标题字体</h5><p>可自行设置字体的font-family<br>如不需要配置，请留空。<br>如不需要使用网络字体，只需要把font_link留空就行</p><p>修改 <code>主题配置文件</code></p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Font settings <span class="keyword">for</span> the site title and site subtitle</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">左上角网站名字 主页居中网站名字</span></span><br><span class="line">blog_title_font:</span><br><span class="line">  font_link: https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap</span><br><span class="line">  font-family: Titillium Web, &#x27;PingFang SC&#x27;, &#x27;Hiragino Sans GB&#x27;, &#x27;Microsoft JhengHei&#x27;, &#x27;Microsoft YaHei&#x27;, sans-serif</span><br></pre></td></tr></table></figure><h5 id="网站副标题"><a href="#网站副标题" class="headerlink" title="网站副标题"></a>网站副标题</h5><p>可设置主页中显示的网站副标题或者喜欢的座右铭。</p><p>修改 <code>主题配置文件</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">主页subtitle</span></span><br><span class="line">subtitle:</span><br><span class="line">  enable: false</span><br><span class="line"><span class="meta prompt_">  # </span><span class="language-bash">Typewriter Effect (打字效果)</span></span><br><span class="line">  effect: true</span><br><span class="line">  startDelay: 300 # time before typing starts in milliseconds</span><br><span class="line">  typeSpeed: 150 # type speed in milliseconds</span><br><span class="line">  backSpeed: 50 # backspacing speed in milliseconds</span><br><span class="line"><span class="meta prompt_">  # </span><span class="language-bash">loop (循环打字)</span></span><br><span class="line">  loop: true</span><br><span class="line"><span class="meta prompt_">  # </span><span class="language-bash"><span class="built_in">source</span> 调用第三方服务</span></span><br><span class="line"><span class="meta prompt_">  # </span><span class="language-bash"><span class="built_in">source</span>: <span class="literal">false</span> 关闭调用</span></span><br><span class="line"><span class="meta prompt_">  # </span><span class="language-bash"><span class="built_in">source</span>: 1  调用一言网的一句话（简体） https://hitokoto.cn/</span></span><br><span class="line"><span class="meta prompt_">  # </span><span class="language-bash"><span class="built_in">source</span>: 2  调用一句网（简体） http://yijuzhan.com/</span></span><br><span class="line"><span class="meta prompt_">  # </span><span class="language-bash"><span class="built_in">source</span>: 3  调用今日诗词（简体） https://www.jinrishici.com/</span></span><br><span class="line"><span class="meta prompt_">  # </span><span class="language-bash">subtitle 会先显示 <span class="built_in">source</span> , 再显示 sub 的内容</span></span><br><span class="line">  source: false</span><br><span class="line"><span class="meta prompt_">  # </span><span class="language-bash">如果关闭打字效果，subtitle 只会显示 sub 的第一行文字</span></span><br><span class="line">  sub:</span><br><span class="line">    - 今日事&amp;#44;今日毕</span><br><span class="line">    - Never put off till tomorrow what you can do today</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fhexo-theme-butterfly-doc-index-subtitle-a2197a.gif" alt="img"></p><h5 id="页面加载动画-preloader"><a href="#页面加载动画-preloader" class="headerlink" title="页面加载动画 preloader"></a>页面加载动画 preloader</h5><p>当进入网页时，因为加载速度的问题，可能会导致 top_img 图片出现断层显示，或者网页加载不全而出现等待时间，开启preloader后，会显示加载动画，等页面加载完，加载动画会消失。</p><p>主题支持 pace.js 的加载动画，具体可查看 pace.js</p><p>配置 <code>butterly.yml</code></p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">加载动画 Loading Animation</span></span><br><span class="line">preloader:</span><br><span class="line">  enable: false</span><br><span class="line"><span class="meta prompt_">  # </span><span class="language-bash"><span class="built_in">source</span></span></span><br><span class="line"><span class="meta prompt_">  # </span><span class="language-bash">1. fullpage-loading</span></span><br><span class="line"><span class="meta prompt_">  # </span><span class="language-bash">2. pace (progress bar)</span></span><br><span class="line">  source: 1</span><br><span class="line"><span class="meta prompt_">  # </span><span class="language-bash">pace theme (see https://codebyzach.github.io/pace/)</span></span><br><span class="line">  pace_css_url:</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fhexo-theme-butterfly-docs-preloader-f63c0f.gif" alt="img"></p><h3 id="字数统计"><a href="#字数统计" class="headerlink" title="字数统计"></a>字数统计</h3><p>要为Butterfly配上字数统计特性, 你需要如下几个步骤:</p><ol><li><p>打开 hexo 工作目录</p></li><li><p><code>npm install hexo-wordcount --save</code> or <code>yarn add hexo-wordcount</code></p></li><li><p>修改 <code>主题配置文件</code>:</p></li></ol><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">wordcount:</span><br><span class="line">  enable: true</span><br><span class="line">  post_wordcount: true</span><br><span class="line">  min2read: true</span><br><span class="line">  total_wordcount: true</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fhexo-theme-butterfly-doc-word-count-80891b.png" alt="img"></p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fhexo-theme-butterfly-docs-wordcount-totalcount-690ba1.png" alt="img"></p><h3 id="图片大图查看模式"><a href="#图片大图查看模式" class="headerlink" title="图片大图查看模式"></a>图片大图查看模式</h3><div class="tabs" id="test1"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="test1-1">注意</button><button type="button" class="tab " data-href="test1-2">静止彩带</button><button type="button" class="tab " data-href="test1-3">medium_zoom</button></ul><div class="tab-contents"><div class="tab-item-content active" id="test1-1"><p>如果你并不想为某张图片添加大图查看模式，你可以使用 html 格式引用图片，併为图片添加 no-lightbox class 名。</p></div><div class="tab-item-content" id="test1-2"><p>修改 <code>主题配置文件</code></p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">fancybox http://fancyapps.com/fancybox/3/</span></span><br><span class="line">fancybox: true</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Ffancybox-9aa32f.gif" alt="fancybox.gif"></p></div><div class="tab-item-content" id="test1-3"><p>修改 <code>主题配置文件</code></p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">medium_zoom: true</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fmedium_zoom-773609.gif" alt="medium_zoom.gif"></p></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div><h3 id="Instantpage"><a href="#Instantpage" class="headerlink" title="Instantpage"></a>Instantpage</h3><p>当鼠标悬停到链接上超过 65 毫秒时，Instantpage 会对该链接进行预加载，可以提升访问速度。</p><p>修改<code>配置文件</code></p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">https://instant.page/</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">prefetch (预加载)</span></span><br><span class="line">instantpage: true</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Flask </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 日志 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Butterfly 主题配置(三)</title>
      <link href="/2024/03/19/Butterfly%20%E4%B8%BB%E9%A2%98%E9%85%8D%E7%BD%AE(%E4%B8%89)/"/>
      <url>/2024/03/19/Butterfly%20%E4%B8%BB%E9%A2%98%E9%85%8D%E7%BD%AE(%E4%B8%89)/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="Butterfly-主题配置-三"><a href="#Butterfly-主题配置-三" class="headerlink" title="Butterfly 主题配置(三)"></a>Butterfly 主题配置(三)</h1><h2 id="语言"><a href="#语言" class="headerlink" title="语言"></a>语言</h2><p>修改站点配置文件 <code>_config.yml</code></p><p>默认語言是 en</p><p>主题支持三种語言</p><ul><li>default(en)</li><li>zh-CN (简体中文)</li><li>zh-TW (繁体中文)</li></ul><h2 id="网站资料"><a href="#网站资料" class="headerlink" title="网站资料"></a>网站资料</h2><p>修改网站各种资料，例如标题、副标题和邮箱等个人资料，请修改博客根目录的_config.yml</p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2F20191120000444-185238.png" alt="img"></p><h3 id="导航栏设置-Navigation-bar-settings"><a href="#导航栏设置-Navigation-bar-settings" class="headerlink" title="导航栏设置 (Navigation bar settings)"></a>导航栏设置 (Navigation bar settings)</h3><h4 id="参数设置"><a href="#参数设置" class="headerlink" title="参数设置"></a>参数设置</h4><p>主题配置文件中</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">nav:</span><br><span class="line">  logo: #image</span><br><span class="line">  display_title: true</span><br><span class="line">  fixed: false # fixed navigation bar</span><br></pre></td></tr></table></figure><table><thead><tr><th>参数</th><th>解释</th></tr></thead><tbody><tr><td>logo</td><td>网站的 logo，支持图片，直接填入图片链接</td></tr><tr><td>display_title</td><td>是否显示网站标题，填写 true 或者 false</td></tr><tr><td>fixed</td><td>是否固定狀态栏，填写 true 或者 false</td></tr></tbody></table><h4 id="菜单-目录"><a href="#菜单-目录" class="headerlink" title="菜单&#x2F;目录"></a>菜单&#x2F;目录</h4><p>修改<code>主题配置文件</code></p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">Home: / || fas fa-home</span><br><span class="line">Archives: /archives/ || fas fa-archive</span><br><span class="line">Tags: /tags/ || fas fa-tags</span><br><span class="line">Categories: /categories/ || fas fa-folder-open</span><br><span class="line">List||fas fa-list:</span><br><span class="line">  Music: /music/ || fas fa-music</span><br><span class="line">  Movie: /movies/ || fas fa-video</span><br><span class="line">Link: /link/ || fas fa-link</span><br><span class="line">About: /about/ || fas fa-heart</span><br></pre></td></tr></table></figure><p>必须是 <code>/xxx/</code>，后面<code>||</code>分开，然后写图标名。</p><p>如果不希望显示图标，图标名可不写。</p><p>默认子目录是展开的，如果你想要隐藏，在子目录里添加 hide 。</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">List||fas fa-list||hide:</span><br><span class="line">  Music: /music/ || fas fa-music</span><br><span class="line">  Movie: /movies/ || fas fa-video</span><br></pre></td></tr></table></figure><p>注意： 导航的文字可自行更改</p><p>例如：</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">menu:</span><br><span class="line">  首页: / || fas fa-home</span><br><span class="line">  时间轴: /archives/ || fas fa-archive</span><br><span class="line">  标签: /tags/ || fas fa-tags</span><br><span class="line">  分类: /categories/ || fas fa-folder-open</span><br><span class="line">  清单||fa fa-heartbeat:</span><br><span class="line">    音乐: /music/ || fas fa-music</span><br><span class="line">    照片: /Gallery/ || fas fa-images</span><br><span class="line">    电影: /movies/ || fas fa-video</span><br><span class="line">  友链: /link/ || fas fa-link</span><br><span class="line">  关于: /about/ || fas fa-heart</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fhexo-theme-butterfly-doc-menu-c914db.png" alt="img"></p><h3 id="代码-Code-Blocks"><a href="#代码-Code-Blocks" class="headerlink" title="代码 (Code Blocks)"></a>代码 (Code Blocks)</h3><blockquote><p>代码块中的所有功能只适用于 Hexo 自帶的代码渲染</p><p>如果使用第三方的渲染器，不一定会有效</p></blockquote><ul><li>Butterfly 支持6种代码高亮樣式：<ul><li><code>darker</code></li><li><code>pale night</code></li><li><code>light</code></li><li><code>ocean</code></li><li><code>mac</code></li><li><code>mac light</code></li></ul></li></ul><p>修改 主题配置文件</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">highlight_theme: light</span><br></pre></td></tr></table></figure><blockquote><ul><li>darker</li></ul><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fhexo-theme-butterfly-doc-code-darker-188e05.png" alt="img"></p><ul><li>pale night</li></ul><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fhexo-theme-butterfly-doc-code-pale-night-6b75a2.png" alt="img"></p><ul><li>light</li></ul><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fhexo-theme-butterfly-doc-code-light-44a831.png" alt="img"></p><ul><li>ocean</li></ul><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fhexo-theme-butterfly-doc-highlight-ocean-da54f0.png" alt="img"></p><ul><li>mac</li></ul><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fhexo-theme-butterfly-doc-highlight-mac-f62cb8.png" alt="img"></p><ul><li>mac light</li></ul><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fhexo-theme-butterfly-docs-mac-light-5fcfad.png" alt="image-20200731175026827"></p></blockquote><h4 id="代码复制"><a href="#代码复制" class="headerlink" title="代码复制"></a>代码复制</h4><p>主题支持代码复制功能</p><p>修改 <code>主题配置文件</code></p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">highlight_copy: true</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fhexo-theme-butterfly-doc-code-copy-8562b8.png" alt="img"></p><h4 id="代码框展开-开关"><a href="#代码框展开-开关" class="headerlink" title="代码框展开&#x2F;开关"></a>代码框展开&#x2F;开关</h4><p>在默认情况下，代码框自动展开，可设置是否所有代码框都开关狀态，点击 <code>&gt;</code> 可展开代码</p><ul><li>true 全部代码框不展开，需点击 <code>&gt;</code> 打开</li><li>false 代码框展开，有 <code>&gt;</code> 点击按钮</li><li>none 不显示 <code>&gt;</code> 按钮</li></ul><p>修改 <code>主题配置文件</code></p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">highlight_shrink: true #代码框不展开，需点击 &#x27;&gt;&#x27; 打开</span><br></pre></td></tr></table></figure><blockquote><p>你也可以在post&#x2F;page页对应的markdown文件 <code>front-matter</code> 添加<code>highlight_shrink</code> 来读立配置。</p><p>当主题配置文件中的 <code>highlight_shrink</code> 设为true时，可在<code>front-matter</code>添加<code>highlight_shrink: false</code>来单读配置文章展开代码框。</p><p>当主题配置文件中的 <code>highlight_shrink</code> 设为false时，可在<code>front-matter</code>添加<code>highlight_shrink: true</code>来单读配置文章收缩代码框。</p></blockquote><blockquote><ul><li>highlight_shrink: true</li></ul><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fhexo-theme-butterfly-doc-highlight-shrink-true-f36dab.png" alt="img"></p><ul><li>highlight_shrink: false</li></ul><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fhexo-theme-butterfly-doc-highlight-shrink-false-7abb2d.png" alt="img"></p><ul><li>highlight_shrink: none</li></ul><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fhexo-theme-butterfly-docs-highlight-shirk-none-f66b39.png" alt="img"></p></blockquote><h4 id="代码换行"><a href="#代码换行" class="headerlink" title="代码换行"></a>代码换行</h4><p>在默认情况下，Hexo 在编译的时候不会实现代码自动换行。如果你不希望在代码块的区域里有橫向滚动条的话，那么你可以考虑开启这个功能。</p><p>修改 <code>主题配置文件</code></p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">code_word_wrap: true</span><br></pre></td></tr></table></figure><p>如果你是使用 highlight 渲染，需要找到你站点的 Hexo 配置文件_config.yml，将line_number改成false:</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">highlight:</span><br><span class="line">  enable: true</span><br><span class="line">  line_number: false # &lt;- 改这里</span><br><span class="line">  auto_detect: false</span><br><span class="line">  tab_replace:</span><br></pre></td></tr></table></figure><p>如果你是使用 prismjs 渲染，需要找到你站点的 Hexo 配置文件_config.yml，将line_number改成false:</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">prismjs:</span><br><span class="line">  enable: false</span><br><span class="line">  preprocess: true</span><br><span class="line">  line_number: false # &lt;- 改这里</span><br><span class="line">  tab_replace: &#x27;&#x27;</span><br></pre></td></tr></table></figure><p>设置code_word_wrap之前:</p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fhexo-theme-butterfly-doc-code-word-wrap-before-f5e26c.png" alt="img"></p><p>设置code_word_wrap之后:</p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fhexo-theme-butterfly-doc-code-word-wrap-after-a0569a.png" alt="img"></p><h4 id="代码高度限制"><a href="#代码高度限制" class="headerlink" title="代码高度限制"></a>代码高度限制</h4><p>3.7.0 及以上支持</p><p>可配置代码高度限制，超出的部分会隐藏，并显示展开按钮。</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">highlight_height_limit: false # unit: px</span><br></pre></td></tr></table></figure><p>注意：</p><ol><li><p>单位是 px，直接添加数字，如 200</p></li><li><p>实际限制高度为 <code>highlight_height_limit</code> + 30 px ，多增加 30px 限制，目的是避免代码高度只超出<code>highlight_height_limit</code> 一点时，出现展开按钮，展开沒內容。</p></li><li><p>不适用于隐藏后的代码块（ css 设置 display: none）</p></li></ol><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fhexo-theme-butterfly-docs-highlight-heigh-limit-6de8bd.gif" alt="hexo-theme-butterfly-docs-highlight-heigh-limit"></p><h3 id="社交图标-Social-Settings"><a href="#社交图标-Social-Settings" class="headerlink" title="社交图标 (Social Settings)"></a>社交图标 (Social Settings)</h3><p>Butterfly支持 font-awesome v6 图标.</p><p>书写格式 图标名：url || 描述性文字 || color</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">social:</span><br><span class="line">  fab fa-github: https://github.com/xxxxx || Github || &quot;#hdhfbb&quot;</span><br><span class="line">  fas fa-envelope: mailto:xxxxxx@gmail.com || Email || &quot;#000000&quot;</span><br></pre></td></tr></table></figure><p>图标名可在这尋找</p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fhexo-theme-butterfly-doc-fontawesome-ec4d4b.png" alt="img"></p><p>PC:</p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fhexo-theme-butterfly-doc-social-icon-pc-6228d1.png" alt="img"></p><p>Mobile:</p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fhexo-theme-butterfly-doc-socila-icon-mobile-aea91a.png" alt="1560603353743"></p><h3 id="头像"><a href="#头像" class="headerlink" title="头像"></a>头像</h3><p>修改 <code>主题配置文件</code></p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">avatar:</span><br><span class="line">  img: /img/avatar.png</span><br><span class="line">  effect: true # 头像会一直转圈</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fhexo-theme-butterfly-doc-avatar-acd739.png" alt="img"></p><h3 id="顶部图"><a href="#顶部图" class="headerlink" title="顶部图"></a>顶部图</h3><blockquote><ul><li>如果不要显示顶部图，可直接配置 disable_top_img: true</li></ul><p>顶部图的获取顺序，如果都沒有配置，则不显示顶部图。</p><ul><li><p>页面顶部图的获取顺序：</p><ul><li>各自配置的 top_img &gt; 配置文件的 default_top_img</li></ul></li><li><p>文章页顶部图的获取顺序：</p><ul><li>各自配置的 top_img &gt; cover &gt; 配置文件的 default_top_img</li></ul></li></ul></blockquote><p>配置中的值：</p><table><thead><tr><th>配置</th><th>解释</th></tr></thead><tbody><tr><td>index_img</td><td>主页的 top_img</td></tr><tr><td>default_top_img</td><td>默认的 top_img，当页面的 top_img 沒有配置时，会显示 default_top_img</td></tr><tr><td>archive_img</td><td>归档页面的 top_img</td></tr><tr><td>tag_img</td><td>tag 子页面 的 默认 top_img</td></tr><tr><td>tag_per_img</td><td>tag 子页面的 top_img，可配置每个 tag 的 top_img</td></tr><tr><td>category_img</td><td>category 子页面 的 默认 top_img</td></tr><tr><td>category_per_img</td><td>category 子页面的 top_img，可配置每个 category 的 top_img</td></tr></tbody></table><p>其它页面 （tags&#x2F;categories&#x2F;自建页面）和 文章页 的 <code>top_img</code> ，请到对应的 md 页面设置<code>front-matter</code>中的<code>top_img</code></p><p>以上所有的 top_img 可配置以下值</p><blockquote><p>3.2.0 以下版本的配置只支持</p><ul><li>留空，true 和 false - 显示默认的顔色</li><li>img链接 - 显示所配置的图片</li></ul></blockquote><table><thead><tr><th>配置的值</th><th>效果</th></tr></thead><tbody><tr><td>留空</td><td>显示默认的 top_img（如有），否则显示默认的顔色<br/>（文章页top_img留空的话，会显示 cover 的值）</td></tr><tr><td>img链接</td><td>图片的链接，显示所配置的图片</td></tr><tr><td>顔色(<br/>HEX值 - #0000FF<br/>RGB值 - rgb(0,0,255)<br/>顔色单詞 - orange<br/>渐变色 - linear-gradient( 135deg, #E2B0FF 10%, #9F44D3 100%)<br/>）</td><td>对应的顔色</td></tr><tr><td>transparent</td><td>透明</td></tr><tr><td>false</td><td>不显示 top_img</td></tr></tbody></table><p>tag_per_img 和 category_per_img 是 3.2.0 新增的內容，可对 tag 和 category 进行单读的配置</p><p>并不推荐为每个 tag 和每个 category 都配置不同的顶部图，因为配置太多会拖慢生成速度</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">tag_per_img:</span><br><span class="line">  aplayer: https://xxxxxx.png</span><br><span class="line">  android: ddddddd.png</span><br><span class="line">  </span><br><span class="line">category_per_img：</span><br><span class="line">  随想: hdhdh.png</span><br><span class="line">  推荐: ddjdjdjd.png</span><br></pre></td></tr></table></figure><blockquote><ul><li>top_img: false</li></ul><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Ftheme-butterfly-docs-page-top-img-false-e13478.png" alt="image-20200924224536013"></p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Ftheme-butterfly-docs-post-top-img-false-new-a6f180.png" alt="image-20201027210949089"></p><ul><li>top_img: orange</li></ul><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Ftheme-butterfly-docs-top-img-orange-e39308.png" alt="image-20200924225024153"></p><ul><li>top_img: ‘linear-gradient(20deg, #0062be, #925696, #cc426e, #fb0347)’</li></ul><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Ftheme-butterfly-docs-top-img-color-ad7883.png" alt="image-20200924225300934"></p></blockquote><h3 id="文章封面"><a href="#文章封面" class="headerlink" title="文章封面"></a>文章封面</h3><p>文章的 markdown 文檔上,在 <code>Front-matter</code> 添加 <code>cover</code> ,并填上要显示的图片地址。</p><p>如果不配置 <code>cover</code>,可以设置显示默认的 <code>cover</code>。</p><p>如果不想在首页显示 <code>cover</code>, 可以设置为 <code>false</code>。</p><blockquote><p>文章封面的获取顺序 Front-matter 的 cover &gt; 配置文件的 default_cover &gt; false</p></blockquote><p>修改 <code>主题配置文件</code></p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cover:</span><br><span class="line"><span class="meta prompt_">  # </span><span class="language-bash">是否显示文章封面</span></span><br><span class="line">  index_enable: true</span><br><span class="line">  aside_enable: true</span><br><span class="line">  archives_enable: true</span><br><span class="line"><span class="meta prompt_">  # </span><span class="language-bash">封面显示的位置</span></span><br><span class="line"><span class="meta prompt_">  # </span><span class="language-bash">三个值可配置 left , right , both</span></span><br><span class="line">  position: both</span><br><span class="line"><span class="meta prompt_">  # </span><span class="language-bash">当沒有设置cover时，默认的封面显示</span></span><br><span class="line">  default_cover: </span><br></pre></td></tr></table></figure><table><thead><tr><th>参数</th><th>解释</th></tr></thead><tbody><tr><td>index_enable</td><td>主页是否显示文章封面图</td></tr><tr><td>aside_enable</td><td>侧栏是否显示文章封面图</td></tr><tr><td>archives_enable</td><td>归档页面是否显示文章封面图</td></tr><tr><td>position</td><td>主页卡片文章封面的显示位置<br/>left：全部显示在左边<br/>right：全部显示在右边<br/>both：封面位置以左右左右轮流显示</td></tr><tr><td>default_cover</td><td>默认的 cover, 可配置图片链接&#x2F;顔色&#x2F;渐变色等</td></tr></tbody></table><p>当配置多张图片时,会随机选择一张作为cover.此时写法应为</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">default_cover:</span><br><span class="line">  - https://jsd.012700.xyz/gh/jerryc127/CDN@latest/cover/default_bg.png</span><br><span class="line">  - https://jsd.012700.xyz/gh/jerryc127/CDN@latest/cover/default_bg2.png</span><br><span class="line">  - https://jsd.012700.xyz/gh/jerryc127/CDN@latest/cover/default_bg3.png</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fhexo-theme-butterfly-doc-post-cover-ad06b7.png" alt="img"></p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fhexo-theme-butterfly-doc-post-cover-show-9a8c78.png" alt="img"></p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fhexo-theme-butterfly-docs-cover-false-b80add.png" alt="img"></p><blockquote><ul><li>left</li></ul><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fhexo-theme-butterfly-docs-cover-left-cd0c48.png" alt="img"></p><ul><li>right</li></ul><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fhexo-theme-butterfly-docs-cover-right-7914d8.png" alt="img"></p><ul><li>both</li></ul><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fhexo-theme-butterfly-docs-cover-both-dee8ea.png" alt="img"></p></blockquote><h3 id="页面-meta-显示"><a href="#页面-meta-显示" class="headerlink" title="页面 meta 显示"></a>页面 meta 显示</h3><p>这个选项是用来显示文章的相关信息的。</p><p>修改 <code>主题配置文件</code></p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">post_meta:</span><br><span class="line">  page:</span><br><span class="line">    date_type: both # created or updated or both 主页文章日期是创建日或者更新日或都显示</span><br><span class="line">    date_format: relative # date/relative 显示日期还是相对日期</span><br><span class="line">    categories: true # true or false 主页是否显示分类</span><br><span class="line">    tags: true # true or false 主页是否显示标签</span><br><span class="line">    label: true # true or false 显示描述性文字</span><br><span class="line">  post:</span><br><span class="line">    date_type: both # created or updated or both 文章页日期是创建日或者更新日或都显示</span><br><span class="line">    date_format: relative # date/relative 显示日期还是相对日期</span><br><span class="line">    categories: true # true or false 文章页是否显示分类</span><br><span class="line">    tags: true # true or false 文章页是否显示标签</span><br><span class="line">    label: true # true or false 显示描述性文字</span><br></pre></td></tr></table></figure><blockquote><ul><li>主页</li></ul><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fhexo-theme-butterfly-docs-page-meta-78975c.png" alt="img"></p><ul><li>文章页</li></ul><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fhexo-theme-butterfly-doc-post-info-522d36.png" alt="img"></p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fhexo-theme-butterfly-doc-post-tag-cea65e.png" alt="img"></p><p>date_format 是 3.2.0 新增的內容，配置时间显示明确时间还是相对时间</p><p>相对时间</p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Ftheme-butterfly-docs-relative-time-9fccb5.png" alt="image-20200928201701560"></p><p>明确时间</p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Ftheme-butterfly-docs-full-date-3061d1.png" alt="image-20200928201911032"></p></blockquote><h3 id="主页文章节选-自动节选和文章页description"><a href="#主页文章节选-自动节选和文章页description" class="headerlink" title="主页文章节选(自动节选和文章页description)"></a>主页文章节选(自动节选和文章页description)</h3><p>因为主题UI的关係，<code>主页文章节选</code>只支持<code>自动节选</code>和<code>文章页description</code>。</p><p>在<code>butterfly</code>里，有四种可供选择</p><ul><li>description： 只显示description</li><li>both： 优先选择description，如果沒有配置description，则显示自动节选的內容</li><li>auto_excerpt：只显示自动节选</li><li>false： 不显示文章內容</li></ul><p>修改 <code>主题配置文件</code></p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">index_post_content:</span><br><span class="line">  method: 3</span><br><span class="line">  length: 500 # if you set method to 2 or 3, the length need to config</span><br></pre></td></tr></table></figure><p>description在front-matter里添加</p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fhexo-theme-butterfly-doc-post-description-7555d3.png" alt="img"></p><h3 id="页面锚点"><a href="#页面锚点" class="headerlink" title="页面锚点"></a>页面锚点</h3><p>开启页面锚点后，当你在进行滚动时，页面链接会根据标题ID进行替换<br>(注意: 每替换一次，会留下一个历史记录。所以如果一篇文章有很多锚点的话，网页的历史记录会很多。)</p><p>修改 <code>主题配置文件</code></p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">anchor</span></span><br><span class="line">anchor:</span><br><span class="line"><span class="meta prompt_">  # </span><span class="language-bash">when you scroll, the URL will update according to header <span class="built_in">id</span>.</span></span><br><span class="line">  auto_update: false</span><br><span class="line"><span class="meta prompt_">  # </span><span class="language-bash">Click the headline to scroll and update the anchor</span></span><br><span class="line">  click_to_scroll: false</span><br></pre></td></tr></table></figure><h3 id="图片描述"><a href="#图片描述" class="headerlink" title="图片描述"></a>图片描述</h3><p>可开启图片Figcaption描述文字显示</p><p>优先显示图片的 title 属性，然后是 alt 属性</p><p>修改 <code>主题配置文件</code></p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">photofigcaption: true</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fhexo-theme-butterfly-docs-photo-figcaption-512f4f.png" alt="img"></p><h3 id="复制相关配置"><a href="#复制相关配置" class="headerlink" title="复制相关配置"></a>复制相关配置</h3><p>可配置网站是否可以复制、复制的內容是否添加版权信息</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">copy settings</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">copyright: Add the copyright information after copied content (复制的內容后面加上版权信息)</span></span><br><span class="line">copy:</span><br><span class="line">  enable: true</span><br><span class="line">  copyright:</span><br><span class="line">    enable: true</span><br><span class="line">    limit_count: 50</span><br></pre></td></tr></table></figure><table><thead><tr><th>配置</th><th>解释</th></tr></thead><tbody><tr><td>enable</td><td>是否开启网站复制权限</td></tr><tr><td>copyright</td><td>复制的內容后面加上版权信息</td></tr><tr><td>enable</td><td>是否开启复制版权信息添加</td></tr><tr><td>limit_count</td><td>字数限制，当复制文字大于这个字数限制时，将在复制的內容后面加上版权信息</td></tr></tbody></table><p>添加版权信息后</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">Lorem ipsum dolor sit amet, test link consectetur adipiscing elit. Strong text pellentesque ligula commodo viverra vehicula. Italic text at ullamcorper enim. Morbi a euismod nibh. Underline text non elit nisl. Deleted text tristique, sem id condimentum tempus, metus lectus venenatis mauris, sit amet semper lorem felis a eros. Fusce egestas nibh at sagittis auctor. Sed ultricies ac arcu quis molestie. Donec dapibus nunc in nibh egestas, vitae volutpat sem iaculis. Curabitur sem tellus, elementum nec quam id, fermentum laoreet mi. Ut mollis ullamcorper turpis, vitae facilisis velit ultricies sit amet. Etiam laoreet dui odio, id tempus justo tincidunt id. Phasellus scelerisque nunc sed nunc ultricies accumsan.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">作者: Jerry</span><br><span class="line">連结: http://localhost:4000/posts/bd3c650b/#Paragraph</span><br><span class="line">来源: Butterfly</span><br><span class="line">著作权归作者所有。商业转载请联络作者获得授权，非商业转载请註明出处。</span><br></pre></td></tr></table></figure><h3 id="文章页相关配置"><a href="#文章页相关配置" class="headerlink" title="文章页相关配置"></a>文章页相关配置</h3><h4 id="文章版权"><a href="#文章版权" class="headerlink" title="文章版权"></a>文章版权</h4><p>为你的博客文章展示文章版权和许可协议。</p><p>修改 <code>主题配置文件</code></p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">post_copyright:</span><br><span class="line">  enable: true</span><br><span class="line">  decode: false</span><br><span class="line">  author_href:</span><br><span class="line">  license: CC BY-NC-SA 4.0</span><br><span class="line">  license_url: https://creativecommons.org/licenses/by-nc-sa/4.0/</span><br></pre></td></tr></table></figure><p>由于Hexo 4.1开始，默认对网址进行解码，以至于如果是中文网址，会被解码，可设置decode: true来显示中文网址。</p><p>如果有文章（例如：转载文章）不需要显示版权，可以在文章Front-matter单读设置</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">copyright: false</span><br></pre></td></tr></table></figure><p>從3.0.0开始，支持对单读文章设置版权信息，可以在文章Front-matter单读设置</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">copyright_author: xxxx</span><br><span class="line">copyright_author_href: https://xxxxxx.com</span><br><span class="line">copyright_url: https://xxxxxx.com</span><br><span class="line">copyright_info: 此文章版权归xxxxx所有，如有转载，请註明来自原作者</span><br></pre></td></tr></table></figure><p>版权显示截图</p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fhexo-theme-butterfly-doc-post-copyright-abbdc6.png" alt="image-20210130161913121"></p><h4 id="文章打赏"><a href="#文章打赏" class="headerlink" title="文章打赏"></a>文章打赏</h4><p>在你每篇文章的结尾，可以添加打赏按钮。相关二维码可以自行配置。</p><p>对于沒有提供二维码的，可配置一张软件的icon图片，然后在link上添加相应的打赏链接。用户点击图片就会跳转到链接去。</p><p>link可以不写，会默认为图片的链接。</p><p>修改 <code>主题配置文件</code></p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">reward:</span><br><span class="line">  enable: true</span><br><span class="line">  text:</span><br><span class="line">  QR_code:</span><br><span class="line">    - img: /img/wechat.jpg</span><br><span class="line">      link:</span><br><span class="line">      text: 微信</span><br><span class="line">    - img: /img/alipay.jpg</span><br><span class="line">      link:</span><br><span class="line">      text: 支付宝</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fhexo-theme-butterfly-doc-post-donate-71f274.png" alt="img"></p><h4 id="TOC"><a href="#TOC" class="headerlink" title="TOC"></a>TOC</h4><p>在文章页，会有一个目录，用于显示TOC。</p><p>修改 <code>主题配置文件</code></p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">toc:</span><br><span class="line">  post: true</span><br><span class="line">  page: true</span><br><span class="line">  number: true</span><br><span class="line">  expand: false</span><br><span class="line">  style_simple: false # for post</span><br><span class="line">  scroll_percent: true</span><br></pre></td></tr></table></figure><table><thead><tr><th>属性</th><th>解释</th></tr></thead><tbody><tr><td>post</td><td>文章页是否显示 TOC</td></tr><tr><td>page</td><td>普通页面是否显示 TOC</td></tr><tr><td>number</td><td>是否显示章节数</td></tr><tr><td>expand</td><td>是否展开 TOC</td></tr><tr><td>style_simple</td><td>简洁模式（侧边栏只显示 TOC, 只对文章页有效 ）</td></tr><tr><td>scroll_percent</td><td>是否显示滚动进度百分比</td></tr></tbody></table><blockquote><ul><li>Toc PC</li></ul><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fhexo-theme-butterfly-doc-toc-pc-new-447897.png" alt="img"></p><ul><li>Toc Mobile</li></ul><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fhexo-theme-butterfly-doc-toc-mobile-new-4f8ba1.png" alt="img"></p><ul><li>style_simple: true</li></ul><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fhexo-theme-butterfly-docs-toc-style-simple-80f749.png" alt="image-20201209232104167"></p></blockquote><h5 id="为特定的文章配置"><a href="#为特定的文章配置" class="headerlink" title="为特定的文章配置"></a>为特定的文章配置</h5><p>在你的文章md文件的头部，加入<code>toc_number</code> 和<code>toc</code>，并配置<code>true</code>或者<code>false</code>即可。</p><p>主题会优先判断文章Markdown的Front-matter是否有配置，如有，则以Front-matter的配置为准。否则，以主题配置文件中的配置为准</p><h4 id="相关文章"><a href="#相关文章" class="headerlink" title="相关文章"></a>相关文章</h4><blockquote><p>当文章封面设置为 false 时，或者沒有获取到封面配置，相关文章背景将会显示主题色。</p></blockquote><p>相关文章推荐的原理是根据文章tags的比重来推荐</p><p>修改 <code>主题配置文件</code></p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">related_post:</span><br><span class="line">  enable: true</span><br><span class="line">  limit: 6 # 显示推荐文章数目</span><br><span class="line">  date_type: created # or created or updated 文章日期显示创建日或者更新日</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fhexo-theme-butterfly-docs-releatedpost-c82808.png" alt="img"></p><h4 id="文章过期提醒"><a href="#文章过期提醒" class="headerlink" title="文章过期提醒"></a>文章过期提醒</h4><p>可设置是否显示文章过期提醒，以更新时间为基准。</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Displays outdated notice <span class="keyword">for</span> a post (文章过期提醒)</span></span><br><span class="line">noticeOutdate:</span><br><span class="line">  enable: true</span><br><span class="line">  style: flat # style: simple/flat</span><br><span class="line">  limit_day: 365 # When will it be shown</span><br><span class="line">  position: top # position: top/bottom</span><br><span class="line">  message_prev: It has been</span><br><span class="line">  message_next: days since the last update, the content of the article may be outdated.</span><br></pre></td></tr></table></figure><ul><li><p>limit_day： 距離更新时间多少天才显示文章过期提醒</p></li><li><p>message_prev ： 天数之前的文字</p></li><li><p>message_next：天数之后的文字</p></li></ul><blockquote><ul><li>style: flat</li></ul><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fhexo-theme-butteffly-docs-outdate-flat-bd4c60.png" alt="image-20200731175909296"></p><ul><li>style: simple</li></ul><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fhexo-theme-butterfly-docs-outdated-simple-a77271.png" alt="image-20200731180037968"></p></blockquote><h4 id="文章编辑按钮"><a href="#文章编辑按钮" class="headerlink" title="文章编辑按钮"></a>文章编辑按钮</h4><p>在文章标题旁边显示一个编辑按钮，点击会跳转到对应的链接去。</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Post edit</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Easily browse and edit blog <span class="built_in">source</span> code online.</span></span><br><span class="line">post_edit:</span><br><span class="line">  enable: false</span><br><span class="line"><span class="meta prompt_">  # </span><span class="language-bash">url: https://github.com/user-name/repo-name/edit/branch-name/subdirectory-name/</span></span><br><span class="line"><span class="meta prompt_">  # </span><span class="language-bash">For example: https://github.com/jerryc127/butterfly.js.org/edit/main/source/</span></span><br><span class="line">  url:</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fhexo-theme-butterfly-docs-post-edit-f5d09f.png" alt="image-20210130160108360"></p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fhexo-theme-butterfly-docs-post-edit-2-9cc69f.png" alt="image-20210130160208436"></p><h4 id="文章分页按钮"><a href="#文章分页按钮" class="headerlink" title="文章分页按钮"></a>文章分页按钮</h4><p>当文章封面设置为 false 时，或者沒有获取到封面配置，分页背景将会显示主题色。</p><p>可设置分页的逻辑，也可以开关分页显示</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">post_pagination (分页)</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">value: 1 || 2 || <span class="literal">false</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">1: The <span class="string">&#x27;next post&#x27;</span> will <span class="built_in">link</span> to old post</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">2: The <span class="string">&#x27;next post&#x27;</span> will <span class="built_in">link</span> to new post</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="literal">false</span>: <span class="built_in">disable</span> pagination</span></span><br><span class="line">post_pagination: false</span><br></pre></td></tr></table></figure><table><thead><tr><th>参数</th><th>解释</th></tr></thead><tbody><tr><td>post_pagination: false</td><td>开关分页按钮</td></tr><tr><td>post_pagination: 1</td><td>下一篇显示的是舊文章</td></tr><tr><td>post_pagination: 2</td><td>下一篇显示的是新文章</td></tr></tbody></table><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fhexo-theme-butterfly-docs-post-pagination-6f36b2.png" alt="image-20210130161545100"></p><h4 id="Footer-设置"><a href="#Footer-设置" class="headerlink" title="Footer 设置"></a>Footer 设置</h4><h5 id="博客年份"><a href="#博客年份" class="headerlink" title="博客年份"></a>博客年份</h5><p>since是一个来展示你站点起始时间的选项。它位于页面的最底部。</p><p>修改 <code>主题配置文件</code></p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">footer:</span><br><span class="line">  owner:</span><br><span class="line">    enable: true</span><br><span class="line">    since: 2018</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fhexo-theme-butterfly-doc-since-58e187.png" alt="img"></p><h5 id="页腳自定义文本"><a href="#页腳自定义文本" class="headerlink" title="页腳自定义文本"></a>页腳自定义文本</h5><p>custom_text是一个給你用来在页腳自定义文本的选项。通常你可以在这里写声明文本等。支持 HTML。</p><p>修改 <code>主题配置文件</code></p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">custom_text: Hi, welcome to my &lt;a href=&quot;https://butterfly.js.org/&quot;&gt;blog&lt;/a&gt;!</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fhexo-theme-butterfly-doc-footer-text-ffb948.png" alt="img"></p><p>对于部分人需要写 ICP 的，也可以写在 custom_text 里</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">custom_text: &lt;a href=&quot;icp链接&quot;&gt;&lt;img class=&quot;icp-icon&quot; src=&quot;icp图片&quot;&gt;&lt;span&gt;備案號：xxxxxx&lt;/span&gt;&lt;/a&gt;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Flask </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 日志 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Butterfly 主题配置(四)</title>
      <link href="/2024/03/19/Butterfly%20%E4%B8%BB%E9%A2%98%E9%85%8D%E7%BD%AE(%E5%9B%9B)/"/>
      <url>/2024/03/19/Butterfly%20%E4%B8%BB%E9%A2%98%E9%85%8D%E7%BD%AE(%E5%9B%9B)/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="Butterfly-主题配置-四"><a href="#Butterfly-主题配置-四" class="headerlink" title="Butterfly 主题配置(四)"></a>Butterfly 主题配置(四)</h1><h3 id="侧边栏设置-aside"><a href="#侧边栏设置-aside" class="headerlink" title="侧边栏设置 (aside)"></a>侧边栏设置 (aside)</h3><h4 id="侧边排版"><a href="#侧边排版" class="headerlink" title="侧边排版"></a>侧边排版</h4><p>可自行决定哪个项目需要显示，可决定位置，也可以设置不显示侧边栏。</p><p>修改 <code>主題配置文件</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">aside:</span><br><span class="line">  enable: true</span><br><span class="line">  hide: false</span><br><span class="line">  button: true</span><br><span class="line">  mobile: true # display on mobile</span><br><span class="line">  position: right # left or right</span><br><span class="line">  display:</span><br><span class="line">    archive: true</span><br><span class="line">    tag: true</span><br><span class="line">    category: true</span><br><span class="line">  card_author:</span><br><span class="line">    enable: true</span><br><span class="line">    description:</span><br><span class="line">    button:</span><br><span class="line">      enable: true</span><br><span class="line">      icon: fab fa-github</span><br><span class="line">      text: Follow Me</span><br><span class="line">      link: https://github.com/xxxxxx</span><br><span class="line">  card_announcement:</span><br><span class="line">    enable: true</span><br><span class="line">    content: This is my Blog</span><br><span class="line">  card_recent_post:</span><br><span class="line">    enable: true</span><br><span class="line">    limit: 5 # if set 0 will show all</span><br><span class="line">    sort: date # date or updated</span><br><span class="line">    sort_order: # Don&#x27;t modify the setting unless you know how it works</span><br><span class="line">  card_categories:</span><br><span class="line">    enable: true</span><br><span class="line">    limit: 8 # if set 0 will show all</span><br><span class="line">    expand: none # none/true/false</span><br><span class="line">    sort_order: # Don&#x27;t modify the setting unless you know how it works</span><br><span class="line">  card_tags:</span><br><span class="line">    enable: true</span><br><span class="line">    limit: 40 # if set 0 will show all</span><br><span class="line">    color: false</span><br><span class="line">    orderby: random # Order of tags, random/name/length</span><br><span class="line">    order: 1 # Sort of order. 1, asc for ascending; -1, desc for descending</span><br><span class="line">    sort_order: # Don&#x27;t modify the setting unless you know how it works</span><br><span class="line">  card_archives:</span><br><span class="line">    enable: true</span><br><span class="line">    type: monthly # yearly or monthly</span><br><span class="line">    format: MMMM YYYY # eg: YYYY年MM月</span><br><span class="line">    order: -1 # Sort of order. 1, asc for ascending; -1, desc for descending</span><br><span class="line">    limit: 8 # if set 0 will show all</span><br><span class="line">    sort_order: # Don&#x27;t modify the setting unless you know how it works</span><br><span class="line">  card_webinfo:</span><br><span class="line">    enable: true</span><br><span class="line">    post_count: true</span><br><span class="line">    last_push_date: true</span><br><span class="line">    sort_order: # Don&#x27;t modify the setting unless you know how it works</span><br><span class="line">  card_post_series:</span><br><span class="line">    enable: true</span><br><span class="line">    orderBy: &#x27;date&#x27; # Order by title or date</span><br><span class="line">    order: -1 # Sort of order. 1, asc for ascending; -1, desc for descending</span><br></pre></td></tr></table></figure><blockquote><ul><li>position: left</li></ul><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fhexo-theme-butterfly-doc-aside-left-5d49a6.png" alt="img"></p><ul><li>position: right</li></ul><p><img src="https://jsd.012700.xyz/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-aside-right.png" alt="img"></p><ul><li>card_tags color: false</li></ul><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2F20200426182730-29fdae.png" alt="img"></p><ul><li>card_tags color: true</li></ul><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2F20200426183025-2b2d67.png" alt="img"></p><ul><li>aside button</li></ul><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fhexo-theme-butterfly-docs-aside-button-e019ec.gif" alt="img"></p></blockquote><h4 id="访问人数-busuanzi-UV-和-PV"><a href="#访问人数-busuanzi-UV-和-PV" class="headerlink" title="访问人数 busuanzi (UV 和 PV)"></a>访问人数 busuanzi (UV 和 PV)</h4><p>访问 busuanzi 的官方网站查看更多的介紹。</p><p>修改 <code>主題配置文件</code></p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">busuanzi:</span><br><span class="line">  site_uv: true</span><br><span class="line">  site_pv: true</span><br><span class="line">  page_pv: true</span><br></pre></td></tr></table></figure><blockquote><p>如果需要修改 busuanzi 的 CDN 链接，可通过 主题配置文件 的 CDN 中的 option 进行修改</p></blockquote><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">CDN:</span><br><span class="line">  option:</span><br><span class="line">  busuanzi: xxxxxxxxx</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fhexo-theme-butterfly-doc-busuanzi-site-pv-d62aa8.png" alt="img"></p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fhexo-theme-butterfly-doc-pv-a38dd0.png" alt="img"></p><h4 id="运行时间"><a href="#运行时间" class="headerlink" title="运行时间"></a>运行时间</h4><p>网页已运行时间</p><p>修改 <code>主題配置文件</code></p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">runtimeshow:</span><br><span class="line">  enable: true</span><br><span class="line">  publish_date: 6/7/2018 00:00:00  </span><br><span class="line"><span class="meta prompt_">  #</span><span class="language-bash"><span class="comment">#网页开通时间</span></span></span><br><span class="line"><span class="meta prompt_">  #</span><span class="language-bash">格式: 月/日/年 时间</span></span><br><span class="line"><span class="meta prompt_">  #</span><span class="language-bash">也可以寫成 年/月/日 时间</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fhexo-theme-butterfly-doc-runtime-7b6ba8.png" alt="img"></p><h3 id="最新评论"><a href="#最新评论" class="headerlink" title="最新评论"></a>最新评论</h3><p>在侧边栏显示最新评论板块</p><p>修改 <code>主題配置文件</code></p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Aside widget - Newest Comments</span></span><br><span class="line">newest_comments:</span><br><span class="line">  enable: true</span><br><span class="line">  sort_order: # Don&#x27;t modify the setting unless you know how it works</span><br><span class="line">  limit: 6</span><br><span class="line">  storage: 10 # unit: mins, save data to localStorage</span><br><span class="line">  avatar: true</span><br></pre></td></tr></table></figure><p>部分配置解释：</p><table><thead><tr><th>配置</th><th>解释</th></tr></thead><tbody><tr><td>limit</td><td>显示的数量</td></tr><tr><td>storage</td><td>设置缓存时间，单位 分钟</td></tr><tr><td>avatar</td><td>是否显示头像</td></tr></tbody></table><blockquote><ul><li>Demo</li></ul><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fhexo-theme-butterfly-docs-newest-comments-b570ce.png" alt="image-20200830223037320"></p></blockquote><h3 id="右下角按鈕-Bottom-right-button"><a href="#右下角按鈕-Bottom-right-button" class="headerlink" title="右下角按鈕 (Bottom right button)"></a>右下角按鈕 (Bottom right button)</h3><h4 id="简繁转换"><a href="#简繁转换" class="headerlink" title="简繁转换"></a>简繁转换</h4><p>简体繁体互换</p><p>右下角会有简繁转换按钮。</p><p>修改 主题配置文件</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">translate:</span><br><span class="line">  enable: true</span><br><span class="line"><span class="meta prompt_">  # </span><span class="language-bash">默认按钮显示文字(网站是简体，应设置为<span class="string">&#x27;default: 繁&#x27;</span>)</span></span><br><span class="line">  default: 简</span><br><span class="line"><span class="meta prompt_">  #</span><span class="language-bash">网站默认语言，1: 繁体中文, 2: 简体中文</span></span><br><span class="line">  defaultEncoding: 1</span><br><span class="line"><span class="meta prompt_">  #</span><span class="language-bash">延迟时间,若不在前, 要设定延迟翻译时间, 如100表示100ms,默认为0</span></span><br><span class="line">  translateDelay: 0</span><br><span class="line"><span class="meta prompt_">  #</span><span class="language-bash">当文字是简体时，按钮显示的文字</span></span><br><span class="line">  msgToTraditionalChinese: &quot;繁&quot;</span><br><span class="line"><span class="meta prompt_">  #</span><span class="language-bash">当文字是繁体时，按钮显示的文字</span></span><br><span class="line">  msgToSimplifiedChinese: &quot;简&quot;</span><br></pre></td></tr></table></figure><blockquote><ul><li>简体</li></ul><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fhexo-theme-butterfly-doc-simp-8a9222.png" alt="img"></p><ul><li>繁体</li></ul><p><img src="https://jsd.012700.xyz/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-tranditional.png" alt="img"></p></blockquote><h4 id="阅读模式"><a href="#阅读模式" class="headerlink" title="阅读模式"></a>阅读模式</h4><p>阅读模式下会去掉除文章外的内容，避免干扰阅读。</p><p>只会出现在文章页面，右下角会有阅读模式按钮。</p><p>修改 <code>主题配置文件</code></p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">readmode: true</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fhexo-theme-butterfly-doc-read-mode-e02e63.png" alt="img"></p><h4 id="夜间模式"><a href="#夜间模式" class="headerlink" title="夜间模式"></a>夜间模式</h4><p>右下角会有夜间模式按钮</p><p>修改 <code>主题配置文件</code></p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">dark mode</span></span><br><span class="line">darkmode:</span><br><span class="line">  enable: true</span><br><span class="line"><span class="meta prompt_">  # </span><span class="language-bash">dark mode和 light mode切换按钮</span></span><br><span class="line">  button: true</span><br><span class="line">  autoChangeMode: false</span><br><span class="line"><span class="meta prompt_">  # </span><span class="language-bash">Set the light mode time. The value is between 0 and 24. If not <span class="built_in">set</span>, the default value is 6 and 18</span></span><br><span class="line">  start: # 8</span><br><span class="line">  end: # 22</span><br></pre></td></tr></table></figure><table><thead><tr><th>参数</th><th>解释</th></tr></thead><tbody><tr><td>button</td><td>是否在右下角显示日夜模式切换按钮</td></tr><tr><td>autoChangeMode</td><td>自动切换的模式<br/>autoChangeMode: 1 跟随系统而变化，不支持的浏览器&#x2F;系统将按照时间 start 到 end 之间切换为 light mode<br/>autoChangeMode: 2 只按照时间 start 到 end 之间切换为 light mode ,其余时间为 dark mode<br/>autoChangeMode: false 取消自动切换</td></tr><tr><td>start</td><td>light mode 的开始时间</td></tr><tr><td>end</td><td>light mode 的结束时间</td></tr></tbody></table><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fhexo-theme-butterfly-doc-dark-mode-1-ade1ea.png" alt="image-20201230201029381"></p><h4 id="滚动状态百分比"><a href="#滚动状态百分比" class="headerlink" title="滚动状态百分比"></a>滚动状态百分比</h4><p>主题配置文件中</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">show scroll percent <span class="keyword">in</span> scroll-to-top button</span></span><br><span class="line">rightside_scroll_percent: true</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@m2/img/hexo-butterfly-docs-scroll-percent-right-btn.gif" alt="img"></p><h4 id="按钮排序"><a href="#按钮排序" class="headerlink" title="按钮排序"></a>按钮排序</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Don<span class="string">&#x27;t modify the following settings unless you know how they work (非必要请不要修改 )</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="string">Choose: readmode,translate,darkmode,hideAside,toc,chat,comment</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="string">Don&#x27;</span>t repeat 不要重复</span></span><br><span class="line">rightside_item_order:</span><br><span class="line">  enable: false</span><br><span class="line">  hide: # readmode,translate,darkmode,hideAside</span><br><span class="line">  show: # toc,chat,comment</span><br></pre></td></tr></table></figure><h3 id="标签外挂（Tag-Plugins）"><a href="#标签外挂（Tag-Plugins）" class="headerlink" title="标签外挂（Tag Plugins）"></a>标签外挂（Tag Plugins）</h3><blockquote><p>标签外挂是Hexo独有的功能，并不是标准的Markdown格式。</p><p>以下的写法，只适用于Butterfly主题，用在其它主题上不会有效果，甚至可能会报错。使用前请留意</p></blockquote><h4 id="Gallery相册图库"><a href="#Gallery相册图库" class="headerlink" title="Gallery相册图库"></a>Gallery相册图库</h4><p>一个图库集合。</p><p>写法</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">&lt;div class=&quot;gallery-group-main&quot;&gt;</span><br><span class="line">&#123;% galleryGroup name description link img-url %&#125;</span><br><span class="line">&#123;% galleryGroup name description link img-url %&#125;</span><br><span class="line">&#123;% galleryGroup name description link img-url %&#125;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><ul><li>name：图库名字</li><li>description：图库描述</li><li>link：连接到对应相册的地址</li><li>img-url：图库封面的地址</li></ul><p>例如：</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">&lt;div class=&quot;gallery-group-main&quot;&gt;</span><br><span class="line">&#123;% galleryGroup &#x27;壁纸&#x27; &#x27;收藏的一些壁纸&#x27; &#x27;/Gallery/wallpaper&#x27; https://i.loli.net/2019/11/10/T7Mu8Aod3egmC4Q.png %&#125;</span><br><span class="line">&#123;% galleryGroup &#x27;漫威&#x27; &#x27;关于漫威的图片&#x27; &#x27;/Gallery/marvel&#x27; https://i.loli.net/2019/12/25/8t97aVlp4hgyBGu.jpg %&#125;</span><br><span class="line">&#123;% galleryGroup &#x27;OH MY GIRL&#x27; &#x27;关于OH MY GIRL的图片&#x27; &#x27;/Gallery/ohmygirl&#x27; https://i.loli.net/2019/12/25/hOqbQ3BIwa6KWpo.jpg %&#125;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><h4 id="Gallery相册"><a href="#Gallery相册" class="headerlink" title="Gallery相册"></a>Gallery相册</h4><p>区别于旧版的Gallery相册,新的 Gallery 相册会自动根据图片长度进行排版，书写也更加方便，与 markdown 格式一样。可根据需要插入到相应的 md。</p><p>写法:</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">&#123;% gallery [lazyload],[rowHeight],[limit] %&#125;</span><br><span class="line">markdown 图片格式</span><br><span class="line">&#123;% endgallery %&#125;</span><br></pre></td></tr></table></figure><table><thead><tr><th>参数</th><th>解释</th></tr></thead><tbody><tr><td>lazyload</td><td>【可选】点击按钮加载更多图片，填写 true&#x2F;false。默认为 false。</td></tr><tr><td>rowHeight</td><td>【可选】图片显示的高度，如果需要一行显示更多的图片，可设置更小的数字。默认为 220。</td></tr><tr><td>limit</td><td>【可选】每次加载多少张照片。默认为 10。</td></tr></tbody></table><p>示例</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">&#123;% gallery %&#125;</span><br><span class="line">markdown 图片格式</span><br><span class="line">&#123;% endgallery %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% gallery true,220,10 %&#125;</span><br><span class="line">markdown 图片格式</span><br><span class="line">&#123;% endgallery %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% gallery true,,10 %&#125;</span><br><span class="line">markdown 图片格式</span><br><span class="line">&#123;% endgallery %&#125;</span><br></pre></td></tr></table></figure><p>例如:</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">&#123;% gallery %&#125;</span><br><span class="line">![](https://i.loli.net/2019/12/25/Fze9jchtnyJXMHN.jpg)</span><br><span class="line">![](https://i.loli.net/2019/12/25/ryLVePaqkYm4TEK.jpg)</span><br><span class="line">![](https://i.loli.net/2019/12/25/gEy5Zc1Ai6VuO4N.jpg)</span><br><span class="line">![](https://i.loli.net/2019/12/25/d6QHbytlSYO4FBG.jpg)</span><br><span class="line">![](https://i.loli.net/2019/12/25/6nepIJ1xTgufatZ.jpg)</span><br><span class="line">![](https://i.loli.net/2019/12/25/E7Jvr4eIPwUNmzq.jpg)</span><br><span class="line">![](https://i.loli.net/2019/12/25/mh19anwBSWIkGlH.jpg)</span><br><span class="line">![](https://i.loli.net/2019/12/25/2tu9JC8ewpBFagv.jpg)</span><br><span class="line">&#123;% endgallery %&#125;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240914175242924-44788d.png" alt="image-20240914175242924"></p><h4 id="tag-hide"><a href="#tag-hide" class="headerlink" title="tag-hide"></a>tag-hide</h4><blockquote><p>请注意，tag-hide内的标签外挂content内都不建议有h1 - h6 等标题。因为Toc会把隐藏内容标题也显示出来，而且当滚动屏幕时，如果隐藏内容没有显示出来，会导致Toc的滚动出现异常。</p></blockquote><p>如果你想把一些文字、内容隐藏起来，并提供按钮让用户点击显示。可以使用这个标签外挂。</p><div class="tabs" id="test1"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="test1-1">test1 1</button><button type="button" class="tab " data-href="test1-2">test1 2</button><button type="button" class="tab " data-href="test1-3">test1 3</button></ul><div class="tab-contents"><div class="tab-item-content active" id="test1-1"><p>inline 在文本里面添加按钮隐藏内容，只限文字</p><p>( content不能包含英文逗号，可用&sbquo;)</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">&#123;% hideInline content,display,bg,color %&#125;</span><br></pre></td></tr></table></figure><ul><li>content: 文本内容</li><li>display: 按钮显示的文字(可选)</li><li>bg: 按钮的背景颜色(可选)</li><li>color: 按钮文字的颜色(可选)</li></ul><blockquote><p>Demo</p></blockquote><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">哪个英文字母最酷？ &#123;% hideInline 因为西装裤(C装酷),查看答案,#FF7242,#fff %&#125;</span><br><span class="line"></span><br><span class="line">门里站着一个人? &#123;% hideInline 闪 %&#125;</span><br></pre></td></tr></table></figure><p>哪个英文字母最酷？ <span class="hide-inline"><button type="button" class="hide-button" style="background-color: #FF7242;color: #fff">查看答案<br>  </button><span class="hide-content">因为西装裤(C装酷)</span></span></p><p>门里站着一个人? <span class="hide-inline"><button type="button" class="hide-button" style="">Click<br>  </button><span class="hide-content">闪</span></span></p></div><div class="tab-item-content" id="test1-2"><p>block独立的block隐藏内容，可以隐藏很多内容，包括图片，代码块等等</p><p>( display 不能包含英文逗号，可用&sbquo;)</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">&#123;% hideBlock display,bg,color %&#125;</span><br><span class="line">content</span><br><span class="line">&#123;% endhideBlock %&#125;</span><br></pre></td></tr></table></figure><ul><li>content: 文本内容</li><li>display: 按钮显示的文字(可选)</li><li>bg: 按钮的背景颜色(可选)</li><li>color: 按钮文字的颜色(可选)</li></ul><blockquote><p>Demo</p></blockquote><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">查看答案</span><br><span class="line">&#123;% hideBlock 查看答案 %&#125;</span><br><span class="line">傻子，怎么可能有答案</span><br><span class="line">&#123;% endhideBlock %&#125;</span><br></pre></td></tr></table></figure><p>查看答案</p><div class="hide-block"><button type="button" class="hide-button" style="">查看答案    </button><div class="hide-content"><p>傻子，怎么可能有答案</p></div></div></div><div class="tab-item-content" id="test1-3"><p>如果你需要展示的内容太多，可以把它隐藏在收缩框里，需要时再把它展开。</p><p>( display 不能包含英文逗号，可用&sbquo;)</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">&#123;% hideToggle display,bg,color %&#125;</span><br><span class="line">content</span><br><span class="line">&#123;% endhideToggle %&#125;</span><br></pre></td></tr></table></figure><blockquote><p>Demo</p></blockquote><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">&#123;% hideToggle Butterfly安装方法 %&#125;</span><br><span class="line">在你的博客根目录里</span><br><span class="line"></span><br><span class="line">git clone -b master https://github.com/jerryc127/hexo-theme-butterfly.git themes/Butterfly</span><br><span class="line"></span><br><span class="line">如果想要安装比较新的dev分支，可以</span><br><span class="line"></span><br><span class="line">git clone -b dev https://github.com/jerryc127/hexo-theme-butterfly.git themes/Butterfly</span><br><span class="line"></span><br><span class="line">&#123;% endhideToggle %&#125;</span><br></pre></td></tr></table></figure><details class="toggle" ><summary class="toggle-button" style="">Butterfly安装方法</summary><div class="toggle-content"><p>在你的博客根目录里</p><p>git clone -b master <a href="https://github.com/jerryc127/hexo-theme-butterfly.git">https://github.com/jerryc127/hexo-theme-butterfly.git</a> themes&#x2F;Butterfly</p><p>如果想要安装比较新的dev分支，可以</p><p>git clone -b dev <a href="https://github.com/jerryc127/hexo-theme-butterfly.git">https://github.com/jerryc127/hexo-theme-butterfly.git</a> themes&#x2F;Butterfly</p></div></details></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div><h4 id="mermaid"><a href="#mermaid" class="headerlink" title="mermaid"></a>mermaid</h4><p>使用mermaid标签可以绘制Flowchart（流程图）、Sequence diagram（时序图 ）、Class Diagram（类别图）、State Diagram（状态图）、Gantt（甘特图）和Pie Chart（圆形图），具体可以查看mermaid文档</p><p>修改 <code>主题配置文件</code></p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">mermaid</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">see https://github.com/mermaid-js/mermaid</span></span><br><span class="line">mermaid:</span><br><span class="line">  enable: true</span><br><span class="line"><span class="meta prompt_">  # </span><span class="language-bash">built-in themes: default/forest/dark/neutral</span></span><br><span class="line">  theme:</span><br><span class="line">    light: default</span><br><span class="line">    dark: dark</span><br></pre></td></tr></table></figure><p>写法：</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">&#123;% mermaid %&#125;</span><br><span class="line">内容</span><br><span class="line">&#123;% endmermaid %&#125;</span><br></pre></td></tr></table></figure><p>例如：</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">&#123;% mermaid %&#125;</span><br><span class="line">pie</span><br><span class="line">    title Key elements in Product X</span><br><span class="line">    &quot;Calcium&quot; : 42.96</span><br><span class="line">    &quot;Potassium&quot; : 50.05</span><br><span class="line">    &quot;Magnesium&quot; : 10.01</span><br><span class="line">    &quot;Iron&quot; :  5</span><br><span class="line">&#123;% endmermaid %&#125;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fhexo-theme-butterfly-docs-mermaid-a66953.png" alt="img"></p><h4 id="Tabs"><a href="#Tabs" class="headerlink" title="Tabs"></a>Tabs</h4><p>移植于next主题</p><p>使用方法</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tabs Unique name, [index] %&#125;</span><br><span class="line">&lt;!-- tab [Tab caption] [@icon] --&gt;</span><br><span class="line">Any content (support inline tags too).</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br><span class="line"></span><br><span class="line">Unique name   : Unique name of tabs block tag without comma.</span><br><span class="line">                Will be used in #id&#x27;s as prefix for each tab with their index numbers.</span><br><span class="line">                If there are whitespaces in name, for generate #id all whitespaces will replaced by dashes.</span><br><span class="line">                Only for current url of post/page must be unique!</span><br><span class="line">[index]       : Index number of active tab.</span><br><span class="line">                If not specified, first tab (1) will be selected.</span><br><span class="line">                If index is -1, no tab will be selected. It&#x27;s will be something like spoiler.</span><br><span class="line">                Optional parameter.</span><br><span class="line">[Tab caption] : Caption of current tab.</span><br><span class="line">                If not caption specified, unique name with tab index suffix will be used as caption of tab.</span><br><span class="line">                If not caption specified, but specified icon, caption will empty.</span><br><span class="line">                Optional parameter.</span><br><span class="line">[@icon]       : FontAwesome icon name (full-name, look like &#x27;fas fa-font&#x27;)</span><br><span class="line">                Can be specified with or without space; e.g. &#x27;Tab caption @icon&#x27; similar to &#x27;Tab caption@icon&#x27;.</span><br><span class="line">                Optional parameter.</span><br></pre></td></tr></table></figure><blockquote><p>Demo 1 - 预设选择第一个【默认】</p></blockquote><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">&#123;% tabs test1 %&#125;</span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line">**This is Tab 1.**</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line">**This is Tab 2.**</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line">**This is Tab 3.**</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240914180405372-283e81.png" alt="image-20240914180405372"></p><blockquote><p>Demo 2 - 预设选择tabs</p></blockquote><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">&#123;% tabs test2, 3 %&#125;</span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line">**This is Tab 1.**</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line">**This is Tab 2.**</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line">**This is Tab 3.**</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240914180443211-2ec74f.png" alt="image-20240914180443211"></p><blockquote><p>Demo 3 - 没有预设值</p></blockquote><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">&#123;% tabs test3, -1 %&#125;</span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line">**This is Tab 1.**</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line">**This is Tab 2.**</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line">**This is Tab 3.**</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240914180532374-f36c37.png" alt="image-20240914180532374"></p><blockquote><p>Demo 4 - 自定义Tab名 + 只有icon + icon和Tab名</p></blockquote><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">&#123;% tabs test4 %&#125;</span><br><span class="line">&lt;!-- tab 第一个Tab --&gt;</span><br><span class="line">**tab名字为第一个Tab**</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab @fab fa-apple-pay --&gt;</span><br><span class="line">**只有图标 没有Tab名字**</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab 炸弹@fas fa-bomb --&gt;</span><br><span class="line">**名字+icon**</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240914180602768-0781df.png" alt="image-20240914180602768"></p><h4 id="Button"><a href="#Button" class="headerlink" title="Button"></a>Button</h4><p>使用方法：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;% btn [url],[text],[icon],[color] [style] [layout] [position] [size] %&#125;</span><br><span class="line"></span><br><span class="line">[url]         : 链接</span><br><span class="line">[text]        : 按钮文字</span><br><span class="line">[icon]        : [可选] 图标</span><br><span class="line">[color]       : [可选] 按钮背景顔色(默认style时）</span><br><span class="line">                      按钮字体和边框顔色(outline时)</span><br><span class="line">                      default/blue/pink/red/purple/orange/green</span><br><span class="line">[style]       : [可选] 按钮样式 默认实心</span><br><span class="line">                      outline/留空</span><br><span class="line">[layout]      : [可选] 按钮佈局 默认为line</span><br><span class="line">                      block/留空</span><br><span class="line">[position]    : [可选] 按钮位置 前提是设置了layout为block 默认为左边</span><br><span class="line">                      center/right/留空</span><br><span class="line">[size]        : [可选] 按钮大小</span><br><span class="line">                      larger/留空</span><br></pre></td></tr></table></figure><blockquote><p>Demo</p></blockquote><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">This is my website, click the button &#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly %&#125;</span><br><span class="line">This is my website, click the button &#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right %&#125;</span><br><span class="line">This is my website, click the button &#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,,outline %&#125;</span><br><span class="line">This is my website, click the button &#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right,outline %&#125;</span><br><span class="line">This is my website, click the button &#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right,larger %&#125;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240914181510104-8860db.png" alt="image-20240914181510104"></p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">&#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right,block %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right,block center larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right,block right outline larger %&#125;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240914181704341-345cdf.png" alt="image-20240914181704341"></p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">&#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right,larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right,blue larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right,pink larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right,red larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right,purple larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right,orange larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right,green larger %&#125;</span><br></pre></td></tr></table></figure><p><img src="C:\Users\waws\AppData\Roaming\Typora\typora-user-images\image-20240914181744330.png" alt="image-20240914181744330"></p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">&lt;div class=&quot;btn-center&quot;&gt;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right,outline larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right,outline blue larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right,outline pink larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right,outline red larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right,outline purple larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right,outline orange larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right,outline green larger %&#125;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240914181936040-3a1462.png" alt="image-20240914181936040"></p><h4 id="inlineImg"><a href="#inlineImg" class="headerlink" title="inlineImg"></a>inlineImg</h4><p>主题中的图片都是默认以块级元素显示，如果你想以内联元素显示，可以使用这个标签外挂。</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">&#123;% inlineImg [src] [height] %&#125;</span><br><span class="line"></span><br><span class="line">[src]      :    图片链接</span><br><span class="line">[height]   ：   图片高度限制【可选】</span><br></pre></td></tr></table></figure><blockquote><p>Demo</p></blockquote><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">你看我长得漂亮不</span><br><span class="line"></span><br><span class="line">![](https://i.loli.net/2021/03/19/2P6ivUGsdaEXSFI.png)</span><br><span class="line"></span><br><span class="line">我觉得很漂亮 &#123;% inlineImg https://i.loli.net/2021/03/19/5M4jUB3ynq7ePgw.png 150px %&#125;</span><br></pre></td></tr></table></figure><p><img src="https://jsd.012700.xyz/gh/jerryc127/CDN@m2/img/hexo-theme-butterfly-docs-inlineimg.png" alt="image-20210319001204045"></p><h4 id="label"><a href="#label" class="headerlink" title="label"></a>label</h4><p>高亮所需的文字</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">&#123;% label text color %&#125;</span><br></pre></td></tr></table></figure><table><thead><tr><th>参数</th><th>解释</th></tr></thead><tbody><tr><td>text</td><td>文字</td></tr><tr><td>color</td><td>【可选】背景颜色，默认为 default</br>default&#x2F;blue&#x2F;pink&#x2F;red&#x2F;purple&#x2F;orange&#x2F;green</td></tr></tbody></table><blockquote><p>Demo</p></blockquote><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">臣亮言：&#123;% label 先帝 %&#125;创业未半，而&#123;% label 中道崩殂 blue %&#125;。今天下三分，&#123;% label 益州疲敝 pink %&#125;，此诚&#123;% label 危急存亡之秋 red %&#125;也！然侍衞之臣，不懈于内；&#123;% label 忠志之士 purple %&#125;，忘身于外者，盖追先帝之殊遇，欲报之于陛下也。诚宜开张圣听，以光先帝遗德，恢弘志士之气；不宜妄自菲薄，引喻失义，以塞忠谏之路也。</span><br><span class="line">宫中、府中，俱为一体；陟罚臧否，不宜异同。若有&#123;% label 作奸 orange %&#125;、&#123;% label 犯科 green %&#125;，及为忠善者，宜付有司，论其刑赏，以昭陛下平明之治；不宜偏私，使内外异法也。</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240914182244017-7e66df.png" alt="image-20240914182244017"></p><h4 id="timeline"><a href="#timeline" class="headerlink" title="timeline"></a>timeline</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">&#123;% timeline title,color %&#125;</span><br><span class="line">&lt;!-- timeline title --&gt;</span><br><span class="line">xxxxx</span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line">&lt;!-- timeline title --&gt;</span><br><span class="line">xxxxx</span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line">&#123;% endtimeline %&#125;</span><br></pre></td></tr></table></figure><table><thead><tr><th>参数</th><th>解释</th></tr></thead><tbody><tr><td>title</td><td>标题&#x2F;时间线</td></tr><tr><td>color</td><td>timeline 颜色 default(留空) &#x2F; blue &#x2F; pink &#x2F; red &#x2F; purple &#x2F; orange &#x2F; green</td></tr></tbody></table><blockquote><p>Demo</p></blockquote><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">&#123;% timeline 2022 %&#125;</span><br><span class="line">&lt;!-- timeline 01-02 --&gt;</span><br><span class="line">这是测试页面</span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line">&#123;% endtimeline %&#125;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240914182421758-1cd8d8.png" alt="image-20240914182421758"></p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">&#123;% timeline 2022,blue %&#125;</span><br><span class="line">&lt;!-- timeline 01-02 --&gt;</span><br><span class="line">这是测试页面</span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line">&#123;% endtimeline %&#125;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240914182441904-ff557c.png" alt="image-20240914182441904"></p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">&#123;% timeline 2022,pink %&#125;</span><br><span class="line">&lt;!-- timeline 01-02 --&gt;</span><br><span class="line">这是测试页面</span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line">&#123;% endtimeline %&#125;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240914182500984-7def5c.png" alt="image-20240914182500984"></p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">&#123;% timeline 2022,red %&#125;</span><br><span class="line">&lt;!-- timeline 01-02 --&gt;</span><br><span class="line">这是测试页面</span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line">&#123;% endtimeline %&#125;</span><br></pre></td></tr></table></figure><p><img src="C:\Users\waws\AppData\Roaming\Typora\typora-user-images\image-20240914182523436.png" alt="image-20240914182523436"></p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">&#123;% timeline 2022,purple %&#125;</span><br><span class="line">&lt;!-- timeline 01-02 --&gt;</span><br><span class="line">这是测试页面</span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line">&#123;% endtimeline %&#125;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240914182544763-3b9825.png" alt="image-20240914182544763"></p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">&#123;% timeline 2022,orange %&#125;</span><br><span class="line">&lt;!-- timeline 01-02 --&gt;</span><br><span class="line">这是测试页面</span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line">&#123;% endtimeline %&#125;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240914182646077-a3b0c1.png" alt="image-20240914182646077"></p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">&#123;% timeline 2022,green %&#125;</span><br><span class="line">&lt;!-- timeline 01-02 --&gt;</span><br><span class="line">这是测试页面</span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line">&#123;% endtimeline %&#125;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240914182658290-b65e80.png" alt="image-20240914182658290"></p><h4 id="flink"><a href="#flink" class="headerlink" title="flink"></a>flink</h4><p>可在任何界面插入类似友情链接列表效果</p><p>内容格式与友情链接界面一样，支持 yml 格式</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">&#123;% flink %&#125;</span><br><span class="line">xxxxxx</span><br><span class="line">&#123;% endflink %&#125;</span><br></pre></td></tr></table></figure><blockquote><p>Demo</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&#123;% flink %&#125;</span><br><span class="line">- class_name: 友情链接</span><br><span class="line">  class_desc: 那些人，那些事</span><br><span class="line">  link_list:</span><br><span class="line">    - name: JerryC</span><br><span class="line">      link: https://jerryc.me/</span><br><span class="line">      avatar: https://jerryc.me/img/avatar.png</span><br><span class="line">      descr: 今日事,今日毕</span><br><span class="line">    - name: Hexo</span><br><span class="line">      link: https://hexo.io/zh-tw/</span><br><span class="line">      avatar: https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg</span><br><span class="line">      descr: 快速、简单且强大的网志框架</span><br><span class="line"></span><br><span class="line">- class_name: 网站</span><br><span class="line">  class_desc: 值得推荐的网站</span><br><span class="line">  link_list:</span><br><span class="line">    - name: Youtube</span><br><span class="line">      link: https://www.youtube.com/</span><br><span class="line">      avatar: https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png</span><br><span class="line">      descr: 视频网站</span><br><span class="line">    - name: Weibo</span><br><span class="line">      link: https://www.weibo.com/</span><br><span class="line">      avatar: https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png</span><br><span class="line">      descr: 中国最大社交分享平台</span><br><span class="line">    - name: Twitter</span><br><span class="line">      link: https://twitter.com/</span><br><span class="line">      avatar: https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png</span><br><span class="line">      descr: 社交分享平台</span><br><span class="line">&#123;% endflink %&#125;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fhexo-theme-butterfly-docs-flink-demo-11b079.png" alt="img"></p><h4 id="series-系列文章"><a href="#series-系列文章" class="headerlink" title="series 系列文章"></a>series 系列文章</h4><p>在页面上显示系列文章</p><p>修改 <code>主题配置文件</code></p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">series:</span><br><span class="line">   enable: true</span><br><span class="line">   orderBy: &#x27;title&#x27; # Order by title or date</span><br><span class="line">   order: 1 # Sort of order. 1, asc for ascending; -1, desc for descending</span><br><span class="line">   number: true</span><br></pre></td></tr></table></figure><p>写法：</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">&#123;% series %&#125;</span><br><span class="line">&#123;% series [series name] %&#125;</span><br></pre></td></tr></table></figure><p>在文章的 front-matter 上添加参数 series，并给与一个标识</p><p>使用此标签外挂，会把相同标识的文章以列表的形式展示</p><p>如果不写 series 标识，则默认为你使用此标签外挂所在的文章的 series 标识</p><blockquote><p>Demo</p></blockquote><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">&#123;% series markdown %&#125;</span><br></pre></td></tr></table></figure><p><img src="https://oss.012700.xyz/butterfly/2023/10/butterfly-series.png" alt="img"></p>]]></content>
      
      
      <categories>
          
          <category> Flask </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 日志 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用 Github Pages 和 Hexo 搭建自己的独立博客</title>
      <link href="/2024/03/19/%E4%BD%BF%E7%94%A8%20Github%20Pages%20%E5%92%8C%20Hexo%20%E6%90%AD%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E7%8B%AC%E7%AB%8B%E5%8D%9A%E5%AE%A2/"/>
      <url>/2024/03/19/%E4%BD%BF%E7%94%A8%20Github%20Pages%20%E5%92%8C%20Hexo%20%E6%90%AD%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E7%8B%AC%E7%AB%8B%E5%8D%9A%E5%AE%A2/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="使用-Github-Pages-和-Hexo-搭建自己的独立博客"><a href="#使用-Github-Pages-和-Hexo-搭建自己的独立博客" class="headerlink" title="使用 Github Pages 和 Hexo 搭建自己的独立博客"></a>使用 Github Pages 和 Hexo 搭建自己的独立博客</h1><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240913164552619-83607f.png" alt="image-20240913164552619"></p><p>这是一篇有关如何使用 <code>Github Pages</code> 和 <code>Hexo</code> 搭建属于自己独立博客的详尽教程，本人在搭建博客时，对网站开发的有关知识几乎为零，这也是我搭建好自己的博客之后写的第一篇博客，刚开始搭建博客的时候自己也是网上各种百度，由于自己属于小白那种，历经了千辛万苦才弄好，所以借这个机会写一篇小白真正能看懂的博客搭建教程，教你一步一步走向成功的彼岸！</p><h2 id="入门"><a href="#入门" class="headerlink" title="入门"></a>入门</h2><p><strong>Github Pages</strong>: <code>Github Pages</code>可以被认为是用户编写的、托管在<code>github</code>上的静态网页。使用<code>Github Pages</code>可以为你提供一个免费的服务器，免去了自己搭建服务器和写数据库的麻烦。此外还可以绑定自己的域名。</p><p><strong>Hexo</strong>：<code>Hexo</code> 是一个快速、简洁且高效的博客框架。<code>Hexo</code> 使用 Markdown（或其他渲染引擎）解析文章，在几秒内，即可利用靓丽的主题生成静态网页。</p><h2 id="安装-Node-js-和-Git"><a href="#安装-Node-js-和-Git" class="headerlink" title="安装 Node.js 和 Git"></a>安装 Node.js 和 Git</h2><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240913164709910-aeedc6.png" alt="image-20240913164709910"></p><p>访问官网，按需下载相应版本，默认无脑下一步安装即可。</p><ul><li>Node.js 官网下载地址：<a href="https://nodejs.org/en/download/">https://nodejs.org/en/download/</a></li><li>Git 官网下载地址：<a href="https://git-scm.com/downloads">https://git-scm.com/downloads</a></li></ul><p>参考资料：</p><ul><li><a href="https://www.cnblogs.com/jytx/p/5602927.html">《如何在windows下安装GIT》</a></li><li><a href="http://git.oschina.net/progit/">《Pro Git（中文版）》</a></li></ul><p>安装完成后，同时按下 Win 键和 R 键打开运行窗口,输入 <code>cmd</code> ，然后输入以下命令，有相应版本信息显示则安装成功，若不正确可以卸载软件重新安装：</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git --version</span><br><span class="line">node -v</span><br><span class="line">npm -v</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240913164902248-7320a0.png" alt="image-20240913164902248"></p><p>此外若安装成功，在桌面右键鼠标，可以看到菜单里多了 <code>Git GUI Here</code> 和 <code>Git Bash Here</code>两个选项，第一个是图形界面的Git操作，另一个是命令行。</p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240913164922822-a2589a.png" alt="image-20240913164922822"></p><h2 id="安装-Hexo"><a href="#安装-Hexo" class="headerlink" title="安装 Hexo"></a>安装 Hexo</h2><p>选择一个磁盘，新建一个文件夹，自己重命名文件夹（如：我的文件夹为：<code>Ｅ\TRHX_Blog</code>），博客相关文件将储存在此文件夹下，在该文件夹下右键鼠标，点击 <code>Git Bash Here</code>，输入以下 <code>npm</code> 命令即可安装，第一个命令表示安装 <code>hexo</code>，第二个命令表示安装 <code>hexo</code> 部署到 git page 的 <code>deployer</code>，如图所示即为安装成功</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">npm install hexo-cli -g</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">npm install hexo-deployer-git --save</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240913165029809-cef388.png" alt="image-20240913165029809"></p><h3 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h3><p>在刚才新建的文件夹里面再次新建一个 <code>Hexo</code> 文件夹（如：我的文件夹为：<code>E\TRHX_Blog\Hexo</code>）,进入该 <code>Hexo</code> 文件夹右键鼠标，点击 <code>Git Bash Here</code>，输入以下命令，如图所示则安装成功</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">hexo init</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240913165138220-629dcb.png" alt="image-20240913165138220"></p><p><code>Hexo</code> 安装完成后，将会在指定文件夹中新建所需要的文件，<code>Hexo</code> 文件夹下的目录如下：</p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240913165208199-03190b.png" alt="image-20240913165208199"></p><h3 id="本地查看效果"><a href="#本地查看效果" class="headerlink" title="本地查看效果"></a>本地查看效果</h3><p>执行以下命令，执行完即可登录 <a href="http://localhost:4000/">http://localhost:4000/</a> 查看效果</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">hexo generate</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">hexo server</span></span><br></pre></td></tr></table></figure><p>显示以下信息说明操作成功：</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">INFO Hexo is running at http://0.0.0.0:4000/. Press Ctrl+C to stop.</span><br></pre></td></tr></table></figure><p>访问 <a href="http://localhost:4000/">http://localhost:4000/</a> 查看效果：</p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240913165241764-e6331e.png" alt="image-20240913165241764"></p><h2 id="部署至-Github-Pages"><a href="#部署至-Github-Pages" class="headerlink" title="部署至 Github Pages"></a>部署至 Github Pages</h2><p>到目前为止，我们的本地博客就成功搭建了，但是现在我们只能通过本地连接查看博客，我们要做的是让其他人也能够访问我们的博客，这就需要我们将博客部署到<code>Github Pages</code>上</p><p><strong>一、注册 <code>Github</code> 账户：<a href="https://github.com/">点击此处</a>访问 <code>Github</code> 官网，点击 <code>Sign Up</code> 注册账户</strong></p><p><strong>二、创建项目代码库：点击 <code>New repository</code> 开始创建，步骤及注意事项见图：</strong></p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240913165345125-44877c.png" alt="image-20240913165345125"></p><p><strong>三、配置 <code>SSH</code> 密钥：只有配置好 <code>SSH</code> 密钥后，我们才可以通过 <code>git</code> 操作实现本地代码库与 <code>Github</code> 代码库同步，在你第一次新建的文件夹里面（如：我的文件夹为：<code>Ｅ\TRHX_Blog</code>） Git Bash Here 输入以下命令：</strong></p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ssh-keygen -t rsa -C <span class="string">&quot;your email@example.com&quot;</span></span></span><br><span class="line">//引号里面填写你的邮箱地址，比如我的是tanrenhou@126.com</span><br></pre></td></tr></table></figure><p>之后会出现：</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">Generating public/private rsa key pair.</span><br><span class="line">Enter file in which to save the key (/c/Users/you/.ssh/id_rsa):</span><br><span class="line">//到这里可以直接回车将密钥按默认文件进行存储</span><br></pre></td></tr></table></figure><p>然后会出现：</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">Enter passphrase (empty for no passphrase):</span><br><span class="line">//这里是要你输入密码，其实不需要输什么密码，直接回车就行</span><br><span class="line">Enter same passphrase again:</span><br></pre></td></tr></table></figure><p>接下来屏幕会显示：</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">Your identification has been saved in /c/Users/you/.ssh/id_rsa.</span><br><span class="line">Your public key has been saved in /c/Users/you/.ssh/id_rsa.pub.</span><br><span class="line">The key fingerprint is:</span><br><span class="line">这里是各种字母数字组成的字符串，结尾是你的邮箱</span><br><span class="line">The key&#x27;s randomart image is:</span><br><span class="line">这里也是各种字母数字符号组成的字符串</span><br></pre></td></tr></table></figure><p>运行以下命令，将公钥的内容复制到系统粘贴板上</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">clip &lt; ~/.ssh/id_rsa.pub</span></span><br></pre></td></tr></table></figure><p><strong>四、在 <code>GitHub</code> 账户中添加你的公钥</strong></p><p>1.登陆 <code>GitHub</code>，进入 Settings：</p><p><img src="C:\Users\waws\AppData\Roaming\Typora\typora-user-images\image-20240913165408222.png" alt="image-20240913165408222"></p><p>2.点击 <code>SSH and GPG Keys</code>：</p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240913165425054-cfbf98.png" alt="image-20240913165425054"></p><p>3.选择 New SSH key：</p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240913165527745-470cac.png" alt="image-20240913165527745"></p><p>4.粘贴密钥：</p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240913165527745-470cac.png"></p><p><strong>五、测试</strong></p><p>输入以下命令：注意：<a href="mailto:&#103;&#x69;&#x74;&#x40;&#x67;&#x69;&#x74;&#104;&#x75;&#98;&#x2e;&#99;&#x6f;&#x6d;">&#103;&#x69;&#x74;&#x40;&#x67;&#x69;&#x74;&#104;&#x75;&#98;&#x2e;&#99;&#x6f;&#x6d;</a>不要做任何更改！</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ssh -T git@github.com</span></span><br></pre></td></tr></table></figure><p>之后会显示：</p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240913165603932-5f75cc.png" alt="image-20240913165603932"></p><p>输入 yes 后会显示：</p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240913165626165-26f29f.png" alt="image-20240913165626165"></p><p>此时表示设置正确</p><p><strong>六、配置 Git 个人信息</strong></p><p>Git 会根据用户的名字和邮箱来记录提交，<code>GitHub</code> 也是用这些信息来做权限的处理，输入以下命令进行个人信息的设置，把名称和邮箱替换成你自己的，名字可以不是 <code>GitHub</code> 的昵称，但为了方便记忆，建议与 <code>GitHub</code> 一致</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git config --global user.name <span class="string">&quot;此处填你的用户名&quot;</span></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git config --global user.email <span class="string">&quot;此处填你的邮箱&quot;</span></span></span><br></pre></td></tr></table></figure><p>到此为止 SSH Key 配置成功，本机已成功连接到 <code>Github</code></p><h2 id="文件推送至-Github"><a href="#文件推送至-Github" class="headerlink" title="文件推送至 Github"></a>文件推送至 Github</h2><p><strong>一、登录 <code>Github</code> 打开自己的项目 <code>yourname.github.io</code></strong></p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240913165645500-380eae.png" alt="image-20240913165645500"></p><p><strong>二、鼠标移到 <code>Clone or download</code> 按钮，选择 Use SSH</strong></p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240913165807383-ff0d3d.png" alt="image-20240913165807383"></p><p><strong>三、一键复制地址</strong></p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240913165847014-8c957f.png" alt="image-20240913165847014"></p><p><strong>四、打开你创建的 <code>Hexo</code> 文件夹（如：<code>E:\TRHX_Blog\Hexo</code>），右键用记事本（或者<code>Notepad++</code>、<code>Vs Code</code>等）打开该文件夹下的 <code>_config.yml</code> 文件</strong></p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240913165911045-58dcd9.png" alt="image-20240913165911045"></p><p><strong>五、按下图修改 <code>_config.yml</code> 文件并保存</strong></p><blockquote><ul><li>注意：<code>github</code> 默认分支变成了 main，所以下图中 branch 要改为 main！！！</li><li>注意：<code>github</code> 默认分支变成了 main，所以下图中 branch 要改为 main！！！</li><li>注意：<code>github</code> 默认分支变成了 main，所以下图中 branch 要改为 main！！！</li></ul></blockquote><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240913165937140-9e8387.png" alt="image-20240913165937140"></p><p><strong>六、在 <code>Hexo</code> 文件夹下分别执行以下命令</strong></p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">hexo g</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">hexo d</span></span><br></pre></td></tr></table></figure><p>或者直接执行</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">hexo g -d</span></span><br></pre></td></tr></table></figure><p>执行完之后会让你输入你的 <code>Github</code> 的账号和密码，如果此时报以下错误，说明你的 <code>deployer</code> 没有安装成功</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ERROR Deployer not found: git</span><br></pre></td></tr></table></figure><p>需要执行以下命令再安装一次：</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure><p>再执行 <code>hexo g -d</code>，你的博客就会部署到 <code>Github</code> 上了</p><p><strong>七、访问博客</strong></p><p>你的博客地址：<a href="https://你的用户名.github.io/">https:&#x2F;&#x2F;你的用户名.github.io</a>，比如我的是：<a href="https://trhx.github.io/">https://trhx.github.io</a> ，现在每个人都可以通过此链接访问你的博客了</p><h2 id="发表文章"><a href="#发表文章" class="headerlink" title="发表文章"></a>发表文章</h2><p>博客已经成功搭建了，但是我们该怎么写博客呢？</p><p>一、新建一个空文章，输入以下命令，会在项目 <code>\Hexo\source\_posts</code> 中生成 <code>文章标题.md</code>文件，文章标题根据需要命名</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">hexo n <span class="string">&quot;文章标题&quot;</span></span></span><br></pre></td></tr></table></figure><p>也可以直接在 <code>\Hexo\source\_posts</code> 目录下右键鼠标新建文本文档，改后缀为 <code>.md</code> 即可，这种方法比较方便</p><p>二、用编辑器编写文章</p><p><code>md</code> 全称 Markdown， Markdown 是 2004 年由 <code>John Gruberis</code> 设计和开发的纯文本格式的语法，非常的简单实用，常用的标记符号屈指可数，几分钟即可学会， <code>.md</code> 文件可以使用支持 Markdown 语法的编辑器编辑，然后将写好的文章（<code>.md文件</code>）保存到 <code>\Hexo\source\_posts</code> 文件夹下即可<br>当我们用编辑器写好文章后，可以使用以下命令将其推送到服务器上</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">hexo g</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">hexo d</span></span><br></pre></td></tr></table></figure><p>或者将两个命令合二为一输入以下命令：</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">hexo d -g</span></span><br></pre></td></tr></table></figure><h2 id="更换主题"><a href="#更换主题" class="headerlink" title="更换主题"></a>更换主题</h2><p>博客也搭建好了，文章也会写了，但是！！！默认的主题并不喜欢怎么办？现在，我们就来为自己的博客更换自己喜欢的主题</p><p><a href="https://hexo.io/themes/">点击此处</a>进入 <code>Hexo</code> 官网的主题专栏，我们可以看见有许多的主题供我们选择</p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240913170107010-6f6c3b.png" alt="image-20240913170107010"></p><p>我们要做的就是把主题克隆过来，在此我们以主题 <code>Aero-Dual</code> 为例，点进去我们就可以看见该主题作者的博客，鼠标滑到底，我们可以看见 <code>Theme By Levblanc</code> 的字样（其他主题类似），点击作者 <code>Levblanc</code> ，页面就会跳转到该主题所有的相关文件在 <code>Github</code> 上的地址，复制该地址</p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240913170156003-0bc495.png" alt="image-20240913170156003"></p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240913170214585-fda60e.png" alt="image-20240913170214585"></p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240913170228164-1111e9.png" alt="image-20240913170228164"></p><p>再打开 <code>Hexo</code> 文件夹下的 themes 目录（如：<code>E:\TRHX_Blog\Hexo\themes</code>），右键 Git Bash Here，输入以下命令：</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git <span class="built_in">clone</span> 此处填写你刚才复制的主题地址</span></span><br></pre></td></tr></table></figure><p>比如要安装 <code>Aero-Dual</code> 主题，则输入命令：</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git <span class="built_in">clone</span> https://github.com/levblanc/hexo-theme-aero-dual</span></span><br></pre></td></tr></table></figure><p>等待下载完成后即可在 <code>themes</code> 目录下生成 <code>hexo-theme-aero-dual</code> 文件夹，然后打开 <code>Hexo</code> 文件夹下的配置文件 <code>_config.yml</code> ，找到关键字 <code>theme</code>，修改参数为：<code>theme：hexo-theme-aero-dual</code> （其他主题修改成相应名称即可），再次注意冒号后面有一个空格！</p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240913170245625-cffdb6.png" alt="image-20240913170245625"></p><p>返回 <code>Hexo</code> 目录，右键 Git Bash Here ，输入以下命令开始部署主题：</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">hexo g</span>   </span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">hexo s</span></span><br></pre></td></tr></table></figure><p>此时打开浏览器，访问 <a href="http://localhost:4000/">http://localhost:4000/</a> 就可看见我们的主题已经更换了，如果感觉效果满意，我们就可以把它部署到<code>Github</code>上了</p><p>打开 <code>Hexo</code> 文件夹，右键 <code>Git Bash Here</code>，输入以下命令：</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">hexo clean</span>  </span><br><span class="line">//该命令的作用是清除缓存，若不输入此命令，服务器有可能更新不了主题</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">hexo g -d</span></span><br></pre></td></tr></table></figure><p>此时访问自己的博客即可看见更换后的主题，但我们仍然需要对主题的相关配置进行修改，比如网站标题，图标等等，<code>Hexo</code> 中有两份主要的配置文件，名称都是 <code>_config.yml</code> ，它们均是用于站点配置使用的。其中，一份位于站点根目录下（比如我的：<code>E:\TRHX_Blog\Hexo\_config.yml</code>），主要包含 <code>Hexo</code> 本身整站的配置；另一份位于主题目录下（比如我的：<code>E:\TRHX_Blog\Hexo\themes\hexo-theme-aero-dual\_config.yml</code>），这份配置由主题作者提供，主要用于配置主题相关的选项，一般 <code>_config.yml</code> 文件里都有相关注释，按需修改即可</p>]]></content>
      
      
      <categories>
          
          <category> Flask </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 日志 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>巨潮资讯(硬抠代码)</title>
      <link href="/2024/03/19/%E5%B7%A8%E6%BD%AE%E8%B5%84%E8%AE%AF(%E7%A1%AC%E6%8A%A0%E4%BB%A3%E7%A0%81)/"/>
      <url>/2024/03/19/%E5%B7%A8%E6%BD%AE%E8%B5%84%E8%AE%AF(%E7%A1%AC%E6%8A%A0%E4%BB%A3%E7%A0%81)/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="巨潮资讯-硬抠代码"><a href="#巨潮资讯-硬抠代码" class="headerlink" title="巨潮资讯(硬抠代码)"></a>巨潮资讯(硬抠代码)</h1><p>抓取网址：<a href="https://webapi.cninfo.com.cn/#/marketDataDate">https://webapi.cninfo.com.cn/#/marketDataDate</a></p><p>抓取目标：影片相关信息</p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240903093622569-c19449.png" alt="image-20240903093622569"></p><h2 id="网页分析"><a href="#网页分析" class="headerlink" title="网页分析"></a>网页分析</h2><p>打开网页后，按<code>F12</code>打开开发者工具，然后切换时间。</p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240903093848076-b505d3.png" alt="image-20240903093848076"></p><p>对接口进行分析，存在加密字段</p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240903093939266-bb7025.png" alt="image-20240903093939266"></p><p>交叉搜索定位关键字位置(增加一个路径)</p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240903094123327-8ee0f6.png" alt="image-20240903094123327"></p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240903094239612-a7d0ac.png" alt="image-20240903094239612"></p><p>定位关键字</p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240903094356752-59920e.png" alt="image-20240903094356752"></p><p>跟步进入方法内部,发现有混淆</p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240903094710870-323179.png" alt="image-20240903094710870"></p><p>抠代码</p><ul><li>将所有数组进行还原</li></ul><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240903103220477-94bb37.png" alt="image-20240903103220477"></p><ul><li>还原效果如下</li></ul><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240903103953457-cf93a8.png" alt="image-20240903103953457"></p><ul><li>运行代码，缺啥补啥</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> _0x3ca339 = <span class="built_in">require</span>(<span class="string">&quot;E:\\WAWS_ENV\\nodejs\\node_modules\\crypto-js&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">localStorage</span> = &#123;</span><br><span class="line">    <span class="string">&quot;tempenc&quot;</span>: <span class="string">&quot;1234567887654321&quot;</span>,</span><br><span class="line">    <span class="string">&quot;G_access_token&quot;</span>: <span class="string">&quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0ZW5hbnRfaWQiOjQ0LCJleHBpcmVzX2F0IjoxNzI1MzcwNDUzOTI4LCJkZXZpY2VfaWQiOiJrbGluZUFsbDIuaHRtbGJ0N2RlMG56LnAwbjFjYzVsaDcudXZ2byIsInVzZXJfaWQiOiI2MzczMTI5MTc1OTU3MjU2MzA4IiwiZGV2aWNlX3R5cGUiOiIyMDEiLCJjbGllbnRfaWQiOiJTWlhTSlpYXzQ1IiwiaG9zdF9pZGVudGlmaWVyIjoiNDc1YjFkOWIwMjhiNTVkMzk2ZDkyZWM2YWU4ZWVhMTMiLCJqdGkiOiI5MDc4ZDM2Mi0zNjMzLTQyNmYtYWI5OS1lN2Y3MTE4N2Q3NzgifQ.sQ0CTVPbOOU2vCFsujbPsCF1UKMlzNJ2muuvvkNe3oA&quot;</span>,</span><br><span class="line">    <span class="string">&quot;accept-cookie&quot;</span>: <span class="string">&quot;1&quot;</span>,</span><br><span class="line">    <span class="string">&quot;point&quot;</span>: <span class="string">&quot;point-eaa720e0-acf2-4d3d-a8f9-d1e0b906da68&quot;</span>,</span><br><span class="line">    <span class="string">&quot;G_localHttp&quot;</span>: <span class="string">&quot;https://gzdatasdk.mktdata.cn/application/&quot;</span>,</span><br><span class="line">    <span class="string">&quot;device_id_internal&quot;</span>: <span class="string">&quot;8ce74182-4979-4e37-af2e-86745d8cc188&quot;</span>,</span><br><span class="line">    <span class="string">&quot;slider&quot;</span>: <span class="string">&quot;slider-eaa720e0-acf2-4d3d-a8f9-d1e0b906da68&quot;</span>,</span><br><span class="line">    <span class="string">&quot;isLogin&quot;</span>: <span class="string">&quot;false&quot;</span>,</span><br><span class="line">    <span class="string">&quot;uniqueId&quot;</span>: <span class="string">&quot;bt7de0nz.p0n1cc5lh7.uvvo&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Hm_lvt_489bd07e99fbfc5f12cbb4145adb0a9b&quot;</span>: <span class="string">&quot;1756863270509|1725327254&quot;</span>,</span><br><span class="line">    <span class="string">&quot;G_userid&quot;</span>: <span class="string">&quot;6373129175957256308&quot;</span>,</span><br><span class="line">    <span class="string">&quot;getItem&quot;</span>:<span class="keyword">function</span> (<span class="params"></span>)&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">_0x5441b9 = &#123;</span><br><span class="line">    <span class="string">&#x27;WrFQL&#x27;</span>: <span class="keyword">function</span>(<span class="params">_0x20da6a, _0x4036c9</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> _0x20da6a / _0x4036c9;</span><br><span class="line">        &#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getResCode</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> _0xa8f94c = _0x3ca339[<span class="string">&#x27;AES&#x27;</span>][<span class="string">&#x27;encrypt&#x27;</span>](_0x3ca339[<span class="string">&#x27;enc&#x27;</span>][<span class="string">&#x27;Utf8&#x27;</span>][<span class="string">&#x27;parse&#x27;</span>](<span class="title class_">Math</span>[<span class="string">&#x27;floor&#x27;</span>](_0x5441b9[<span class="string">&#x27;WrFQL&#x27;</span>](<span class="keyword">new</span> <span class="title class_">Date</span>()[<span class="string">&#x27;getTime&#x27;</span>](), -<span class="number">0x1</span> * -<span class="number">0x76f</span> + <span class="number">0x1419</span> + <span class="number">0x7e</span> * -<span class="number">0x30</span>))), _0x3ca339[<span class="string">&#x27;enc&#x27;</span>][<span class="string">&#x27;Utf8&#x27;</span>][<span class="string">&#x27;parse&#x27;</span>](<span class="variable language_">localStorage</span>[<span class="string">&#x27;getItem&#x27;</span>](_0x5441b9[<span class="string">&#x27;OygmB&#x27;</span>]) || _0x5441b9[<span class="string">&#x27;NabjT&#x27;</span>]), &#123;</span><br><span class="line">            <span class="string">&#x27;iv&#x27;</span>: _0x3ca339[<span class="string">&#x27;enc&#x27;</span>][<span class="string">&#x27;Utf8&#x27;</span>][<span class="string">&#x27;parse&#x27;</span>](_0x5441b9[<span class="string">&#x27;NabjT&#x27;</span>]),</span><br><span class="line">            <span class="string">&#x27;mode&#x27;</span>: _0x3ca339[<span class="string">&#x27;mode&#x27;</span>][<span class="string">&quot;CBC&quot;</span>],</span><br><span class="line">            <span class="string">&#x27;padding&#x27;</span>: _0x3ca339[<span class="string">&quot;pad&quot;</span>][<span class="string">&#x27;Pkcs7&#x27;</span>]</span><br><span class="line">        &#125;);</span><br><span class="line">    <span class="keyword">return</span> _0x3ca339[<span class="string">&#x27;enc&#x27;</span>][<span class="string">&#x27;Base64&#x27;</span>][<span class="string">&#x27;stringify&#x27;</span>](_0xa8f94c[<span class="string">&#x27;ciphertext&#x27;</span>]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">getResCode</span>())</span><br></pre></td></tr></table></figure><h3 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h3><ul><li>大对象中需要用到什么就找什么，不要一次复制所有</li></ul><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240903110604524-2a73c2.png" alt="image-20240903110604524"></p><ul><li>对象在复制的时候，可能出现复制不全的情况，需要到代码中进行观察</li></ul><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240903111155003-3463a1.png" alt="image-20240903111155003"></p><ul><li>导包直接用，不用从代码中抠</li></ul><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240903110707639-03d7e6.png" alt="image-20240903110707639"></p><ul><li>数组的坑，以实际运行为准</li></ul><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240903110831312-e44f10.png" alt="image-20240903110831312"></p><h3 id="结果"><a href="#结果" class="headerlink" title="结果"></a>结果</h3><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240903111227425-76c767.png" alt="image-20240903111227425"></p>]]></content>
      
      
      <categories>
          
          <category> Flask </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 日志 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>巨潮资讯</title>
      <link href="/2024/03/19/%E5%B7%A8%E6%BD%AE%E8%B5%84%E8%AE%AF/"/>
      <url>/2024/03/19/%E5%B7%A8%E6%BD%AE%E8%B5%84%E8%AE%AF/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="巨潮资讯"><a href="#巨潮资讯" class="headerlink" title="巨潮资讯"></a>巨潮资讯</h1><p>抓取网址：<a href="https://webapi.cninfo.com.cn/#/marketDataDate">https://webapi.cninfo.com.cn/#/marketDataDate</a></p><p>抓取目标：影片相关信息</p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240903093622569-c19449.png" alt="image-20240903093622569"></p><h2 id="网页分析"><a href="#网页分析" class="headerlink" title="网页分析"></a>网页分析</h2><p>打开网页后，按<code>F12</code>打开开发者工具，然后切换时间。</p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240903093848076-b505d3.png" alt="image-20240903093848076"></p><p>对接口进行分析，存在加密字段</p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240903093939266-bb7025.png" alt="image-20240903093939266"></p><p>交叉搜索定位关键字位置(增加一个路径)</p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240903094123327-8ee0f6.png" alt="image-20240903094123327"></p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240903094239612-a7d0ac.png" alt="image-20240903094239612"></p><p>定位关键字</p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240903094356752-59920e.png" alt="image-20240903094356752"></p><p>跟步进入方法内部,发现有混淆</p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240903094710870-323179.png" alt="image-20240903094710870"></p><p>传入ob解混淆网站进行解混淆</p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240903094742097-279a03.png" alt="image-20240903094742097"></p><p>将还原后的代码进行搜索AES or DES,我们发现是AES</p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240903094616091-03a2f6.png" alt="image-20240903094616091"></p><p>对代码进行扣取，还原</p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240903101056766-7c9634.png" alt="image-20240903101056766"></p><p>当不使用Accept-EncKey 或者 Accept-EncKey 不对的时候，禁止访问</p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240903100955782-01f02e.png" alt="image-20240903100955782"></p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240903100719186-7d0b12.png" alt="image-20240903100719186"></p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><ul><li>js代码</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">Cryptojs</span> = <span class="built_in">require</span>(<span class="string">&quot;E:\\WAWS_ENV\\nodejs\\node_modules\\crypto-js&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">aaa</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> _0xa8f94c = <span class="title class_">Cryptojs</span>.<span class="property">AES</span>.<span class="title function_">encrypt</span>(<span class="title class_">Cryptojs</span>.<span class="property">enc</span>.<span class="property">Utf8</span>.<span class="title function_">parse</span>(<span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getTime</span>() / <span class="number">1000</span>)), <span class="title class_">Cryptojs</span>.<span class="property">enc</span>.<span class="property">Utf8</span>.<span class="title function_">parse</span>(<span class="string">&quot;1234567887654321&quot;</span>), &#123;</span><br><span class="line">          <span class="string">&#x27;iv&#x27;</span>: <span class="title class_">Cryptojs</span>.<span class="property">enc</span>.<span class="property">Utf8</span>.<span class="title function_">parse</span>(<span class="string">&quot;1234567887654321&quot;</span>),</span><br><span class="line">          <span class="string">&#x27;mode&#x27;</span>: <span class="title class_">Cryptojs</span>.<span class="property">mode</span>.<span class="property">CBC</span>,</span><br><span class="line">          <span class="string">&#x27;padding&#x27;</span>: <span class="title class_">Cryptojs</span>.<span class="property">pad</span>.<span class="property">Pkcs7</span></span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">Cryptojs</span>.<span class="property">enc</span>.<span class="property">Base64</span>.<span class="title function_">stringify</span>(_0xa8f94c.<span class="property">ciphertext</span>);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">aaa</span>())</span><br></pre></td></tr></table></figure><ul><li>python请求代码</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> execjs</span><br><span class="line"></span><br><span class="line">t = execjs.<span class="built_in">compile</span>(<span class="built_in">open</span>(<span class="string">&#x27;./kkdkdkd.js&#x27;</span>,<span class="string">&quot;r&quot;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>).read()).call(<span class="string">&#x27;aaa&#x27;</span>)</span><br><span class="line"></span><br><span class="line">cookies = &#123;</span><br><span class="line">    <span class="string">&#x27;routeId&#x27;</span>: <span class="string">&#x27;.uc2&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;MALLSSID&#x27;</span>: <span class="string">&#x27;7A51366E497A586D356959664A68525A4F2F5841317450624E774942314D336D584C4167554A4F4B573267566778442F4831734667775935416C46676D4A416E&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Hm_lvt_489bd07e99fbfc5f12cbb4145adb0a9b&#x27;</span>: <span class="string">&#x27;1725327254&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;HMACCOUNT&#x27;</span>: <span class="string">&#x27;0AC70A95D0007624&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;SL_G_WPT_TO&#x27;</span>: <span class="string">&#x27;eo&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;SL_GWPT_Show_Hide_tmp&#x27;</span>: <span class="string">&#x27;1&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;SL_wptGlobTipTmp&#x27;</span>: <span class="string">&#x27;1&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Hm_lpvt_489bd07e99fbfc5f12cbb4145adb0a9b&#x27;</span>: <span class="string">&#x27;1725327271&#x27;</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">&#x27;Accept&#x27;</span>: <span class="string">&#x27;*/*&#x27;</span>,</span><br><span class="line">    <span class="comment"># &#x27;Accept-EncKey&#x27;: t,</span></span><br><span class="line">    <span class="string">&#x27;Accept-EncKey&#x27;</span>: <span class="string">&#x27;V9oo1dRhZZje1ZmMrmMEuw==&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Accept-Language&#x27;</span>: <span class="string">&#x27;zh-CN,zh;q=0.9&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Cache-Control&#x27;</span>: <span class="string">&#x27;no-cache&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Connection&#x27;</span>: <span class="string">&#x27;keep-alive&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/x-www-form-urlencoded; charset=UTF-8&#x27;</span>,</span><br><span class="line">    <span class="comment"># &#x27;Cookie&#x27;: &#x27;routeId=.uc2; MALLSSID=7A51366E497A586D356959664A68525A4F2F5841317450624E774942314D336D584C4167554A4F4B573267566778442F4831734667775935416C46676D4A416E; Hm_lvt_489bd07e99fbfc5f12cbb4145adb0a9b=1725327254; HMACCOUNT=0AC70A95D0007624; SL_G_WPT_TO=eo; SL_GWPT_Show_Hide_tmp=1; SL_wptGlobTipTmp=1; Hm_lpvt_489bd07e99fbfc5f12cbb4145adb0a9b=1725327271&#x27;,</span></span><br><span class="line">    <span class="string">&#x27;Origin&#x27;</span>: <span class="string">&#x27;https://webapi.cninfo.com.cn&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Pragma&#x27;</span>: <span class="string">&#x27;no-cache&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Referer&#x27;</span>: <span class="string">&#x27;https://webapi.cninfo.com.cn/&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Sec-Fetch-Dest&#x27;</span>: <span class="string">&#x27;empty&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Sec-Fetch-Mode&#x27;</span>: <span class="string">&#x27;cors&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Sec-Fetch-Site&#x27;</span>: <span class="string">&#x27;same-origin&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/127.0.0.0 Safari/537.36&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;X-Requested-With&#x27;</span>: <span class="string">&#x27;XMLHttpRequest&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;sec-ch-ua&#x27;</span>: <span class="string">&#x27;&quot;Not)A;Brand&quot;;v=&quot;99&quot;, &quot;Google Chrome&quot;;v=&quot;127&quot;, &quot;Chromium&quot;;v=&quot;127&quot;&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;sec-ch-ua-mobile&#x27;</span>: <span class="string">&#x27;?0&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;sec-ch-ua-platform&#x27;</span>: <span class="string">&#x27;&quot;Windows&quot;&#x27;</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">proxies = &#123;</span><br><span class="line">            <span class="string">&#x27;http&#x27;</span>: <span class="string">&#x27;127.0.0.1:10792&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;https&#x27;</span>: <span class="string">&#x27;127.0.0.1:10792&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">data = &#123;</span><br><span class="line">    <span class="string">&#x27;tdate&#x27;</span>: <span class="string">&#x27;2024-08-28&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;market&#x27;</span>: <span class="string">&#x27;SZE&#x27;</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">response = requests.post(<span class="string">&#x27;https://webapi.cninfo.com.cn/api/sysapi/p_sysapi1007&#x27;</span>, cookies=cookies, headers=headers, data=data,proxies=proxies).json()</span><br><span class="line"><span class="built_in">print</span>(response)</span><br></pre></td></tr></table></figure><h3 id="结果"><a href="#结果" class="headerlink" title="结果"></a>结果</h3><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240903101139361-e614b1.png" alt="image-20240903101139361"></p>]]></content>
      
      
      <categories>
          
          <category> Flask </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 日志 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>测试2</title>
      <link href="/2024/03/19/%E6%B5%8B%E8%AF%952/"/>
      <url>/2024/03/19/%E6%B5%8B%E8%AF%952/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="我们都是测试的文件"><a href="#我们都是测试的文件" class="headerlink" title="我们都是测试的文件"></a>我们都是测试的文件</h1><p>哈哈哈哈</p><p>基督教大家都基督教</p>]]></content>
      
      
      <categories>
          
          <category> Flask </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 日志 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>百度翻译(已经废弃)</title>
      <link href="/2024/03/19/%E7%99%BE%E5%BA%A6%E7%BF%BB%E8%AF%91(%E5%B7%B2%E7%BB%8F%E5%BA%9F%E5%BC%83)/"/>
      <url>/2024/03/19/%E7%99%BE%E5%BA%A6%E7%BF%BB%E8%AF%91(%E5%B7%B2%E7%BB%8F%E5%BA%9F%E5%BC%83)/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="百度翻译-已经废弃"><a href="#百度翻译-已经废弃" class="headerlink" title="百度翻译(已经废弃)"></a>百度翻译(已经废弃)</h1><p>抓取网址：<a href="https://fanyi.baidu.com/mtpe-individual/multimodal?query=home&lang=en2zh">https://fanyi.baidu.com/mtpe-individual/multimodal?query=home&amp;lang=en2zh</a></p><p>抓取目标：翻译相关信息</p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fimage-20240903203029477-d52762.png" alt="image-20240903203029477"></p><h3 id="逆向目标"><a href="#逆向目标" class="headerlink" title="逆向目标"></a>逆向目标</h3><ul><li>目标：百度翻译接口参数</li><li>主页：<a href="https://cloud.tencent.com/developer/tools/blog-entry?target=https://fanyi.youdao.com/&source=article&objectId=1856904">https://fanyi.youdao.com/</a></li><li>接口：<a href="https://cloud.tencent.com/developer/tools/blog-entry?target=https://fanyi.baidu.com/v2transapi&source=article&objectId=1856904">https://fanyi.baidu.com/v2transapi</a></li><li>逆向参数：<ul><li>Form Data：<ul><li><code>sign: 706553.926920</code></li><li><code>token: d838e2bd3d5a3bb67100a7b789463022</code></li></ul></li></ul></li></ul><h3 id="逆向过程"><a href="#逆向过程" class="headerlink" title="逆向过程"></a>逆向过程</h3><h4 id="抓包分析"><a href="#抓包分析" class="headerlink" title="抓包分析"></a>抓包分析</h4><p>我们在百度翻译页面随便输入文字，可以看到没有刷新页面，翻译结果就出来了，由此可以推断是 Ajax 加载的，打开<a href="https://cloud.tencent.com/product/cclid?from_column=20065&from=20065">开发者工具</a>，选择 XHR 过滤 Ajax 请求，可以看到有一条 URL 为 <a href="https://cloud.tencent.com/developer/tools/blog-entry?target=https://fanyi.baidu.com/v2transapi?from=zh&to=en&source=article&objectId=1856904">https://fanyi.baidu.com/v2transapi?from=zh&to=en</a> 的 POST 请求，当我们输入“测试”的时候，他返回的数据经过 Unicode 转中文后类似于如下结构：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line"><span class="attr">&quot;trans_result&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line"><span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">&#123;</span></span><br><span class="line"><span class="attr">&quot;dst&quot;</span><span class="punctuation">:</span> <span class="string">&quot;test&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;prefixWrap&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;result&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">0</span><span class="punctuation">,</span> <span class="string">&quot;test&quot;</span><span class="punctuation">,</span> <span class="punctuation">[</span><span class="string">&quot;0|6&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line"><span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line"><span class="punctuation">[</span><span class="string">&quot;0|6&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line"><span class="punctuation">[</span><span class="string">&quot;0|4&quot;</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;src&quot;</span><span class="punctuation">:</span> <span class="string">&quot;测试&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;from&quot;</span><span class="punctuation">:</span> <span class="string">&quot;zh&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;status&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;to&quot;</span><span class="punctuation">:</span> <span class="string">&quot;en&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="number">2</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;dict_result&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="comment">// 略</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;liju_result&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="comment">// 略</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><code>trans_result</code> 是翻译的结果，<code>dict_result</code> 是更多翻译结果，<code>liju_result</code> 是例句、标签等，那么这个 URL 就是我们需要的翻译接口了。</p><p>由于是 POST 请求，我们观察它的 Form Data：</p><ul><li><code>from</code>：待翻译的语言；</li><li><code>to</code>：目标语言；</li><li><code>query</code>：待翻译的字符串；</li><li><code>transtype</code>：实时翻译 <code>realtime</code>，手动点击翻译 <code>translang</code>；</li><li><code>simple_means_flag</code>、<code>domain</code>：固定值；</li><li><code>sign</code>：如果待翻译字符串改变的话，它的值也会跟着变，需要进一步分析；</li><li><code>token</code>：它的值虽然不会变，但是不知道是怎么来的，需要进一步分析。</li></ul><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2F3d7d74c051c338270deb5e7a43691ab4-e6b0a6.png" alt="img"></p><p>在抓包过程中我们还注意到有一条 URL 为 <a href="https://cloud.tencent.com/developer/tools/blog-entry?target=https://fanyi.baidu.com/langdetect&source=article&objectId=1856904">https://fanyi.baidu.com/langdetect</a> 的 POST 请求，而它返回的数据如下：</p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span><span class="attr">&quot;error&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;msg&quot;</span><span class="punctuation">:</span><span class="string">&quot;success&quot;</span><span class="punctuation">,</span><span class="attr">&quot;lan&quot;</span><span class="punctuation">:</span><span class="string">&quot;zh&quot;</span><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>很明显，这个是自动检测待翻译字符串的语言，它的 Form Data 也很简单，<code>query</code> 就是待翻译的字符串，这个接口可以根据实际场景进行使用。</p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fdc4d48fd5e45d25eff560c4233d4f146-2a3307.png" alt="img"></p><h4 id="获取-token"><a href="#获取-token" class="headerlink" title="获取 token"></a>获取 token</h4><p><code>token</code> 的值由于是固定的，所以我们可以尝直接搜索，可以在首页源码里面找到，使用正则表达式可以直接提取。</p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2F0854da89b555f31fa427c4bfaf51eca9-ec534d.png" alt="img"></p><h4 id="获取-sign"><a href="#获取-sign" class="headerlink" title="获取 sign"></a>获取 sign</h4><p><code>sign</code> 是会改变的，怀疑是 JS 动态生成，所以我们尝试全局搜索 <code>sign</code>，这里有个技巧，只搜索 <code>sign</code> 会出来很多结果，可以加上冒号或者等于号来缩小范围，搜索 <code>sign:</code> 可以在 index_a8b7098.js 里面找到 5 个符合的位置，观察可以发现在第 8392 行的位置处，数据最全面，和前面抓包看到的 Form Data 数据一致。</p><p>点击行号，在此处埋下断点，点击翻译按钮，可以看到成功断下，此时 <code>sign</code> 的值就是最终我们想要的的值：</p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2Fd2eb1847447b9567accb7686f88bf1e4-954742.png" alt="img"></p><p>这里将待翻译字符串传入了 <code>L</code> 函数，鼠标放到 <code>L</code> 函数上，直接点击跟进这个函数，可以发现 <code>sign</code> 的值其实是 <code>function e(r)</code> 这个函数进行一系列操作之后得到的，直接复制这个函数进行本地调试，调试过程中可以发现缺少一个 <code>i</code> 的值，在右边的 Closure 栏里，或者鼠标选中 <code>i</code>，可以看到 <code>i</code> 的值，多次调试发现它是固定的，可以直接写死：</p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2F83683c76896fc4371cc362909be40277-acec2e.png" alt="img"></p><p>继续调试 <code>function e(r)</code>，还会提示缺少一个函数 <code>n</code>，那么直接跟进这个函数，将函数 <code>n</code> 一同复制下来即可。</p><p><img src="https://cdn.jsdelivr.net/gh/Killer-89757/PicBed/images/2024%2F09%2F0e20c7022aac6b48b69794e9ba37bfb7-60880f.png" alt="img"></p><h3 id="完整代码"><a href="#完整代码" class="headerlink" title="完整代码"></a>完整代码</h3><h4 id="baidu-encrypt-js"><a href="#baidu-encrypt-js" class="headerlink" title="baidu_encrypt.js"></a>baidu_encrypt.js</h4><p>获取 <code>sign</code> 的值：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> i = <span class="string">&#x27;320305.131321201&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">n</span>(<span class="params">r, o</span>) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> t = <span class="number">0</span>; t &lt; o.<span class="property">length</span> - <span class="number">2</span>; t += <span class="number">3</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> a = o.<span class="title function_">charAt</span>(t + <span class="number">2</span>);</span><br><span class="line">        a = a &gt;= <span class="string">&quot;a&quot;</span> ? a.<span class="title function_">charCodeAt</span>(<span class="number">0</span>) - <span class="number">87</span> : <span class="title class_">Number</span>(a), a = <span class="string">&quot;+&quot;</span> === o.<span class="title function_">charAt</span>(t + <span class="number">1</span>) ? r &gt;&gt;&gt; a : r &lt;&lt; a, r = <span class="string">&quot;+&quot;</span> === o.<span class="title function_">charAt</span>(t) ? r + a &amp; <span class="number">4294967295</span> : r ^ a</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> r</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">e</span>(<span class="params">r</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> o = r.<span class="title function_">match</span>(<span class="regexp">/[\uD800-\uDBFF][\uDC00-\uDFFF]/g</span>);</span><br><span class="line">    <span class="keyword">if</span> (<span class="literal">null</span> === o) &#123;</span><br><span class="line">        <span class="keyword">var</span> t = r.<span class="property">length</span>;</span><br><span class="line">        t &gt; <span class="number">30</span> &amp;&amp; (r = <span class="string">&quot;&quot;</span> + r.<span class="title function_">substr</span>(<span class="number">0</span>, <span class="number">10</span>) + r.<span class="title function_">substr</span>(<span class="title class_">Math</span>.<span class="title function_">floor</span>(t / <span class="number">2</span>) - <span class="number">5</span>, <span class="number">10</span>) + r.<span class="title function_">substr</span>(-<span class="number">10</span>, <span class="number">10</span>))</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> e = r.<span class="title function_">split</span>(<span class="regexp">/[\uD800-\uDBFF][\uDC00-\uDFFF]/</span>), C = <span class="number">0</span>, h = e.<span class="property">length</span>, f = []; h &gt; C; C++) <span class="string">&quot;&quot;</span> !== e[C] &amp;&amp; f.<span class="property">push</span>.<span class="title function_">apply</span>(f, <span class="title function_">a</span>(e[C].<span class="title function_">split</span>(<span class="string">&quot;&quot;</span>))), C !== h - <span class="number">1</span> &amp;&amp; f.<span class="title function_">push</span>(o[C]);</span><br><span class="line">        <span class="keyword">var</span> g = f.<span class="property">length</span>;</span><br><span class="line">        g &gt; <span class="number">30</span> &amp;&amp; (r = f.<span class="title function_">slice</span>(<span class="number">0</span>, <span class="number">10</span>).<span class="title function_">join</span>(<span class="string">&quot;&quot;</span>) + f.<span class="title function_">slice</span>(<span class="title class_">Math</span>.<span class="title function_">floor</span>(g / <span class="number">2</span>) - <span class="number">5</span>, <span class="title class_">Math</span>.<span class="title function_">floor</span>(g / <span class="number">2</span>) + <span class="number">5</span>).<span class="title function_">join</span>(<span class="string">&quot;&quot;</span>) + f.<span class="title function_">slice</span>(-<span class="number">10</span>).<span class="title function_">join</span>(<span class="string">&quot;&quot;</span>))</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> u = <span class="keyword">void</span> <span class="number">0</span>, l = <span class="string">&quot;&quot;</span> + <span class="title class_">String</span>.<span class="title function_">fromCharCode</span>(<span class="number">103</span>) + <span class="title class_">String</span>.<span class="title function_">fromCharCode</span>(<span class="number">116</span>) + <span class="title class_">String</span>.<span class="title function_">fromCharCode</span>(<span class="number">107</span>);</span><br><span class="line">    u = <span class="literal">null</span> !== i ? i : (i = <span class="variable language_">window</span>[l] || <span class="string">&quot;&quot;</span>) || <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> d = u.<span class="title function_">split</span>(<span class="string">&quot;.&quot;</span>), m = <span class="title class_">Number</span>(d[<span class="number">0</span>]) || <span class="number">0</span>, s = <span class="title class_">Number</span>(d[<span class="number">1</span>]) || <span class="number">0</span>, S = [], c = <span class="number">0</span>, v = <span class="number">0</span>; v &lt; r.<span class="property">length</span>; v++) &#123;</span><br><span class="line">        <span class="keyword">var</span> A = r.<span class="title function_">charCodeAt</span>(v);</span><br><span class="line">        <span class="number">128</span> &gt; A ? S[c++] = A : (<span class="number">2048</span> &gt; A ? S[c++] = A &gt;&gt; <span class="number">6</span> | <span class="number">192</span> : (<span class="number">55296</span> === (<span class="number">64512</span> &amp; A) &amp;&amp; v + <span class="number">1</span> &lt; r.<span class="property">length</span> &amp;&amp; <span class="number">56320</span> === (<span class="number">64512</span> &amp; r.<span class="title function_">charCodeAt</span>(v + <span class="number">1</span>)) ? (A = <span class="number">65536</span> + ((<span class="number">1023</span> &amp; A) &lt;&lt; <span class="number">10</span>) + (<span class="number">1023</span> &amp; r.<span class="title function_">charCodeAt</span>(++v)), S[c++] = A &gt;&gt; <span class="number">18</span> | <span class="number">240</span>, S[c++] = A &gt;&gt; <span class="number">12</span> &amp; <span class="number">63</span> | <span class="number">128</span>) : S[c++] = A &gt;&gt; <span class="number">12</span> | <span class="number">224</span>, S[c++] = A &gt;&gt; <span class="number">6</span> &amp; <span class="number">63</span> | <span class="number">128</span>), S[c++] = <span class="number">63</span> &amp; A | <span class="number">128</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> p = m, F = <span class="string">&quot;&quot;</span> + <span class="title class_">String</span>.<span class="title function_">fromCharCode</span>(<span class="number">43</span>) + <span class="title class_">String</span>.<span class="title function_">fromCharCode</span>(<span class="number">45</span>) + <span class="title class_">String</span>.<span class="title function_">fromCharCode</span>(<span class="number">97</span>) + (<span class="string">&quot;&quot;</span> + <span class="title class_">String</span>.<span class="title function_">fromCharCode</span>(<span class="number">94</span>) + <span class="title class_">String</span>.<span class="title function_">fromCharCode</span>(<span class="number">43</span>) + <span class="title class_">String</span>.<span class="title function_">fromCharCode</span>(<span class="number">54</span>)), D = <span class="string">&quot;&quot;</span> + <span class="title class_">String</span>.<span class="title function_">fromCharCode</span>(<span class="number">43</span>) + <span class="title class_">String</span>.<span class="title function_">fromCharCode</span>(<span class="number">45</span>) + <span class="title class_">String</span>.<span class="title function_">fromCharCode</span>(<span class="number">51</span>) + (<span class="string">&quot;&quot;</span> + <span class="title class_">String</span>.<span class="title function_">fromCharCode</span>(<span class="number">94</span>) + <span class="title class_">String</span>.<span class="title function_">fromCharCode</span>(<span class="number">43</span>) + <span class="title class_">String</span>.<span class="title function_">fromCharCode</span>(<span class="number">98</span>)) + (<span class="string">&quot;&quot;</span> + <span class="title class_">String</span>.<span class="title function_">fromCharCode</span>(<span class="number">43</span>) + <span class="title class_">String</span>.<span class="title function_">fromCharCode</span>(<span class="number">45</span>) + <span class="title class_">String</span>.<span class="title function_">fromCharCode</span>(<span class="number">102</span>)), b = <span class="number">0</span>; b &lt; S.<span class="property">length</span>; b++) p += S[b], p = <span class="title function_">n</span>(p, F);</span><br><span class="line">    <span class="keyword">return</span> p = <span class="title function_">n</span>(p, D), p ^= s, <span class="number">0</span> &gt; p &amp;&amp; (p = (<span class="number">2147483647</span> &amp; p) + <span class="number">2147483648</span>), p %= <span class="number">1e6</span>, p.<span class="title function_">toString</span>() + <span class="string">&quot;.&quot;</span> + (p ^ m)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// console.log(e(&#x27;测试&#x27;))</span></span><br></pre></td></tr></table></figure><ul><li>python代码<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> execjs</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">index_url = <span class="string">&#x27;https://fanyi.baidu.com/&#x27;</span></span><br><span class="line">lang_url = <span class="string">&#x27;https://fanyi.baidu.com/langdetect&#x27;</span></span><br><span class="line">translate_api = <span class="string">&#x27;https://fanyi.baidu.com/v2transapi&#x27;</span></span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">&#x27;Accept&#x27;</span>: <span class="string">&#x27;*/*&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Accept-Encoding&#x27;</span>: <span class="string">&#x27;gzip, deflate, br&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Accept-Language&#x27;</span>: <span class="string">&#x27;zh,zh-CN;q=0.9,en-US;q=0.8,en;q=0.7&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Connection&#x27;</span>: <span class="string">&#x27;keep-alive&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/x-www-form-urlencoded; charset=UTF-8&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Cookie&#x27;</span>: <span class="string">&#x27;BIDUPSID=3BE16D933E9C0182F2A6E93D7A9D1424; PSTM=1623723330; BAIDUID=8496908995397662040287D2CE1C4224:FG=1; __yjs_duid=1_779078c2c847bb3217554b8549ad49bd1623728424311; REALTIME_TRANS_SWITCH=1; HISTORY_SWITCH=1; FANYI_WORD_SWITCH=1; SOUND_SPD_SWITCH=1; SOUND_PREFER_SWITCH=1; BDSFRCVID_BFESS=BkFOJeCT5G3_WP5eFqJ2T4D2p2KKN9OTTPjcTR5qJ04BtyCVNKsaEG0PtOgMNBDbJ2MRogKKLgOTHULF_2uxOjjg8UtVJeC6EG0Ptf8g0M5; H_BDCLCKID_SF_BFESS=tJ4toCPMJI_3fP36q45HMt00qxby26PDajn9aJ5nQI5nhU7505oqDJ0Z0ROOWhRute3i2DTvQUbmjRO206oay6O3LlO83h5wW57KKl0MLPbcep68LxODy6DI0xnMBMnr52OnaU513fAKftnOM46JehL3346-35543bRTLnLy5KJYMDF4D5_ae5O3DGRf-b-XKD600PK8Kb7VbUF6qfnkbft7jtteyhbTJCID-UQKQPnc_pC4yURFef473b3B5h3NJ66ZoIbPbPTTSlroKPQpQT8r5-nMWx6G3IrZoq64ab3vOpRTXpO13fAzBN5thURB2DkO-4bCWJ5TMl5jDh3Mb6ksD-FtqjDjJRCOoI--f-3bfTrP-trf5DCShUFs3tnlB2Q-5M-a3KOrSUtGbfjay6D7j-8HbTjiW2_82MbmLncjSM_GKfC2jMD32tbpWfneKmTxoUJ2Bb3Y8loe-xCKXqDebPRiWPb9QgbP2pQ7tt5W8ncFbT7l5hKpbt-q0x-jLTnhVn0MBCK0HPonHjKbDTvL3f; BDORZ=B490B5EBF6F3CD402E515D22BCDA1598; Hm_lvt_64ecd82404c51e03dc91cb9e8c025574=1624438637,1624603638,1624928461,1624953786; H_PS_PSSID=34131_34099_31253_34004_33607_34107_34135; delPer=0; PSINO=6; BAIDUID_BFESS=8496908995397662040287D2CE1C4224:FG=1; BDRCVFR[X_XKQks0S63]=mk3SLVN4HKm; Hm_lpvt_64ecd82404c51e03dc91cb9e8c025574=1624962661; __yjs_st=2_MzJhZTMxZGU5MjZjNGJiZTJiZjQwYjVkMWM5ZjYyMGFjZDlkMDJmNTU3OGU5ZTM4N2JjNjNkODAwYWJiY2M3NDA1NWEyODNkMzNkMDEzNThiZTU4NzNhMTQxYzIxOTQyMzg3MjhiMzA5ZjY2MDczZTBhZDdmZDg4YTFhNjVmZTMwZTYyZTRjNmRhMWNmYzg3NDFjODYzYTRlZTE2NzBmODAyMWI4MTI3NTZmNjg1MDk4OWIxZTYzNTc4NzhjY2E3NzU3ZGYyZmI1ODdjZTM5ZDNlOGU0ZGQ2NzE5OGU2NzUzM2ZhZTcxZmVjNjI4MDIyN2Y1N2NlMzZmMmRlY2U4Yl83XzQ5NzQ4ZWE4; ab_sr=1.0.1_MmUwODU0NGE4NjIwZmY4NjgxZmM1NGYxOTI5ZWQwOGU2NjU3ZjgwNzhkMTNjNDI5NWE0ODQwYzlkZDVjY2Q1YWEyZDQyZWI0ZjNkMWQ0NTEyMGFjYzdiNDdmNzYxYjNiMjkxZTI1M2I3Y2VhZGE3NDEzOTgyMjY1MjBlZGM4OGJiZGVjMzFkYTM3ODgyMTRkZjJhMGYzNGM0MGJmMGY1Yg==&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Host&#x27;</span>: <span class="string">&#x27;fanyi.baidu.com&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Origin&#x27;</span>: <span class="string">&#x27;https://fanyi.baidu.com&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Referer&#x27;</span>: <span class="string">&#x27;https://fanyi.baidu.com/&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;sec-ch-ua&#x27;</span>: <span class="string">&#x27;&quot; Not;A Brand&quot;;v=&quot;99&quot;, &quot;Google Chrome&quot;;v=&quot;91&quot;, &quot;Chromium&quot;;v=&quot;91&quot;&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;sec-ch-ua-mobile&#x27;</span>: <span class="string">&#x27;?0&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Sec-Fetch-Dest&#x27;</span>: <span class="string">&#x27;empty&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Sec-Fetch-Mode&#x27;</span>: <span class="string">&#x27;cors&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Sec-Fetch-Site&#x27;</span>: <span class="string">&#x27;same-origin&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.114 Safari/537.36&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;X-Requested-With&#x27;</span>: <span class="string">&#x27;XMLHttpRequest&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_token</span>():</span><br><span class="line">    response = requests.get(url=index_url, headers=headers).text</span><br><span class="line">    token = re.findall(<span class="string">r&quot;token: &#x27;([0-9a-z]+)&quot;</span>, response)[<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">return</span> token</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_sign</span>(<span class="params">query</span>):</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;baidu_encrypt.js&#x27;</span>, <span class="string">&#x27;r&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        baidu_js = f.read()</span><br><span class="line">    sign = execjs.<span class="built_in">compile</span>(baidu_js).call(<span class="string">&#x27;e&#x27;</span>, query)</span><br><span class="line">    <span class="keyword">return</span> sign</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_result</span>(<span class="params">lang, query, sign, token</span>):</span><br><span class="line">    data = &#123;</span><br><span class="line">        <span class="string">&#x27;from&#x27;</span>: lang,</span><br><span class="line">        <span class="string">&#x27;to&#x27;</span>: <span class="string">&#x27;en&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;query&#x27;</span>: query,</span><br><span class="line">        <span class="string">&#x27;transtype&#x27;</span>: <span class="string">&#x27;realtime&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;simple_means_flag&#x27;</span>: <span class="string">&#x27;3&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;sign&#x27;</span>: sign,</span><br><span class="line">        <span class="string">&#x27;token&#x27;</span>: token,</span><br><span class="line">    &#125;</span><br><span class="line">    response = requests.post(url=translate_api, headers=headers, data=data)</span><br><span class="line">    result = response.json()[<span class="string">&#x27;trans_result&#x27;</span>][<span class="string">&#x27;data&#x27;</span>][<span class="number">0</span>][<span class="string">&#x27;dst&#x27;</span>]</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    query = <span class="built_in">input</span>(<span class="string">&#x27;请输入要翻译的文字：&#x27;</span>)</span><br><span class="line">    response = requests.post(url=lang_url, headers=headers, data=&#123;<span class="string">&#x27;query&#x27;</span>: query&#125;)</span><br><span class="line">    lang = response.json()[<span class="string">&#x27;lan&#x27;</span>]</span><br><span class="line">    token = get_token()</span><br><span class="line">    sign = get_sign(query)</span><br><span class="line">    result = get_result(lang, query, sign, token)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;翻译成英文的结果为：&#x27;</span>, result)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> Flask </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 日志 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>测试</title>
      <link href="/2024/03/19/%E6%B5%8B%E8%AF%95/"/>
      <url>/2024/03/19/%E6%B5%8B%E8%AF%95/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="python操作数据库"><a href="#python操作数据库" class="headerlink" title="python操作数据库"></a><a href="https://xugaoxiang.com/2020/06/12/python-pymysql/">python操作数据库</a></h1><h3 id="软硬件环境"><a href="#软硬件环境" class="headerlink" title="软硬件环境"></a>软硬件环境</h3><ul><li>windows 10 64bit</li><li>Python 3.7.4</li><li><a href="https://xugaoxiang.com/tag/mysql/">mysql</a> 8.0.20</li><li><a href="https://xugaoxiang.com/tag/pymysql/">pymysql</a></li></ul><p>在开发中经常涉及到数据库的使用，而<code>mysql</code>是使用最为广泛的关系型数据库，因为它开源、免费。本文就来使用<code>python</code>语言来操作<code>mysql</code>数据库。</p><h3 id="安装mysql"><a href="#安装mysql" class="headerlink" title="安装mysql"></a>安装mysql</h3><p>来到<code>mysql</code>的官方网站下载安装包 <a href="https://dev.mysql.com/downloads/installer/%EF%BC%8C%E7%9B%AE%E5%89%8D%E7%9A%84%E7%89%88%E6%9C%AC%E5%B7%B2%E7%BB%8F%E5%88%B0%E4%BA%868.0.20%EF%BC%8C%E4%B8%8B%E8%BD%BD%E5%AE%8C%E6%88%90%E5%90%8E%EF%BC%8C%E5%8F%8C%E5%87%BB%60msi%60%E6%96%87%E4%BB%B6%E8%BF%9B%E8%A1%8C%E5%AE%89%E8%A3%85%EF%BC%8C%E9%80%89%E6%8B%A9%E8%87%AA%E5%AE%9A%E4%B9%89%E5%AE%89%E8%A3%85">https://dev.mysql.com/downloads/installer/，目前的版本已经到了8.0.20，下载完成后，双击`msi`文件进行安装，选择自定义安装</a></p><p><img src="https://image.xugaoxiang.com/imgs/2020/05/b4e9d2f9a6772d9a.png" alt="img"></p><p>在左侧选择需要安装的，点击向右的箭头，右侧的框中是要安装的组件，这里我们只安装<code>server</code>和管理工具<code>workbench</code></p><p><img src="https://image.xugaoxiang.com/imgs/2020/05/8b4a7c3c1f9a59fe.png" alt="img"></p><p><img src="https://image.xugaoxiang.com/imgs/2020/05/5e3cfcc58a87fb37.png" alt="img"></p><p><img src="https://image.xugaoxiang.com/imgs/2020/05/4c48f93649914111.png" alt="img"></p><p><img src="https://image.xugaoxiang.com/imgs/2020/05/accb6c14e590fd71.png" alt="img"></p><p>默认使用的端口号是3306，保持默认</p><p><img src="https://image.xugaoxiang.com/imgs/2020/05/e50cbf5e756fd902.png" alt="img"></p><p>设置超级用户<code>root</code>的密码，如果需要添加普通用户，选择下方的<code>Add User</code></p><p><img src="https://image.xugaoxiang.com/imgs/2020/05/008225cd6b8a062d.png" alt="img"></p><p><img src="https://image.xugaoxiang.com/imgs/2020/05/da507ebe1eda5f01.png" alt="img"></p><p><img src="https://image.xugaoxiang.com/imgs/2020/05/b7ddabc0659576f0.png" alt="img"></p><p><img src="https://image.xugaoxiang.com/imgs/2020/05/f07ee9caac89c650.png" alt="img"></p><p><img src="https://image.xugaoxiang.com/imgs/2020/05/de12cd3cf9e127a7.png" alt="img"></p><p>安装完毕后，使用<code>workbench</code>创建一个数据库连接，填上<code>ip</code>、端口和用户名</p><p><img src="https://image.xugaoxiang.com/imgs/2020/05/ec48521642fcd1fc.png" alt="img"></p><p>使用<code>root</code>账户登录数据库</p><p><img src="https://image.xugaoxiang.com/imgs/2020/05/bc69bc88dfaff242.png" alt="img"></p><p>创建一个数据库，名称是<code>testdb</code>，字符编码是<code>utf8</code></p><p><img src="https://image.xugaoxiang.com/imgs/2020/05/74a9426c9d3198e2.png" alt="img"></p><p>接下来，新建一张表，表名是<code>testtable</code>，有三个字段</p><ul><li><code>id</code>，数据类型是<code>INT(11)</code>，设为主键、唯一、非空、<code>UNSIGNED</code>、<code>AUTO INCREMENT</code></li><li><code>name</code>，数据类型是<code>VARCHAR(45)</code>,设为非空</li><li><code>sex</code>，数据类型是<code>VARCHAR(45)</code>，设为非空</li></ul><p><img src="https://image.xugaoxiang.com/imgs/2020/05/199d36c4c467eb79.png" alt="img"></p><p><img src="https://image.xugaoxiang.com/imgs/2020/05/f865893f35a875b5.png" alt="img"></p><h3 id="实例源码"><a href="#实例源码" class="headerlink" title="实例源码"></a>实例源码</h3><p>这里我们使用<code>pymysql</code>这个库来操作数据库，首先通过<code>pip</code>来安装</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">pip install pymysql</span><br></pre></td></tr></table></figure><p>数据库的基本操作就是增(<code>Create</code>)、查(<code>Retrieve</code>)、改(<code>Update</code>)、删(<code>Delete</code>)，就是所谓的<code>CRUD</code>，下面通过实例一个一个的来操作</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">import pymysql</span><br><span class="line"></span><br><span class="line"># 数据库连接</span><br><span class="line">db = pymysql.connect(&quot;localhost&quot;, &quot;root&quot;, &quot;toor&quot;, &quot;testdb&quot;)</span><br><span class="line">cursor = db.cursor()</span><br><span class="line"></span><br><span class="line"># 插入操作</span><br><span class="line">try:</span><br><span class="line">   # 执行sql语句</span><br><span class="line">   cursor.execute(&quot;INSERT INTO testtable(name, sex) VALUES(&#x27;xgx&#x27;, &#x27;male&#x27;)&quot;)</span><br><span class="line">   # 提交到数据库执行</span><br><span class="line">   db.commit()</span><br><span class="line">except:</span><br><span class="line">   # 如果发生错误则回滚</span><br><span class="line">   db.rollback()</span><br><span class="line"></span><br><span class="line"># 查询操作</span><br><span class="line">try:</span><br><span class="line">   # 执行SQL语句，返回的是满足查询条件的记录数量</span><br><span class="line">   cursor.execute(&quot;SELECT * FROM testtable&quot;)</span><br><span class="line">   # 获取所有记录列表，除了fetchall方法，pymysql还提供了fetone()、fetchmany()</span><br><span class="line">   results = cursor.fetchall()</span><br><span class="line">   for row in results:</span><br><span class="line">      name = row[1]</span><br><span class="line">      sex = row[2]</span><br><span class="line"></span><br><span class="line">      # 打印结果</span><br><span class="line">      print(&quot;name: &#123;&#125;, sex: &#123;&#125;&quot;.format(name, sex))</span><br><span class="line">except:</span><br><span class="line">   print (&quot;Error: unable to fetch data&quot;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 更新记录</span><br><span class="line">try:</span><br><span class="line">   # 执行sql语句</span><br><span class="line">   cursor.execute(&quot;UPDATE testtable SET sex=&#x27;female&#x27; WHERE id=4&quot;)</span><br><span class="line">   # 提交到数据库执行</span><br><span class="line">   db.commit()</span><br><span class="line">except:</span><br><span class="line">   # 如果发生错误则回滚</span><br><span class="line">   db.rollback()</span><br><span class="line"></span><br><span class="line"># 删除操作</span><br><span class="line">try:</span><br><span class="line">   # 执行SQL语句</span><br><span class="line">   cursor.execute(&quot;DELETE FROME testtable WHERE id=4&quot;)</span><br><span class="line">   # 提交修改</span><br><span class="line">   db.commit()</span><br><span class="line">except:</span><br><span class="line">   # 发生错误时回滚</span><br><span class="line">   db.rollback()</span><br><span class="line"></span><br><span class="line"># 关闭数据库连接</span><br><span class="line">db.close()</span><br></pre></td></tr></table></figure><h3 id="ubuntu安装mysql"><a href="#ubuntu安装mysql" class="headerlink" title="ubuntu安装mysql"></a>ubuntu安装mysql</h3><p>如果你的<mark class="hl-label blue">系统</mark> 系统是<code>ubuntu</code>，可以参考 <a href="https://xugaoxiang.com/2020/03/01/ubuntu-mysql-installation/">ubuntu安装mysql</a> 进行安装</p><div class="mermaid-wrap"><pre class="mermaid-src" hidden>  pie    title Key elements in Product X    &quot;Calcium&quot; : 42.96    &quot;Potassium&quot; : 50.05    &quot;Magnesium&quot; : 10.01    &quot;Iron&quot; :  5  </pre></div><div class="tabs" id="test1"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="test1-1">test1 1</button><button type="button" class="tab " data-href="test1-2">test1 2</button><button type="button" class="tab " data-href="test1-3">test1 3</button></ul><div class="tab-contents"><div class="tab-item-content active" id="test1-1"><p><strong>This is Tab 1.</strong></p></div><div class="tab-item-content" id="test1-2"><p><strong>This is Tab 2.</strong></p></div><div class="tab-item-content" id="test1-3"><p><strong>This is Tab 3.</strong></p></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div><div class="timeline blue"><div class='timeline-item headline'><div class='timeline-item-title'><div class='item-circle'><p>2022</p></div></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>01-02</p></div></div><div class='timeline-item-content'><p>这是测试页面</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>01-05</p></div></div><div class='timeline-item-content'><p>这是测试页面2</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>01-08</p></div></div><div class='timeline-item-content'><p>这是测试页面3</p></div></div></div>]]></content>
      
      
      <categories>
          
          <category> Flask </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 日志 </tag>
            
            <tag> 计算机 </tag>
            
            <tag> Games </tag>
            
            <tag> 爬虫 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>蓝图</title>
      <link href="/2024/03/18/%E8%93%9D%E5%9B%BE/"/>
      <url>/2024/03/18/%E8%93%9D%E5%9B%BE/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="Flask教程-十四-蓝图"><a href="#Flask教程-十四-蓝图" class="headerlink" title="Flask教程(十四)蓝图"></a><a href="https://xugaoxiang.com/2020/08/24/flask-14-blueprint/">Flask教程(十四)蓝图</a></h1><h3 id="软硬件环境"><a href="#软硬件环境" class="headerlink" title="软硬件环境"></a>软硬件环境</h3><ul><li>windows 10 64bit</li><li><a href="https://xugaoxiang.com/tag/anaconda/">anaconda</a>3 with <a href="https://xugaoxiang.com/tag/python/">python</a> 3.7</li><li>pycharm 2020.1.2</li><li><a href="https://xugaoxiang.com/tag/flask/">flask</a> 1.1.2</li></ul><h3 id="什么是蓝图"><a href="#什么是蓝图" class="headerlink" title="什么是蓝图"></a>什么是蓝图</h3><p>蓝图(<code>blueprint</code>)提供了<strong>模块化管理程序路由</strong>的功能，使程序结构清晰、简单易懂。<code>blueprint</code>对象和<code>flask</code>应用对象的工作方式很像，但他俩不是一个东西。蓝图很好地简化了大型应用工作的方式，并提供给<code>flask</code>扩展在应用上注册操作的核心方法。</p><h3 id="应用工厂函数"><a href="#应用工厂函数" class="headerlink" title="应用工厂函数"></a>应用工厂函数</h3><p>前面讲到常见<code>flask</code>项目结构时提到一点，在单个文件中开发应用很方便，但是有个很大的缺点，应用在全局作用域中创建，无法动态修改配置。运行脚本时，应用实例已经创建，再修改配置已经为时已晚。面对这个问题，解决方案就是延迟创建应用实例，这时工厂函数就出场了，来看下面的示例</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line"><span class="keyword">from</span> flask_bootstrap <span class="keyword">import</span> Bootstrap</span><br><span class="line"><span class="keyword">from</span> flask_sqlalchemy <span class="keyword">import</span> SQLAlchemy</span><br><span class="line"><span class="keyword">from</span> app.config <span class="keyword">import</span> Config</span><br><span class="line"></span><br><span class="line">bootstrap = Bootstrap()</span><br><span class="line">db = SQLAlchemy()</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">create_app</span>(<span class="params">config_class=Config</span>):</span><br><span class="line">    app = Flask(__name__)</span><br><span class="line">    app.config.from_object(Config)</span><br><span class="line">    bootstrap.init_app(app)</span><br><span class="line">    db.init_app(app)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> app</span><br></pre></td></tr></table></figure><p>首先导入了大多数正在使用的<code>flask</code>扩展，但是由于尚未初始化所需的应用实例，所以创建扩展类时没有向构造函数传入参数，因此扩展并未真正初始化。<code>create_app</code>函数是应用的工厂函数，接受一个参数，是应用使用的配置名。配置类在<code>config.py</code>文件中定义。应用创建并配置好后，就能初始化扩展了。在之前创建的扩展对象上调用<code>init_app()</code>便可以完成初始化</p><h3 id="为什么使用蓝图"><a href="#为什么使用蓝图" class="headerlink" title="为什么使用蓝图"></a>为什么使用蓝图</h3><p>来看看蓝图的优点，来自官方文档</p><ul><li>把一个应用分解为一个蓝图的集合。这对大型应用是理想的。一个项目可以实例化一个应用对象，初始化几个扩展，并注册一集合的蓝图</li><li>以<code>URL</code>前缀和<code>/</code>或子域名，在应用上注册一个蓝图。<code>URL</code>前缀<code>/</code>子域名中的参数即成为这个蓝图下的所有视图函数的共同的视图参数（默认情况下）</li><li>在一个应用中用不同的<code>URL</code>规则多次注册一个蓝图</li><li>通过蓝图提供模板过滤器、静态文件、模板和其它功能。一个蓝图不一定要实现应用或者视图函数。</li><li>初始化一个<code>Flask</code>扩展时，在这些情况中注册一个蓝图</li></ul><p>蓝图作为<code>flask</code>层提供分割的替代，共享应用配置，并且在必要情况下可以更改所注册的应用对象。它的缺点是你不能在应用创建后撤销注册一个蓝图而不销毁整个应用对象。</p><h3 id="蓝图示例"><a href="#蓝图示例" class="headerlink" title="蓝图示例"></a>蓝图示例</h3><p>结合上面的应用工厂和蓝图，我们来看看示例，工程结构如下</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">blueprint/</span><br><span class="line">  app/</span><br><span class="line">      static/</span><br><span class="line">        ...</span><br><span class="line"></span><br><span class="line">      views/</span><br><span class="line">        index.py</span><br><span class="line"></span><br><span class="line">      templates/</span><br><span class="line">        ...</span><br><span class="line"></span><br><span class="line">      __init__.py</span><br><span class="line"></span><br><span class="line">      config.py</span><br><span class="line"></span><br><span class="line">  manage.py</span><br><span class="line">  README.md</span><br><span class="line">  requirements.txt</span><br></pre></td></tr></table></figure><p>其中<code>manage.py</code>代码如下</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> app <span class="keyword">import</span> create_app</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app = create_app()</span><br><span class="line">    app.run(use_reloader=<span class="literal">True</span>, port=<span class="number">5000</span>)</span><br></pre></td></tr></table></figure><p><code>__init__.py</code>代码如下</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line"><span class="keyword">from</span> .views.index <span class="keyword">import</span> index_blueprint</span><br><span class="line"><span class="keyword">from</span> . <span class="keyword">import</span> config</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">create_app</span>():</span><br><span class="line">    app = Flask(__name__)</span><br><span class="line">    app.config.from_object(config)</span><br><span class="line">    app.register_blueprint(index_blueprint)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> app</span><br></pre></td></tr></table></figure><p><code>index.py</code>源码如下</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Blueprint</span><br><span class="line"></span><br><span class="line">index_blueprint = Blueprint(<span class="string">&#x27;index&#x27;</span>, __name__)</span><br><span class="line"></span><br><span class="line"><span class="meta">@index_blueprint.route(<span class="params"><span class="string">&#x27;/&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index</span>():</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Hello blueprint.&quot;</span></span><br></pre></td></tr></table></figure><p><code>config.py</code>存放的是相关的配置信息</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">DEBUG = <span class="literal">False</span></span><br></pre></td></tr></table></figure><p>当上述项目启动后，我们就可以访问<code>http://127.0.0.1:5000</code>，浏览器输出<code>Hello blueprint.</code></p><h3 id="如何组织蓝图"><a href="#如何组织蓝图" class="headerlink" title="如何组织蓝图"></a>如何组织蓝图</h3><p><code>flask</code>中同样没有规定你如何来组织蓝图。常见的，有按照功能(<code>functional</code>)和按照分区(<code>divisional</code>)这2种方式来组织。</p><p>在功能架构中，按照每部分代码的功能来组织你的应用。所有模板、静态文件和视图都单独放在一个文件夹中，如下</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">project/</span><br><span class="line">    app/</span><br><span class="line">        __init__.py</span><br><span class="line">        static/</span><br><span class="line">        templates/</span><br><span class="line">            home/</span><br><span class="line">            admin/</span><br><span class="line">        views/</span><br><span class="line">            __init__.py</span><br><span class="line">            home.py</span><br><span class="line">            admin.py</span><br><span class="line">        models.py</span><br><span class="line">        config.py</span><br><span class="line"></span><br><span class="line">    README.md</span><br><span class="line">    requirements.txt</span><br><span class="line">    manage.py</span><br></pre></td></tr></table></figure><p>除了<code>project/app/views/__init__.py</code>，在<code>project/app/views/</code>文件夹中的每一个<code>.py</code>文件都是一个蓝图。在<code>project/app/__init__.py</code>中，加载这些蓝图并在<code>flask</code>对象中注册。</p><p>而在分区式架构中，按照每一部分所属的蓝图来组织你的应用。所有的模板、视图和静态文件放在一个文件夹中。项目结构如下</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">project/</span><br><span class="line">    app/</span><br><span class="line">        __init__.py</span><br><span class="line">        admin/</span><br><span class="line">            __init__.py</span><br><span class="line">            views.py</span><br><span class="line">            static/</span><br><span class="line">            templates/</span><br><span class="line">        home/</span><br><span class="line">            __init__.py</span><br><span class="line">            views.py</span><br><span class="line">            static/</span><br><span class="line">            templates/</span><br><span class="line">        models.py</span><br><span class="line">        config.py</span><br><span class="line"></span><br><span class="line">    README.md</span><br><span class="line">    requirements.txt</span><br><span class="line">    manage.py</span><br></pre></td></tr></table></figure><p>在上面的分区式结构，每一个<code>project/app/</code>之下的文件夹都是一个独立的蓝图。所有的蓝图通过顶级的<code>__init__.py</code>注册到<code>flask</code>对象中。</p><p>至于说，上面两种结构孰优孰劣，这个没有定论。一般的建议是这样的：如果应用是由独立的且仅仅共享模型和配置的各组件组成，建议选择分区式；如果应用的组件之间联系较为紧密，则建议使用功能式架构。</p>]]></content>
      
      
      <categories>
          
          <category> Flask </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 日志 </tag>
            
            <tag> web </tag>
            
            <tag> 计算机 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>路由</title>
      <link href="/2024/03/18/%E8%B7%AF%E7%94%B1/"/>
      <url>/2024/03/18/%E8%B7%AF%E7%94%B1/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="Flask教程-三-路由"><a href="#Flask教程-三-路由" class="headerlink" title="Flask教程(三)路由"></a><a href="https://xugaoxiang.com/2020/03/13/flask-3-routing/">Flask教程(三)路由</a></h1><h3 id="软硬件环境"><a href="#软硬件环境" class="headerlink" title="软硬件环境"></a>软硬件环境</h3><ul><li>Windows 10 64bit</li><li>Anaconda3 with <a href="https://xugaoxiang.com/tag/python/">python</a> 3.7</li><li>PyCharm 2019.3</li><li>Flask 1.1.1</li></ul><h3 id="什么是路由"><a href="#什么是路由" class="headerlink" title="什么是路由"></a>什么是路由</h3><p>路由(<code>Routing</code>)是用来映射<code>URL</code>和执行对应任务的函数。通过设置不同的路由，来访问不同的页面，像<a href="https://xugaoxiang.com/2020/03/12/flask-2-first-app/">上一节</a>中的<code>/</code>路由，就是访问网站的根目录。</p><h3 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h3><p>下面来看一个实例</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line">app = Flask(__name__)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/home&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index</span>():</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Welcome to home!&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app.run(host=<span class="string">&quot;127.0.0.1&quot;</span>,port=<span class="number">5000</span>,debug=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure><p>这时候去访问<code>http://127.0.0.1:5000</code>就会出现404错误</p><p><img src="https://image.xugaoxiang.com/imgs/2020/12/dd20455d4d54294d.png" alt="flask"></p><p>因为我们代码里根本就没有处理<code>/</code>路由的请求，访问<code>http://127.0.0.1:5000/home</code>，页面才会显示<code>Welcome to home!</code></p><p><img src="https://image.xugaoxiang.com/imgs/2020/12/1824e088335d2354.png" alt="flask"></p><p>那么另一个问题来了，如果有多条路由，比如<code>/home/shelly</code>、<code>/home/tom</code>和<code>、/home/carl</code>，能不能在同一个函数中进行处理呢？答案是可以的，我们可以通过给<code>@app.route</code>传递变量的方式实现，如下</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line">app = Flask(__name__)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/home/&lt;name&gt;&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index</span>(<span class="params">name</span>):</span><br><span class="line">    <span class="keyword">return</span> <span class="string">f&quot;Welcome to home!<span class="subst">&#123;name&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app.run(host=<span class="string">&quot;127.0.0.1&quot;</span>,port=<span class="number">5000</span>,debug=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure><p>这时候访问<code>http://127.0.0.1:5000/home/carl</code>，页面上就会显示<code>Welcome to home!carl</code>；访问<code>http://127.0.0.1:5000/home/shelly</code>，页面上就会显示<code>Welcome to home!shelly</code>了</p><p><img src="https://image.xugaoxiang.com/imgs/2020/12/25ac448aad31d2aa.png" alt="flask"></p><p><img src="https://image.xugaoxiang.com/imgs/2020/12/7b5d857af847d8d8.png" alt="flask"></p><p>可以看到上面的实例中，传递的参数是字符串类型，那如果是其它数据类型，怎么办呢？看下面这个实例</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line">app = Flask(__name__)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 特别注意，int后面冒号前后不能有空格</span></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/home/&lt;int:age&gt;&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index</span>(<span class="params">age</span>):</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;Age=&#123;&#125;&#x27;</span>.<span class="built_in">format</span>(age)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app.run(host=<span class="string">&quot;127.0.0.1&quot;</span>,port=<span class="number">5000</span>,debug=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure><p>这个时候我们就可以传递整型数据了 ，比如<code>http://127.0.0.1:5000/home/20</code></p><p><img src="https://image.xugaoxiang.com/imgs/2020/12/52dfa4722eb616ad.png" alt="flask"></p><p>除了上述添加路由的方法，<code>Flask</code>还提供了一个函数<code>add_url_rule</code>，它也能够完成同样的功能，看个实例</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line">app = Flask(__name__)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index</span>():</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;Hello flask!&#x27;</span></span><br><span class="line"></span><br><span class="line">app.add_url_rule(<span class="string">&#x27;/&#x27;</span>, <span class="string">&quot;index&quot;</span>, index)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app.run(host=<span class="string">&quot;127.0.0.1&quot;</span>,port=<span class="number">5000</span>,debug=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure><p>访问<code>http://127.0.0.1:5000</code>，可以看到页面显示<code>Hello flask!</code>，效果跟使用<code>@app.route</code>是一模一样的</p><p><img src="https://image.xugaoxiang.com/imgs/2020/12/81b923b1e9af5052.png" alt="flask"></p>]]></content>
      
      
      <categories>
          
          <category> Flask </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 路由 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>请求转发</title>
      <link href="/2024/03/18/%E8%AF%B7%E6%B1%82%E8%BD%AC%E5%8F%91/"/>
      <url>/2024/03/18/%E8%AF%B7%E6%B1%82%E8%BD%AC%E5%8F%91/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="Flask教程-二十四-请求转发"><a href="#Flask教程-二十四-请求转发" class="headerlink" title="Flask教程(二十四)请求转发"></a>Flask教程(二十四)请求转发</h1><h3 id="软硬件环境"><a href="#软硬件环境" class="headerlink" title="软硬件环境"></a>软硬件环境</h3><ul><li>windows 10 64bit</li><li>anaconda3 with python 3.7</li><li><a href="https://xugaoxiang.com/tag/flask/">flask</a> 1.1.2</li></ul><h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>在某些情况下，我们需要在<code>flask</code>中进行<code>http</code>请求的转发，也就是让<code>flask</code>成为<code>http</code>代理。本文借助流行的<code>http</code>请求库<code>requests</code>来实现。</p><h3 id="代码示例"><a href="#代码示例" class="headerlink" title="代码示例"></a>代码示例</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index</span>():</span><br><span class="line">    <span class="comment"># 这里可以使用requests.request来实现各种http方法</span></span><br><span class="line">    req = requests.get(<span class="string">&#x27;http://127.0.0.1:5000/proxy&#x27;</span>)</span><br><span class="line">    <span class="comment"># 响应体返回，这里是字符串</span></span><br><span class="line">    <span class="keyword">return</span> req.text</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/proxy&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">proxy</span>():</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Hello Flask.&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app.run(host=<span class="string">&#x27;127.0.0.1&#x27;</span>, port=<span class="number">5000</span>,debug=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure><p>启动服务，访问<code>http://127.0.0.1:5000</code>，页面上会显示字符串<code>Hello Flask.</code></p><p><img src="https://image.xugaoxiang.com/imgs/2020/11/6d1bee8c61840904.png" alt="flask_proxy"></p>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
